import{a as p,b as m}from"./_tslib@2.6.3@tslib-Ck5hgXZz.js";import{B}from"./_@antv_util@3.3.7@@antv-rk1Gsl7O.js";import{ah as S,ai as w,aj as O}from"./_gl-matrix@3.4.3@gl-matrix-Cx0TVU2o.js";function q(r,t,n,f){var a=r-n,i=t-f;return Math.sqrt(a*a+i*i)}function L(r,t){var n=Math.min.apply(Math,p([],m(r),!1)),f=Math.min.apply(Math,p([],m(t),!1)),a=Math.max.apply(Math,p([],m(r),!1)),i=Math.max.apply(Math,p([],m(t),!1));return{x:n,y:f,width:a-n,height:i-f}}function _(r,t,n){return Math.atan(-t/r*Math.tan(n))}function j(r,t,n){return Math.atan(t/(r*Math.tan(n)))}function z(r,t,n,f,a,i){return n*Math.cos(a)*Math.cos(i)-f*Math.sin(a)*Math.sin(i)+r}function T(r,t,n,f,a,i){return n*Math.sin(a)*Math.cos(i)+f*Math.cos(a)*Math.sin(i)+t}function V(r,t,n,f,a,i,v){for(var e=_(n,f,a),u=1/0,s=-1/0,c=[i,v],o=-Math.PI*2;o<=Math.PI*2;o+=Math.PI){var h=e+o;i<v?i<h&&h<v&&c.push(h):v<h&&h<i&&c.push(h)}for(var o=0;o<c.length;o++){var P=z(r,t,n,f,a,c[o]);P<u&&(u=P),P>s&&(s=P)}for(var E=j(n,f,a),d=1/0,l=-1/0,I=[i,v],o=-Math.PI*2;o<=Math.PI*2;o+=Math.PI){var M=E+o;i<v?i<M&&M<v&&I.push(M):v<M&&M<i&&I.push(M)}for(var o=0;o<I.length;o++){var $=T(r,t,n,f,a,I[o]);$<d&&(d=$),$>l&&(l=$)}return{x:u,y:d,width:s-u,height:l-d}}var F=1e-4;function N(r,t,n,f,a,i){var v=-1,e=1/0,u=[n,f],s=20;i&&i>200&&(s=i/10);for(var c=1/s,o=c/10,h=0;h<=s;h++){var P=h*c,E=[a.apply(void 0,p([],m(r.concat([P])),!1)),a.apply(void 0,p([],m(t.concat([P])),!1))],d=q(u[0],u[1],E[0],E[1]);d<e&&(v=P,e=d)}if(v===0)return{x:r[0],y:t[0]};if(v===1){var l=r.length;return{x:r[l-1],y:t[l-1]}}e=1/0;for(var h=0;h<32&&!(o<F);h++){var I=v-o,M=v+o,E=[a.apply(void 0,p([],m(r.concat([I])),!1)),a.apply(void 0,p([],m(t.concat([I])),!1))],d=q(u[0],u[1],E[0],E[1]);if(I>=0&&d<e)v=I,e=d;else{var $=[a.apply(void 0,p([],m(r.concat([M])),!1)),a.apply(void 0,p([],m(t.concat([M])),!1))],Y=q(u[0],u[1],$[0],$[1]);M<=1&&Y<e?(v=M,e=Y):o*=.5}}return{x:a.apply(void 0,p([],m(r.concat([v])),!1)),y:a.apply(void 0,p([],m(t.concat([v])),!1))}}function W(r,t,n,f){return q(r,t,n,f)}function Z(r,t,n,f,a){return{x:(1-a)*r+a*n,y:(1-a)*t+a*f}}function R(r,t,n,f,a,i){var v=[n-r,f-t];if(S(v,[0,0]))return Math.sqrt((a-r)*(a-r)+(i-t)*(i-t));var e=[-v[1],v[0]];w(e,e);var u=[a-r,i-t];return Math.abs(O(u,e))}function D(r,t,n,f,a){var i=1-a;return i*i*i*r+3*t*a*i*i+3*n*a*a*i+f*a*a*a}function b(r,t,n,f){var a=-3*r+9*t-9*n+3*f,i=6*r-12*t+6*n,v=3*t-3*r,e=[],u,s,c;if(B(a,0))B(i,0)||(u=-v/i,u>=0&&u<=1&&e.push(u));else{var o=i*i-4*a*v;B(o,0)?e.push(-i/(2*a)):o>0&&(c=Math.sqrt(o),u=(-i+c)/(2*a),s=(-i-c)/(2*a),u>=0&&u<=1&&e.push(u),s>=0&&s<=1&&e.push(s))}return e}function k(r,t,n,f,a,i,v,e){for(var u=[r,v],s=[t,e],c=b(r,n,a,v),o=b(t,f,i,e),h=0;h<c.length;h++)u.push(D(r,n,a,v,c[h]));for(var h=0;h<o.length;h++)s.push(D(t,f,i,e,o[h]));return L(u,s)}function G(r,t,n,f,a,i,v,e,u,s,c){return N([r,n,a,v],[t,f,i,e],u,s,D,c)}function x(r,t,n,f,a,i,v,e,u,s,c){var o=G(r,t,n,f,a,i,v,e,u,s,c);return q(o.x,o.y,u,s)}function H(r){if(r.length<2)return 0;for(var t=0,n=0;n<r.length-1;n++){var f=r[n],a=r[n+1];t+=q(f[0],f[1],a[0],a[1])}return t}function C(r){return H(r)}function X(r,t,n,f){var a=1-f;return a*a*r+2*f*a*t+f*f*n}function y(r,t,n){var f=r+n-2*t;if(B(f,0))return[.5];var a=(r-t)/f;return a<=1&&a>=0?[a]:[]}function g(r,t,n,f,a,i){var v=y(r,n,a)[0],e=y(t,f,i)[0],u=[r,a],s=[t,i];return v!==void 0&&u.push(X(r,n,a,v)),e!==void 0&&s.push(X(t,f,i,e)),L(u,s)}function J(r,t,n,f,a,i,v,e){return N([r,n,a],[t,f,i],v,e,X)}function A(r,t,n,f,a,i,v,e){var u=J(r,t,n,f,a,i,v,e);return q(u.x,u.y,v,e)}export{C as a,V as b,k as c,g as d,q as e,R as f,x as g,A as h,W as l,Z as p};
