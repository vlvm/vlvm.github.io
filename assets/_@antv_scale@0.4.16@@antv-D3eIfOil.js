import{u as qt,V as _t,d as W,f as ft,U as Dt,W as It,X as I}from"./_@antv_util@3.3.7@@antv-rk1Gsl7O.js";import{f as $t}from"./_fecha@4.2.3@fecha-DFkiGBGG.js";import{c as Vt}from"./_color-string@1.9.1@color-string-B3fHpME3.js";function N(n,...t){return t.reduce((e,o)=>r=>e(o(r)),n)}function q(n,t){return t-n?e=>(e-n)/(t-n):e=>.5}function Gt(n,t){const e=t<n?t:n,o=n>t?n:t;return r=>Math.min(Math.max(e,r),o)}function ot(n,t,e,o,r){let s=e||0,i=o||n.length;const a=r||(c=>c);for(;s<i;){const c=Math.floor((s+i)/2);a(n[c])>t?i=c:s=c+1}return s}const Q=Math.sqrt(50),tt=Math.sqrt(10),nt=Math.sqrt(2);function L(n,t,e){const o=(t-n)/Math.max(0,e),r=Math.floor(Math.log(o)/Math.LN10),s=o/10**r;return r>=0?(s>=Q?10:s>=tt?5:s>=nt?2:1)*10**r:-(10**-r)/(s>=Q?10:s>=tt?5:s>=nt?2:1)}function dt(n,t,e){const o=Math.abs(t-n)/Math.max(0,e);let r=10**Math.floor(Math.log(o)/Math.LN10);const s=o/r;return s>=Q?r*=10:s>=tt?r*=5:s>=nt&&(r*=2),t<n?-r:r}const Ot=(n,t,e=5)=>{const o=[n,t];let r=0,s=o.length-1,i=o[r],a=o[s],c;return a<i&&([i,a]=[a,i],[r,s]=[s,r]),c=L(i,a,e),c>0?(i=Math.floor(i/c)*c,a=Math.ceil(a/c)*c,c=L(i,a,e)):c<0&&(i=Math.ceil(i*c)/c,a=Math.floor(a*c)/c,c=L(i,a,e)),c>0?(o[r]=Math.floor(i/c)*c,o[s]=Math.ceil(a/c)*c):c<0&&(o[r]=Math.ceil(i*c)/c,o[s]=Math.floor(a*c)/c),o},B=1e3,F=B*60,P=F*60,O=P*24,A=O*7,Ct=O*30,xt=O*365;function T(n,t,e,o){const r=(l,u)=>{const h=m=>o(m)%u===0;let f=u;for(;f&&!h(l);)e(l,-1),f-=1;return l},s=(l,u)=>{u&&r(l,u),t(l)},i=(l,u)=>{const h=new Date(+l);return s(h,u),h},a=(l,u)=>{const h=new Date(+l-1);return s(h,u),e(h,u),s(h),h};return{ceil:a,floor:i,range:(l,u,h,f)=>{const m=[],d=Math.floor(h),p=f?a(l,h):a(l);for(let g=p;g<u;e(g,d),s(g))m.push(new Date(+g));return m},duration:n}}const Jt=T(1,n=>n,(n,t=1)=>{n.setTime(+n+t)},n=>n.getTime()),Xt=T(B,n=>{n.setMilliseconds(0)},(n,t=1)=>{n.setTime(+n+B*t)},n=>n.getSeconds()),Zt=T(F,n=>{n.setSeconds(0,0)},(n,t=1)=>{n.setTime(+n+F*t)},n=>n.getMinutes()),Qt=T(P,n=>{n.setMinutes(0,0,0)},(n,t=1)=>{n.setTime(+n+P*t)},n=>n.getHours()),tn=T(O,n=>{n.setHours(0,0,0,0)},(n,t=1)=>{n.setTime(+n+O*t)},n=>n.getDate()-1),St=T(Ct,n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,t=1)=>{const e=n.getMonth();n.setMonth(e+t)},n=>n.getMonth()),nn=T(A,n=>{n.setDate(n.getDate()-n.getDay()%7),n.setHours(0,0,0,0)},(n,t=1)=>{n.setDate(n.getDate()+7*t)},n=>{const t=St.floor(n),e=new Date(+n);return Math.floor((+e-+t)/A)}),en=T(xt,n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t=1)=>{const e=n.getFullYear();n.setFullYear(e+t)},n=>n.getFullYear()),Nt={millisecond:Jt,second:Xt,minute:Zt,hour:Qt,day:tn,week:nn,month:St,year:en},on=T(1,n=>n,(n,t=1)=>{n.setTime(+n+t)},n=>n.getTime()),sn=T(B,n=>{n.setUTCMilliseconds(0)},(n,t=1)=>{n.setTime(+n+B*t)},n=>n.getUTCSeconds()),rn=T(F,n=>{n.setUTCSeconds(0,0)},(n,t=1)=>{n.setTime(+n+F*t)},n=>n.getUTCMinutes()),cn=T(P,n=>{n.setUTCMinutes(0,0,0)},(n,t=1)=>{n.setTime(+n+P*t)},n=>n.getUTCHours()),an=T(O,n=>{n.setUTCHours(0,0,0,0)},(n,t=1)=>{n.setTime(+n+O*t)},n=>n.getUTCDate()-1),Ut=T(Ct,n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,t=1)=>{const e=n.getUTCMonth();n.setUTCMonth(e+t)},n=>n.getUTCMonth()),un=T(A,n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7)%7),n.setUTCHours(0,0,0,0)},(n,t=1)=>{n.setTime(+n+A*t)},n=>{const t=Ut.floor(n),e=new Date(+n);return Math.floor((+e-+t)/A)}),ln=T(xt,n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t=1)=>{const e=n.getUTCFullYear();n.setUTCFullYear(e+t)},n=>n.getUTCFullYear()),Rt={millisecond:on,second:sn,minute:rn,hour:cn,day:an,week:un,month:Ut,year:ln};function hn(n){const t=n?Rt:Nt,{year:e,month:o,week:r,day:s,hour:i,minute:a,second:c,millisecond:l}=t;return{tickIntervals:[[c,1],[c,5],[c,15],[c,30],[a,1],[a,5],[a,15],[a,30],[i,1],[i,3],[i,6],[i,12],[s,1],[s,2],[r,1],[o,1],[o,3],[e,1]],year:e,millisecond:l}}function bt(n,t,e,o,r){const s=+n,i=+t,{tickIntervals:a,year:c,millisecond:l}=hn(r),u=([g,M])=>g.duration*M,h=o?(i-s)/o:e||5,f=o||(i-s)/h,m=a.length,d=ot(a,f,0,m,u);let p;if(d===m){const g=dt(s/c.duration,i/c.duration,h);p=[c,g]}else if(d){const g=f/u(a[d-1])<u(a[d])/f,[M,D]=g?a[d-1]:a[d],w=o?Math.ceil(o/M.duration):D;p=[M,w]}else{const g=Math.max(dt(s,i,h),1);p=[l,g]}return p}const fn=(n,t,e,o,r)=>{const s=n>t,i=s?t:n,a=s?n:t,[c,l]=bt(i,a,e,o,r),u=[c.floor(i,l),c.ceil(a,l)];return s?u.reverse():u};function _(n){return!qt(n)&&!_t(n)&&!Number.isNaN(n)}const At=n=>t=>-n(-t),st=(n,t)=>{const e=Math.log(n),o=n===Math.E?Math.log:n===10?Math.log10:n===2?Math.log2:r=>Math.log(r)/e;return t?At(o):o},rt=(n,t)=>{const e=n===Math.E?Math.exp:o=>n**o;return t?At(e):e},dn=(n,t,e,o)=>{const r=n<0,s=st(o,r),i=rt(o,r),a=n>t,c=a?t:n,l=a?n:t,u=[i(Math.floor(s(c))),i(Math.ceil(s(l)))];return a?u.reverse():u},pn=n=>t=>{const e=n(t);return W(e)?Math.round(e):e};function mn(n,t){return e=>{e.prototype.rescale=function(){this.initRange(),this.nice();const[o]=this.chooseTransforms();this.composeOutput(o,this.chooseClamp(o))},e.prototype.initRange=function(){const{interpolator:o}=this.options;this.options.range=n(o)},e.prototype.composeOutput=function(o,r){const{domain:s,interpolator:i,round:a}=this.getOptions(),c=t(s.map(o)),l=a?pn(i):i;this.output=N(l,c,r,o)},e.prototype.invert=void 0}}function Z(n,t,e){let o=e;return o<0&&(o+=1),o>1&&(o-=1),o<1/6?n+(t-n)*6*o:o<1/2?t:o<2/3?n+(t-n)*(2/3-o)*6:n}function gn(n){const t=n[0]/360,e=n[1]/100,o=n[2]/100,r=n[3];if(e===0)return[o*255,o*255,o*255,r];const s=o<.5?o*(1+e):o+e-o*e,i=2*o-s,a=Z(i,s,t+1/3),c=Z(i,s,t),l=Z(i,s,t-1/3);return[a*255,c*255,l*255,r]}function pt(n){const t=Vt.get(n);if(!t)return null;const{model:e,value:o}=t;return e==="rgb"?o:e==="hsl"?gn(o):null}const U=(n,t)=>e=>n*(1-e)+t*e,Mn=(n,t)=>{const e=pt(n),o=pt(t);return e===null||o===null?e?()=>n:()=>t:r=>{const s=new Array(4);for(let u=0;u<4;u+=1){const h=e[u],f=o[u];s[u]=h*(1-r)+f*r}const[i,a,c,l]=s;return`rgba(${Math.round(i)}, ${Math.round(a)}, ${Math.round(c)}, ${l})`}},$=(n,t)=>typeof n=="number"&&typeof t=="number"?U(n,t):typeof n=="string"&&typeof t=="string"?Mn(n,t):()=>n,kn=(n,t)=>{const e=U(n,t);return o=>Math.round(e(o))};function Tn(n,t){const{second:e,minute:o,hour:r,day:s,week:i,month:a,year:c}=t;return e.floor(n)<n?".SSS":o.floor(n)<n?":ss":r.floor(n)<n?"hh:mm":s.floor(n)<n?"hh A":a.floor(n)<n?i.floor(n)<n?"MMM DD":"ddd DD":c.floor(n)<n?"MMMM":"YYYY"}function mt({map:n,initKey:t},e){const o=t(e);return n.has(o)?n.get(o):e}function yn({map:n,initKey:t},e){const o=t(e);return n.has(o)?n.get(o):(n.set(o,e),e)}function vn({map:n,initKey:t},e){const o=t(e);return n.has(o)&&(e=n.get(o),n.delete(o)),e}function wn(n){return typeof n=="object"?n.valueOf():n}class gt extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=wn,t!==null)for(const[e,o]of t)this.set(e,o)}get(t){return super.get(mt({map:this.map,initKey:this.initKey},t))}has(t){return super.has(mt({map:this.map,initKey:this.initKey},t))}set(t,e){return super.set(yn({map:this.map,initKey:this.initKey},t),e)}delete(t){return super.delete(vn({map:this.map,initKey:this.initKey},t))}}class K{constructor(t){this.options=ft({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=ft({},this.options,t),this.rescale(t)}rescale(t){}}const V=Symbol("defaultUnknown");function Mt(n,t,e){for(let o=0;o<t.length;o+=1)n.has(t[o])||n.set(e(t[o]),o)}function kt(n){const{value:t,from:e,to:o,mapper:r,notFoundReturn:s}=n;let i=r.get(t);if(i===void 0){if(s!==V)return s;i=e.push(t)-1,r.set(t,i)}return o[i%o.length]}function Tt(n){return n instanceof Date?t=>`${t}`:typeof n=="object"?t=>JSON.stringify(t):t=>t}class it extends K{getDefaultOptions(){return{domain:[],range:[],unknown:V}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&Mt(this.domainIndexMap,this.getDomain(),this.domainKey),kt({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&Mt(this.rangeIndexMap,this.getRange(),this.rangeKey),kt({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[e]=this.options.domain,[o]=this.options.range;if(this.domainKey=Tt(e),this.rangeKey=Tt(o),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new it(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:e}=this.options;return this.sortedDomain=e?[...t].sort(e):t,this.sortedDomain}}function Dn(n){const t=Math.min(...n);return n.map(e=>e/t)}function In(n,t){const e=n.length,o=t-e;return o>0?[...n,...new Array(o).fill(1)]:o<0?n.slice(0,t):n}function On(n){return Math.round(n*1e12)/1e12}function Cn(n){const{domain:t,range:e,paddingOuter:o,paddingInner:r,flex:s,round:i,align:a}=n,c=t.length,l=In(s,c),[u,h]=e,f=h-u,m=2/c*o+1-1/c*r,d=f/m,p=d*r/c,g=d-c*p,M=Dn(l),D=M.reduce((k,y)=>k+y),w=g/D,R=new gt(t.map((k,y)=>{const S=M[y]*w;return[k,i?Math.floor(S):S]})),v=new gt(t.map((k,y)=>{const E=M[y]*w+p;return[k,i?Math.floor(E):E]})),z=Array.from(v.values()).reduce((k,y)=>k+y),H=(f-(z-z/c*r))*a,Y=u+H;let x=i?Math.round(Y):Y;const X=new Array(c);for(let k=0;k<c;k+=1){X[k]=On(x);const y=t[k];x+=v.get(y)}return{valueBandWidth:R,valueStep:v,adjustedRange:X}}function xn(n){var t;const{domain:e}=n,o=e.length;if(o===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=n.flex)===null||t===void 0)&&t.length))return Cn(n);const{range:s,paddingOuter:i,paddingInner:a,round:c,align:l}=n;let u,h,f=s[0];const d=s[1]-f,p=i*2,g=o-a;u=d/Math.max(1,p+g),c&&(u=Math.floor(u)),f+=(d-u*(o-a))*l,h=u*(1-a),c&&(f=Math.round(f),h=Math.round(h));const M=new Array(o).fill(0).map((D,w)=>f+w*u);return{valueStep:u,valueBandWidth:h,adjustedRange:M}}class ct extends it{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:V,flex:[]}}constructor(t){super(t)}clone(){return new ct(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:e}=this.options;return t>0?t:e}getPaddingOuter(){const{padding:t,paddingOuter:e}=this.options;return t>0?t:e}rescale(){super.rescale();const{align:t,domain:e,range:o,round:r,flex:s}=this.options,{adjustedRange:i,valueBandWidth:a,valueStep:c}=xn({align:t,range:o,round:r,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=c,this.valueBandWidth=a,this.adjustedRange=i}}const C=(n,t,e)=>{let o,r,s=n,i=t;if(s===i&&e>0)return[s];let a=L(s,i,e);if(a===0||!Number.isFinite(a))return[];if(a>0){s=Math.ceil(s/a),i=Math.floor(i/a),r=new Array(o=Math.ceil(i-s+1));for(let c=0;c<o;c+=1)r[c]=(s+c)*a}else{a=-a,s=Math.ceil(s*a),i=Math.floor(i*a),r=new Array(o=Math.ceil(i-s+1));for(let c=0;c<o;c+=1)r[c]=(s+c)/a}return r};class Wt extends K{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:C}}map(t){const[e]=this.options.range;return e!==void 0?e:this.options.unknown}invert(t){const[e]=this.options.range;return t===e&&e!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:e,tickCount:o}=this.options,[r,s]=e;return!W(r)||!W(s)?[]:t(r,s,o)}clone(){return new Wt(this.options)}}function b(n){return Math.abs(n)<1e-14?n:parseFloat(n.toFixed(14))}const Sn=[1,5,2,2.5,4,3],yt=Number.EPSILON*100;function Nn(n,t){return(n%t+t)%t}function Un(n){return Math.round(n*1e12)/1e12}function Rn(n,t,e,o,r,s){const i=Dt(t),a=It(t,n);let c=0;const l=Nn(o,s);return(l<yt||s-l<yt)&&o<=0&&r>=0&&(c=1),1-a/(i-1)-e+c}function bn(n,t,e){const o=Dt(t);return 1-It(t,n)/(o-1)-e+1}function An(n,t,e,o,r,s){const i=(n-1)/(s-r),a=(t-1)/(Math.max(s,o)-Math.min(e,r));return 2-Math.max(i/a,a/i)}function Wn(n,t){return n>=t?2-(n-1)/(t-1):1}function Bn(n,t,e,o){const r=t-n;return 1-.5*((t-o)**2+(n-e)**2)/(.1*r)**2}function Fn(n,t,e){const o=t-n;return e>o?1-((e-o)/2)**2/(.1*o)**2:1}function Pn(){return 1}const at=(n,t,e=5,o=!0,r=Sn,s=[.25,.2,.5,.05])=>{const i=e<0?0:Math.round(e);if(Number.isNaN(n)||Number.isNaN(t)||typeof n!="number"||typeof t!="number"||!i)return[];if(t-n<1e-15||i===1)return[n];const a={score:-2,lmin:0,lmax:0,lstep:0};let c=1;for(;c<1/0;){for(let d=0;d<r.length;d+=1){const p=r[d],g=bn(p,r,c);if(s[0]*g+s[1]+s[2]+s[3]<a.score){c=1/0;break}let M=2;for(;M<1/0;){const D=Wn(M,i);if(s[0]*g+s[1]+s[2]*D+s[3]<a.score)break;const w=(t-n)/(M+1)/c/p;let R=Math.ceil(Math.log10(w));for(;R<1/0;){const v=c*p*10**R,z=Fn(n,t,v*(M-1));if(s[0]*g+s[1]*z+s[2]*D+s[3]<a.score)break;const j=Math.floor(t/v)*c-(M-1)*c,H=Math.ceil(n/v)*c;if(j<=H){const Y=H-j;for(let x=0;x<=Y;x+=1){const k=(j+x)*(v/c),y=k+v*(M-1),S=v,E=Rn(p,r,c,k,y,S),Yt=Bn(n,t,k,y),Et=An(M,i,n,t,k,y),Lt=Pn(),ht=s[0]*E+s[1]*Yt+s[2]*Et+s[3]*Lt;ht>a.score&&(!o||k<=n&&y>=t)&&(a.lmin=k,a.lmax=y,a.lstep=S,a.score=ht)}}R+=1}M+=1}}c+=1}const l=b(a.lmax),u=b(a.lmin),h=b(a.lstep),f=Math.floor(Un((l-u)/h))+1,m=new Array(f);m[0]=b(u);for(let d=1;d<f;d+=1)m[d]=b(m[d-1]+h);return m};class Bt extends K{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:at}}map(t){return _(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new Bt(this.options)}getTicks(){const{domain:t,tickCount:e,tickMethod:o}=this.options,[r,s]=t;return!W(r)||!W(s)?[]:o(r,s,e)}}const Kn=(n,t,e)=>{const[o,r]=n,[s,i]=t;let a,c;return o<r?(a=q(o,r),c=e(s,i)):(a=q(r,o),c=e(i,s)),N(c,a)},zn=(n,t,e)=>{const o=Math.min(n.length,t.length)-1,r=new Array(o),s=new Array(o),i=n[0]>n[o],a=i?[...n].reverse():n,c=i?[...t].reverse():t;for(let l=0;l<o;l+=1)r[l]=q(a[l],a[l+1]),s[l]=e(c[l],c[l+1]);return l=>{const u=ot(n,l,1,o)-1,h=r[u],f=s[u];return N(f,h)(l)}},vt=(n,t,e,o)=>(Math.min(n.length,t.length)>2?zn:Kn)(n,t,o?kn:e);class G extends K{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:U,tickCount:5}}map(t){return _(t)?this.output(t):this.options.unknown}invert(t){return _(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,e,o,...r]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,e,o,...r)}getTicks(){const{tickMethod:t}=this.options,[e,o,r,...s]=this.getTickMethodOptions();return t(e,o,r,...s)}getTickMethodOptions(){const{domain:t,tickCount:e}=this.options,o=t[0],r=t[t.length-1];return[o,r,e]}chooseNice(){return Ot}rescale(){this.nice();const[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e))}chooseClamp(t){const{clamp:e,range:o}=this.options,r=this.options.domain.map(t),s=Math.min(r.length,o.length);return e?Gt(r[0],r[s-1]):I}composeOutput(t,e){const{domain:o,range:r,round:s,interpolate:i}=this.options,a=vt(o.map(t),r,i,s);this.output=N(a,e,t)}composeInput(t,e,o){const{domain:r,range:s}=this.options,i=vt(s,r.map(t),U);this.input=N(e,o,i)}}class ut extends G{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:$,tickMethod:C,tickCount:5}}chooseTransforms(){return[I,I]}clone(){return new ut(this.options)}}class Ft extends ct{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:V,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new Ft(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const jn=n=>t=>t<0?-((-t)**n):t**n,Hn=n=>t=>t<0?-((-t)**(1/n)):t**(1/n),Yn=n=>n<0?-Math.sqrt(-n):Math.sqrt(n);class lt extends G{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:$,tickMethod:C,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(t===1)return[I,I];const e=t===.5?Yn:jn(t),o=Hn(t);return[e,o]}clone(){return new lt(this.options)}}class Pt extends lt{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:$,tickMethod:C,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new Pt(this.options)}}class J extends K{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!_(t))return this.options.unknown;const e=ot(this.thresholds,t,0,this.n);return this.options.range[e]}invert(t){const{range:e}=this.options,o=e.indexOf(t),r=this.thresholds;return[r[o-1],r[o]]}clone(){return new J(this.options)}rescale(){const{domain:t,range:e}=this.options;this.n=Math.min(t.length,e.length-1),this.thresholds=t}}const En=(n,t,e,o=10)=>{const r=n<0,s=rt(o,r),i=st(o,r),a=t<n,c=a?t:n,l=a?n:t;let u=i(c),h=i(l),f=[];if(!(o%1)&&h-u<e){if(u=Math.floor(u),h=Math.ceil(h),r)for(;u<=h;u+=1){const m=s(u);for(let d=o-1;d>=1;d-=1){const p=m*d;if(p>l)break;p>=c&&f.push(p)}}else for(;u<=h;u+=1){const m=s(u);for(let d=1;d<o;d+=1){const p=m*d;if(p>l)break;p>=c&&f.push(p)}}f.length*2<e&&(f=C(c,l,e))}else{const m=e===-1?h-u:Math.min(h-u,e);f=C(u,h,m).map(s)}return a?f.reverse():f};class Kt extends G{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:$,tickMethod:En,tickCount:5}}chooseNice(){return dn}getTickMethodOptions(){const{domain:t,tickCount:e,base:o}=this.options,r=t[0],s=t[t.length-1];return[r,s,e,o]}chooseTransforms(){const{base:t,domain:e}=this.options,o=e[0]<0;return[st(t,o),rt(t,o)]}clone(){return new Kt(this.options)}}class zt extends J{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:at}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[e,o,r]=this.getTickMethodOptions();this.options.domain=Ot(e,o,r)}}getTicks(){const{tickMethod:t}=this.options,[e,o,r]=this.getTickMethodOptions();return t(e,o,r)}getTickMethodOptions(){const{domain:t,tickCount:e}=this.options,o=t[0],r=t[t.length-1];return[o,r,e]}rescale(){this.nice();const{range:t,domain:e}=this.options,[o,r]=e;this.n=t.length-1,this.thresholds=new Array(this.n);for(let s=0;s<this.n;s+=1)this.thresholds[s]=((s+1)*r-(s-this.n)*o)/(this.n+1)}invert(t){const[e,o]=super.invert(t),[r,s]=this.options.domain;return e===void 0&&o===void 0?[e,o]:[e||r,o||s]}getThresholds(){return this.thresholds}clone(){return new zt(this.options)}}function Ln(n,t){const e=n.length;if(!e)return;if(e<2)return n[e-1];const o=(e-1)*t,r=Math.floor(o),s=n[r],i=n[r+1];return s+(i-s)*(o-r)}function qn(n,t,e=!1){const o=n;e||o.sort((s,i)=>s-i);const r=[];for(let s=1;s<t;s+=1)r.push(Ln(o,s/t));return r}class jt extends J{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:at}}constructor(t){super(t)}rescale(){const{domain:t,range:e}=this.options;this.n=e.length-1,this.thresholds=qn(t,this.n+1,!1)}invert(t){const[e,o]=super.invert(t),{domain:r}=this.options,s=r[0],i=r[r.length-1];return e===void 0&&o===void 0?[e,o]:[e||s,o||i]}getThresholds(){return this.thresholds}clone(){return new jt(this.options)}getTicks(){const{tickCount:t,domain:e,tickMethod:o}=this.options,r=e.length-1,s=e[0],i=e[r];return o(s,i,t)}}const _n=(n,t,e,o,r)=>{const s=n>t,i=s?t:n,a=s?n:t,[c,l]=bt(i,a,e,o,r),u=c.range(i,new Date(+a+1),l,!0);return s?u.reverse():u};function $n(n){const t=n.getTimezoneOffset(),e=new Date(n);return e.setMinutes(e.getMinutes()+t,e.getSeconds(),e.getMilliseconds()),e}class Ht extends G{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:_n,interpolate:U,mask:void 0,utc:!1}}chooseTransforms(){return[o=>+o,o=>new Date(o)]}chooseNice(){return fn}getTickMethodOptions(){const{domain:t,tickCount:e,tickInterval:o,utc:r}=this.options,s=t[0],i=t[t.length-1];return[s,i,e,o,r]}getFormatter(){const{mask:t,utc:e}=this.options,o=e?Rt:Nt,r=e?$n:I;return s=>$t(r(s),t||Tn(s,o))}clone(){return new Ht(this.options)}}var Vn=function(n,t,e,o){var r=arguments.length,s=r<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,e,o);else for(var a=n.length-1;a>=0;a--)(i=n[a])&&(s=(r<3?i(s):r>3?i(t,e,s):i(t,e))||s);return r>3&&s&&Object.defineProperty(t,e,s),s},et;function Gn(n){return[n(0),n(1)]}const Jn=n=>{const[t,e]=n;return N(U(0,1),q(t,e))};let wt=et=class extends ut{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:I,tickMethod:C,tickCount:5}}constructor(t){super(t)}clone(){return new et(this.options)}};wt=et=Vn([mn(Gn,Jn)],wt);export{ct as B,Wt as C,Bt as I,ut as L,it as O,Ft as P,jt as Q,Pt as S,Ht as T,Kt as a,lt as b,J as c,zt as d,wt as e,$ as f};
