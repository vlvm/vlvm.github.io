import{_ as U,a as B,b as G}from"./_tslib@2.6.3@tslib-Ck5hgXZz.js";import{S as _,A as F,n as b}from"./_@antv_g-lite@2.0.5@@antv-O0rSGUp-.js";import{g as J}from"./_@antv_util@3.3.7@@antv-rk1Gsl7O.js";function K(a,t){var e=t.cx,v=e===void 0?0:e,k=t.cy,h=k===void 0?0:k,r=t.r;a.arc(v,h,r,0,Math.PI*2,!1)}function V(a,t){var e=t.cx,v=e===void 0?0:e,k=t.cy,h=k===void 0?0:k,r=t.rx,f=t.ry;if(a.ellipse)a.ellipse(v,h,r,f,0,0,Math.PI*2,!1);else{var l=r>f?r:f,d=r>f?1:r/f,P=r>f?f/r:1;a.save(),a.scale(d,P),a.arc(v,h,l,0,Math.PI*2)}}function W(a,t){var e=t.x1,v=t.y1,k=t.x2,h=t.y2,r=t.markerStart,f=t.markerEnd,l=t.markerStartOffset,d=t.markerEndOffset,P=0,m=0,n=0,o=0,O=0,s,i;r&&b(r)&&l&&(s=k-e,i=h-v,O=Math.atan2(i,s),P=Math.cos(O)*(l||0),m=Math.sin(O)*(l||0)),f&&b(f)&&d&&(s=e-k,i=v-h,O=Math.atan2(i,s),n=Math.cos(O)*(d||0),o=Math.sin(O)*(d||0)),a.moveTo(e+P,v+m),a.lineTo(k+n,h+o)}function Y(a,t){var e=t.markerStart,v=t.markerEnd,k=t.markerStartOffset,h=t.markerEndOffset,r=t.d,f=r.absolutePath,l=r.segments,d=0,P=0,m=0,n=0,o=0,O,s;if(e&&b(e)&&k){var i=G(e.parentNode.getStartTangent(),2),u=i[0],T=i[1];O=u[0]-T[0],s=u[1]-T[1],o=Math.atan2(s,O),d=Math.cos(o)*(k||0),P=Math.sin(o)*(k||0)}if(v&&b(v)&&h){var I=G(v.parentNode.getEndTangent(),2),u=I[0],T=I[1];O=u[0]-T[0],s=u[1]-T[1],o=Math.atan2(s,O),m=Math.cos(o)*(h||0),n=Math.sin(o)*(h||0)}for(var E=0;E<f.length;E++){var M=f[E],z=M[0],$=f[E+1],D=E===0&&(d!==0||P!==0),C=(E===f.length-1||$&&($[0]==="M"||$[0]==="Z"))&&m!==0&&n!==0;switch(z){case"M":D?(a.moveTo(M[1]+d,M[2]+P),a.lineTo(M[1],M[2])):a.moveTo(M[1],M[2]);break;case"L":C?a.lineTo(M[1]+m,M[2]+n):a.lineTo(M[1],M[2]);break;case"Q":a.quadraticCurveTo(M[1],M[2],M[3],M[4]),C&&a.lineTo(M[3]+m,M[4]+n);break;case"C":a.bezierCurveTo(M[1],M[2],M[3],M[4],M[5],M[6]),C&&a.lineTo(M[5]+m,M[6]+n);break;case"A":{var L=l[E].arcParams,N=L.cx,R=L.cy,c=L.rx,A=L.ry,Z=L.startAngle,g=L.endAngle,H=L.xRotation,j=L.sweepFlag;if(a.ellipse)a.ellipse(N,R,c,A,H,Z,g,!!(1-j));else{var Q=c>A?c:A,q=c>A?1:c/A,w=c>A?A/c:1;a.translate(N,R),a.rotate(H),a.scale(q,w),a.arc(0,0,Q,Z,g,!!(1-j)),a.scale(1/q,1/w),a.rotate(-H),a.translate(-N,-R)}C&&a.lineTo(M[6]+m,M[7]+n);break}case"Z":a.closePath();break}}}function X(a,t){var e=t.markerStart,v=t.markerEnd,k=t.markerStartOffset,h=t.markerEndOffset,r=t.points.points,f=r.length,l=r[0][0],d=r[0][1],P=r[f-1][0],m=r[f-1][1],n=0,o=0,O=0,s=0,i=0,u,T;e&&b(e)&&k&&(u=r[1][0]-r[0][0],T=r[1][1]-r[0][1],i=Math.atan2(T,u),n=Math.cos(i)*(k||0),o=Math.sin(i)*(k||0)),v&&b(v)&&h&&(u=r[f-1][0]-r[0][0],T=r[f-1][1]-r[0][1],i=Math.atan2(T,u),O=Math.cos(i)*(h||0),s=Math.sin(i)*(h||0)),a.moveTo(l+(n||O),d+(o||s));for(var I=1;I<f-1;I++){var E=r[I];a.lineTo(E[0],E[1])}a.lineTo(P,m)}function y(a,t){var e=t.markerStart,v=t.markerEnd,k=t.markerStartOffset,h=t.markerEndOffset,r=t.points.points,f=r.length,l=r[0][0],d=r[0][1],P=r[f-1][0],m=r[f-1][1],n=0,o=0,O=0,s=0,i=0,u,T;e&&b(e)&&k&&(u=r[1][0]-r[0][0],T=r[1][1]-r[0][1],i=Math.atan2(T,u),n=Math.cos(i)*(k||0),o=Math.sin(i)*(k||0)),v&&b(v)&&h&&(u=r[f-2][0]-r[f-1][0],T=r[f-2][1]-r[f-1][1],i=Math.atan2(T,u),O=Math.cos(i)*(h||0),s=Math.sin(i)*(h||0)),a.moveTo(l+n,d+o);for(var I=1;I<f-1;I++){var E=r[I];a.lineTo(E[0],E[1])}a.lineTo(P+O,m+s)}function S(a,t){var e=t.x,v=e===void 0?0:e,k=t.y,h=k===void 0?0:k,r=t.radius,f=t.width,l=t.height,d=f,P=l,m=r&&r.some(function(E){return E!==0});if(!m)a.rect(v,h,d,P);else{var n=f>0?1:-1,o=l>0?1:-1,O=n+o===0,s=G(r.map(function(E){return J(E,0,Math.min(Math.abs(d)/2,Math.abs(P)/2))}),4),i=s[0],u=s[1],T=s[2],I=s[3];a.moveTo(n*i+v,h),a.lineTo(d-n*u+v,h),u!==0&&a.arc(d-n*u+v,o*u+h,u,-o*Math.PI/2,n>0?0:Math.PI,O),a.lineTo(d+v,P-o*T+h),T!==0&&a.arc(d-n*T+v,P-o*T+h,T,n>0?0:Math.PI,o>0?Math.PI/2:1.5*Math.PI,O),a.lineTo(n*I+v,P+h),I!==0&&a.arc(n*I+v,P-o*I+h,I,o>0?Math.PI/2:-Math.PI/2,n>0?Math.PI:0,O),a.lineTo(v,o*i+h),i!==0&&a.arc(n*i+v,o*i+h,i,n>0?Math.PI:0,o>0?Math.PI*1.5:Math.PI/2,O)}}var ra=function(a){U(t,a);function t(){var e=a.apply(this,B([],G(arguments),!1))||this;return e.name="canvas-path-generator",e}return t.prototype.init=function(){var e,v=(e={},e[_.CIRCLE]=K,e[_.ELLIPSE]=V,e[_.RECT]=S,e[_.LINE]=W,e[_.POLYLINE]=y,e[_.POLYGON]=X,e[_.PATH]=Y,e[_.TEXT]=void 0,e[_.GROUP]=void 0,e[_.IMAGE]=void 0,e[_.HTML]=void 0,e[_.MESH]=void 0,e);this.context.pathGeneratorFactory=v},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(F);export{ra as P};
