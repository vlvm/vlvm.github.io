import{_ as z,b as B,a as tt,g as sr,d as Y,f as qt,c as jt,h as ur}from"./_tslib@2.6.3@tslib-Ck5hgXZz.js";import{E as Mr}from"./_eventemitter3@5.0.1@eventemitter3-BzHtO6iw.js";import{e as at,D as me,y as K,E as lr,F as Fe,G as cr,o as yt,H as Ti,k as Ut,d as ne,u as Lt,I as V,J as Dt,K as _t,L as zr,M as Pi,N as wi,O as Kr,P as Ci,Q as Si,R as mt,S as Ni,s as ke,T as Ve,p as Te,q as Mi,r as We,A as Yt,n as xe,U as se,t as bi,V as ki,c as Ai,w as fr,W as De,v as Ri,X as It,Y as Ae,Z as Re,_ as ze,$ as Zr,a0 as qr,a1 as de,a2 as Oi,z as hr,a3 as Ke,a4 as Ii,a5 as Li,a6 as Di,g as ve,a7 as Jr,a8 as Bi,a9 as Gi,aa as Fi,ab as $r,ac as _i,j as Ui,ad as Yi,ae as Xi,af as Vi,ag as Hi,x as Wi,B as zi}from"./_gl-matrix@3.4.3@gl-matrix-Cx0TVU2o.js";import{l as Dn,p as Bn,a as Ki,b as Zi,c as qi,d as Ji}from"./_@antv_g-math@3.0.0@@antv-CUxi46E3.js";import{p as rt,e as Be,c as Bt,d as te,x as Qr,u as $,y as $i,z as Qi,A as jr,g as Pe,k as tn,n as en,B as ji,C as Gn,D as rn,E as ta,F as nn,G as ea,H as ra,I as na,b as ia,J as Gt}from"./_@antv_util@3.3.7@@antv-rk1Gsl7O.js";import{c as aa}from"./_d3-color@3.1.0@d3-color-BBHDXmAz.js";var oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fn={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(oa,function(){function t(E,v,g,m,N){n(E,v,g||0,m||E.length-1,N||a)}function n(E,v,g,m,N){for(;m>g;){if(m-g>600){var S=m-g+1,C=v-g+1,k=Math.log(S),I=.5*Math.exp(2*k/3),D=.5*Math.sqrt(k*I*(S-I)/S)*(C-S/2<0?-1:1),F=Math.max(g,Math.floor(v-C*I/S+D)),X=Math.min(m,Math.floor(v+(S-C)*I/S+D));n(E,v,F,X,N)}var R=E[v],_=g,U=m;for(i(E,g,v),N(E[m],R)>0&&i(E,g,m);_<U;){for(i(E,_,U),_++,U--;N(E[_],R)<0;)_++;for(;N(E[U],R)>0;)U--}N(E[g],R)===0?i(E,g,U):(U++,i(E,U,m)),U<=v&&(g=U+1),v<=U&&(m=U-1)}}function i(E,v,g){var m=E[v];E[v]=E[g],E[g]=m}function a(E,v){return E<v?-1:E>v?1:0}var o=function(v){v===void 0&&(v=9),this._maxEntries=Math.max(4,v),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(v){var g=this.data,m=[];if(!w(v,g))return m;for(var N=this.toBBox,S=[];g;){for(var C=0;C<g.children.length;C++){var k=g.children[C],I=g.leaf?N(k):k;w(v,I)&&(g.leaf?m.push(k):T(v,I)?this._all(k,m):S.push(k))}g=S.pop()}return m},o.prototype.collides=function(v){var g=this.data;if(!w(v,g))return!1;for(var m=[];g;){for(var N=0;N<g.children.length;N++){var S=g.children[N],C=g.leaf?this.toBBox(S):S;if(w(v,C)){if(g.leaf||T(v,C))return!0;m.push(S)}}g=m.pop()}return!1},o.prototype.load=function(v){if(!(v&&v.length))return this;if(v.length<this._minEntries){for(var g=0;g<v.length;g++)this.insert(v[g]);return this}var m=this._build(v.slice(),0,v.length-1,0);if(!this.data.children.length)this.data=m;else if(this.data.height===m.height)this._splitRoot(this.data,m);else{if(this.data.height<m.height){var N=this.data;this.data=m,m=N}this._insert(m,this.data.height-m.height-1,!0)}return this},o.prototype.insert=function(v){return v&&this._insert(v,this.data.height-1),this},o.prototype.clear=function(){return this.data=O([]),this},o.prototype.remove=function(v,g){if(!v)return this;for(var m=this.data,N=this.toBBox(v),S=[],C=[],k,I,D;m||S.length;){if(m||(m=S.pop(),I=S[S.length-1],k=C.pop(),D=!0),m.leaf){var F=s(v,m.children,g);if(F!==-1)return m.children.splice(F,1),S.push(m),this._condense(S),this}!D&&!m.leaf&&T(m,N)?(S.push(m),C.push(k),k=0,I=m,m=m.children[0]):I?(k++,m=I.children[k],D=!1):m=null}return this},o.prototype.toBBox=function(v){return v},o.prototype.compareMinX=function(v,g){return v.minX-g.minX},o.prototype.compareMinY=function(v,g){return v.minY-g.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(v){return this.data=v,this},o.prototype._all=function(v,g){for(var m=[];v;)v.leaf?g.push.apply(g,v.children):m.push.apply(m,v.children),v=m.pop();return g},o.prototype._build=function(v,g,m,N){var S=m-g+1,C=this._maxEntries,k;if(S<=C)return k=O(v.slice(g,m+1)),u(k,this.toBBox),k;N||(N=Math.ceil(Math.log(S)/Math.log(C)),C=Math.ceil(S/Math.pow(C,N-1))),k=O([]),k.leaf=!1,k.height=N;var I=Math.ceil(S/C),D=I*Math.ceil(Math.sqrt(C));L(v,g,m,D,this.compareMinX);for(var F=g;F<=m;F+=D){var X=Math.min(F+D-1,m);L(v,F,X,I,this.compareMinY);for(var R=F;R<=X;R+=I){var _=Math.min(R+I-1,X);k.children.push(this._build(v,R,_,N-1))}}return u(k,this.toBBox),k},o.prototype._chooseSubtree=function(v,g,m,N){for(;N.push(g),!(g.leaf||N.length-1===m);){for(var S=1/0,C=1/0,k=void 0,I=0;I<g.children.length;I++){var D=g.children[I],F=p(D),X=x(v,D)-F;X<C?(C=X,S=F<S?F:S,k=D):X===C&&F<S&&(S=F,k=D)}g=k||g.children[0]}return g},o.prototype._insert=function(v,g,m){var N=m?v:this.toBBox(v),S=[],C=this._chooseSubtree(N,this.data,g,S);for(C.children.push(v),c(C,N);g>=0&&S[g].children.length>this._maxEntries;)this._split(S,g),g--;this._adjustParentBBoxes(N,S,g)},o.prototype._split=function(v,g){var m=v[g],N=m.children.length,S=this._minEntries;this._chooseSplitAxis(m,S,N);var C=this._chooseSplitIndex(m,S,N),k=O(m.children.splice(C,m.children.length-C));k.height=m.height,k.leaf=m.leaf,u(m,this.toBBox),u(k,this.toBBox),g?v[g-1].children.push(k):this._splitRoot(m,k)},o.prototype._splitRoot=function(v,g){this.data=O([v,g]),this.data.height=v.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(v,g,m){for(var N,S=1/0,C=1/0,k=g;k<=m-g;k++){var I=l(v,0,k,this.toBBox),D=l(v,k,m,this.toBBox),F=y(I,D),X=p(I)+p(D);F<S?(S=F,N=k,C=X<C?X:C):F===S&&X<C&&(C=X,N=k)}return N||m-g},o.prototype._chooseSplitAxis=function(v,g,m){var N=v.leaf?this.compareMinX:f,S=v.leaf?this.compareMinY:h,C=this._allDistMargin(v,g,m,N),k=this._allDistMargin(v,g,m,S);C<k&&v.children.sort(N)},o.prototype._allDistMargin=function(v,g,m,N){v.children.sort(N);for(var S=this.toBBox,C=l(v,0,g,S),k=l(v,m-g,m,S),I=d(C)+d(k),D=g;D<m-g;D++){var F=v.children[D];c(C,v.leaf?S(F):F),I+=d(C)}for(var X=m-g-1;X>=g;X--){var R=v.children[X];c(k,v.leaf?S(R):R),I+=d(k)}return I},o.prototype._adjustParentBBoxes=function(v,g,m){for(var N=m;N>=0;N--)c(g[N],v)},o.prototype._condense=function(v){for(var g=v.length-1,m=void 0;g>=0;g--)v[g].children.length===0?g>0?(m=v[g-1].children,m.splice(m.indexOf(v[g]),1)):this.clear():u(v[g],this.toBBox)};function s(E,v,g){if(!g)return v.indexOf(E);for(var m=0;m<v.length;m++)if(g(E,v[m]))return m;return-1}function u(E,v){l(E,0,E.children.length,v,E)}function l(E,v,g,m,N){N||(N=O(null)),N.minX=1/0,N.minY=1/0,N.maxX=-1/0,N.maxY=-1/0;for(var S=v;S<g;S++){var C=E.children[S];c(N,E.leaf?m(C):C)}return N}function c(E,v){return E.minX=Math.min(E.minX,v.minX),E.minY=Math.min(E.minY,v.minY),E.maxX=Math.max(E.maxX,v.maxX),E.maxY=Math.max(E.maxY,v.maxY),E}function f(E,v){return E.minX-v.minX}function h(E,v){return E.minY-v.minY}function p(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function d(E){return E.maxX-E.minX+(E.maxY-E.minY)}function x(E,v){return(Math.max(v.maxX,E.maxX)-Math.min(v.minX,E.minX))*(Math.max(v.maxY,E.maxY)-Math.min(v.minY,E.minY))}function y(E,v){var g=Math.max(E.minX,v.minX),m=Math.max(E.minY,v.minY),N=Math.min(E.maxX,v.maxX),S=Math.min(E.maxY,v.maxY);return Math.max(0,N-g)*Math.max(0,S-m)}function T(E,v){return E.minX<=v.minX&&E.minY<=v.minY&&v.maxX<=E.maxX&&v.maxY<=E.maxY}function w(E,v){return v.minX<=E.maxX&&v.minY<=E.maxY&&v.maxX>=E.minX&&v.maxY>=E.minY}function O(E){return{children:E,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function L(E,v,g,m,N){for(var S=[v,g];S.length;)if(g=S.pop(),v=S.pop(),!(g-v<=m)){var C=v+Math.ceil((g-v)/m/2)*m;t(E,C,v,g,N),S.push(v,C,C,g)}}return o})})(Fn);var sa=Fn.exports,A;(function(r){r.GROUP="g",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh"})(A||(A={}));var ue;(function(r){r[r.ZERO=0]="ZERO",r[r.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(ue||(ue={}));var Mu=function(){function r(){this.plugins=[]}return r.prototype.addRenderingPlugin=function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)},r.prototype.removeAllRenderingPlugins=function(){var e=this;this.plugins.forEach(function(t){var n=e.context.renderingPlugins.indexOf(t);n>=0&&e.context.renderingPlugins.splice(n,1)})},r}(),bu=function(){function r(e){this.clipSpaceNearZ=ue.NEGATIVE_ONE,this.plugins=[],this.config=Y({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},e)}return r.prototype.registerPlugin=function(e){var t=this.plugins.findIndex(function(n){return n===e});t===-1&&this.plugins.push(e)},r.prototype.unregisterPlugin=function(e){var t=this.plugins.findIndex(function(n){return n===e});t>-1&&this.plugins.splice(t,1)},r.prototype.getPlugins=function(){return this.plugins},r.prototype.getPlugin=function(e){return this.plugins.find(function(t){return t.name===e})},r.prototype.getConfig=function(){return this.config},r.prototype.setConfig=function(e){Object.assign(this.config,e)},r}();function ee(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function Ze(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function Ge(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function an(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function ua(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function la(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function qe(r){return r===void 0?0:r>360||r<-360?r%360:r}function xt(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=0),Array.isArray(r)&&r.length===3?Ri(r):te(r)?V(r,e,t):V(r[0],r[1]||e,r[2]||t)}function q(r){return r*(Math.PI/180)}function Ct(r){return r*(180/Math.PI)}function ca(r){return 360*r}function fa(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t*t,s=n*n,u=i*i,l=a*a,c=o+s+u+l,f=t*a-n*i;return f>.499995*c?(r[0]=Math.PI/2,r[1]=2*Math.atan2(n,t),r[2]=0):f<-.499995*c?(r[0]=-Math.PI/2,r[1]=2*Math.atan2(n,t),r[2]=0):(r[0]=Math.asin(2*(t*i-a*n)),r[1]=Math.atan2(2*(t*a+n*i),1-2*(u+l)),r[2]=Math.atan2(2*(t*n+i*a),1-2*(s+u))),r}function ha(r,e){var t,n,i=Math.PI*.5,a=B(Fe(K(),e),3),o=a[0],s=a[1],u=a[2],l=Math.asin(-e[2]/o);return l<i?l>-i?(t=Math.atan2(e[6]/s,e[10]/u),n=Math.atan2(e[1]/o,e[0]/o)):(n=0,t=-Math.atan2(e[4]/s,e[5]/s)):(n=0,t=Math.atan2(e[4]/s,e[5]/s)),r[0]=t,r[1]=l,r[2]=n,r}function Je(r,e){return e.length===16?ha(r,e):fa(r,e)}function pa(r,e,t,n,i){var a=Math.cos(r),o=Math.sin(r);return Ti(n*a,i*o,0,-n*o,i*a,0,e,t,1)}function da(r,e,t,n,i,a,o,s){s===void 0&&(s=!1);var u=2*a/(t-e),l=2*a/(n-i),c=(t+e)/(t-e),f=(n+i)/(n-i),h,p;return s?(h=-o/(o-a),p=-o*a/(o-a)):(h=-(o+a)/(o-a),p=-2*o*a/(o-a)),r[0]=u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=c,r[9]=f,r[10]=h,r[11]=-1,r[12]=0,r[13]=0,r[14]=p,r[15]=0,r}function on(r){var e=r[0],t=r[1],n=r[3],i=r[4],a=Math.sqrt(e*e+t*t),o=Math.sqrt(n*n+i*i),s=e*i-t*n;s<0&&(e<i?a=-a:o=-o),a&&(e*=1/a,t*=1/a),o&&(n*=1/o,i*=1/o);var u=Math.atan2(t,e),l=Ct(u);return[r[6],r[7],a,o,l]}var kt=at(),Mt=at(),ge=me(),G=[K(),K(),K()],sn=K();function va(r,e,t,n,i,a){if(!ga(kt,r)||(hr(Mt,kt),Mt[3]=0,Mt[7]=0,Mt[11]=0,Mt[15]=1,Math.abs(Yi(Mt))<1e-8))return!1;var o=kt[3],s=kt[7],u=kt[11],l=kt[12],c=kt[13],f=kt[14],h=kt[15];if(o!==0||s!==0||u!==0){ge[0]=o,ge[1]=s,ge[2]=u,ge[3]=h;var p=Ut(Mt,Mt);if(!p)return!1;Xi(Mt,Mt),xe(i,ge,Mt)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=c,e[2]=f,ya(G,kt),t[0]=_t(G[0]),se(G[0],G[0]),n[0]=Dt(G[0],G[1]),$e(G[1],G[1],G[0],1,-n[0]),t[1]=_t(G[1]),se(G[1],G[1]),n[0]/=t[1],n[1]=Dt(G[0],G[2]),$e(G[2],G[2],G[0],1,-n[1]),n[2]=Dt(G[1],G[2]),$e(G[2],G[2],G[1],1,-n[2]),t[2]=_t(G[2]),se(G[2],G[2]),n[1]/=t[2],n[2]/=t[2],Vi(sn,G[1],G[2]),Dt(G[0],sn)<0)for(var d=0;d<3;d++)t[d]*=-1,G[d][0]*=-1,G[d][1]*=-1,G[d][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+G[0][0]-G[1][1]-G[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-G[0][0]+G[1][1]-G[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-G[0][0]-G[1][1]+G[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+G[0][0]+G[1][1]+G[2][2],0)),G[2][1]>G[1][2]&&(a[0]=-a[0]),G[0][2]>G[2][0]&&(a[1]=-a[1]),G[1][0]>G[0][1]&&(a[2]=-a[2]),!0}function ga(r,e){var t=e[15];if(t===0)return!1;for(var n=1/t,i=0;i<16;i++)r[i]=e[i]*n;return!0}function ya(r,e){r[0][0]=e[0],r[0][1]=e[1],r[0][2]=e[2],r[1][0]=e[4],r[1][1]=e[5],r[1][2]=e[6],r[2][0]=e[8],r[2][1]=e[9],r[2][2]=e[10]}function $e(r,e,t,n,i){r[0]=e[0]*n+t[0]*i,r[1]=e[1]*n+t[1]*i,r[2]=e[2]*n+t[2]*i}var ct=function(){function r(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return r.isEmpty=function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0},r.prototype.update=function(e,t){ee(this.center,e),ee(this.halfExtents,t),Ze(this.min,this.center,this.halfExtents),Ge(this.max,this.center,this.halfExtents)},r.prototype.setMinMax=function(e,t){Ge(this.center,t,e),an(this.center,this.center,.5),Ze(this.halfExtents,t,e),an(this.halfExtents,this.halfExtents,.5),ee(this.min,e),ee(this.max,t)},r.prototype.getMin=function(){return this.min},r.prototype.getMax=function(){return this.max},r.prototype.add=function(e){if(!r.isEmpty(e)){if(r.isEmpty(this)){this.setMinMax(e.getMin(),e.getMax());return}var t=this.center,n=t[0],i=t[1],a=t[2],o=this.halfExtents,s=o[0],u=o[1],l=o[2],c=n-s,f=n+s,h=i-u,p=i+u,d=a-l,x=a+l,y=e.center,T=y[0],w=y[1],O=y[2],L=e.halfExtents,E=L[0],v=L[1],g=L[2],m=T-E,N=T+E,S=w-v,C=w+v,k=O-g,I=O+g;m<c&&(c=m),N>f&&(f=N),S<h&&(h=S),C>p&&(p=C),k<d&&(d=k),I>x&&(x=I),t[0]=(c+f)*.5,t[1]=(h+p)*.5,t[2]=(d+x)*.5,o[0]=(f-c)*.5,o[1]=(p-h)*.5,o[2]=(x-d)*.5,this.min[0]=c,this.min[1]=h,this.min[2]=d,this.max[0]=f,this.max[1]=p,this.max[2]=x}},r.prototype.setFromTransformedAABB=function(e,t){var n=this.center,i=this.halfExtents,a=e.center,o=e.halfExtents,s=t[0],u=t[4],l=t[8],c=t[1],f=t[5],h=t[9],p=t[2],d=t[6],x=t[10],y=Math.abs(s),T=Math.abs(u),w=Math.abs(l),O=Math.abs(c),L=Math.abs(f),E=Math.abs(h),v=Math.abs(p),g=Math.abs(d),m=Math.abs(x);n[0]=t[12]+s*a[0]+u*a[1]+l*a[2],n[1]=t[13]+c*a[0]+f*a[1]+h*a[2],n[2]=t[14]+p*a[0]+d*a[1]+x*a[2],i[0]=y*o[0]+T*o[1]+w*o[2],i[1]=O*o[0]+L*o[1]+E*o[2],i[2]=v*o[0]+g*o[1]+m*o[2],Ze(this.min,n,i),Ge(this.max,n,i)},r.prototype.intersects=function(e){var t=this.getMax(),n=this.getMin(),i=e.getMax(),a=e.getMin();return n[0]<=i[0]&&t[0]>=a[0]&&n[1]<=i[1]&&t[1]>=a[1]&&n[2]<=i[2]&&t[2]>=a[2]},r.prototype.intersection=function(e){if(!this.intersects(e))return null;var t=new r,n=ua([0,0,0],this.getMin(),e.getMin()),i=la([0,0,0],this.getMax(),e.getMax());return t.setMinMax(n,i),t},r.prototype.getNegativeFarPoint=function(e){return e.pnVertexFlag===273?ee([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},r.prototype.getPositiveFarPoint=function(e){return e.pnVertexFlag===273?ee([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},r}(),ma=function(){function r(e,t){this.distance=e||0,this.normal=t||V(0,1,0),this.updatePNVertexFlag()}return r.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},r.prototype.distanceToPoint=function(e){return Dt(e,this.normal)-this.distance},r.prototype.normalize=function(){var e=1/Hi(this.normal);Wi(this.normal,this.normal,e),this.distance*=e},r.prototype.intersectsLine=function(e,t,n){var i=this.distanceToPoint(e),a=this.distanceToPoint(t),o=i/(i-a),s=o>=0&&o<=1;return s&&n&&zi(n,e,t,o),s},r}(),Ft;(function(r){r[r.OUTSIDE=4294967295]="OUTSIDE",r[r.INSIDE=0]="INSIDE",r[r.INDETERMINATE=2147483647]="INDETERMINATE"})(Ft||(Ft={}));var xa=function(){function r(e){if(this.planes=[],e)this.planes=e;else for(var t=0;t<6;t++)this.planes.push(new ma)}return r.prototype.extractFromVPMatrix=function(e){var t=B(e,16),n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],x=t[12],y=t[13],T=t[14],w=t[15];It(this.planes[0].normal,o-n,c-s,d-f),this.planes[0].distance=w-x,It(this.planes[1].normal,o+n,c+s,d+f),this.planes[1].distance=w+x,It(this.planes[2].normal,o+i,c+u,d+h),this.planes[2].distance=w+y,It(this.planes[3].normal,o-i,c-u,d-h),this.planes[3].distance=w-y,It(this.planes[4].normal,o-a,c-l,d-p),this.planes[4].distance=w-T,It(this.planes[5].normal,o+a,c+l,d+p),this.planes[5].distance=w+T,this.planes.forEach(function(O){O.normalize(),O.updatePNVertexFlag()})},r}(),ft=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y},r}(),Jt=function(){function r(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this.left=e,this.right=e+n,this.top=t,this.bottom=t+i}return r.prototype.toJSON=function(){},r}(),j="Method not implemented.",re="Use document.documentElement instead.",Ea="Cannot append a destroyed element.",Q;(function(r){r[r.ORBITING=0]="ORBITING",r[r.EXPLORING=1]="EXPLORING",r[r.TRACKING=2]="TRACKING"})(Q||(Q={}));var we;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.ROTATIONAL=1]="ROTATIONAL",r[r.TRANSLATIONAL=2]="TRANSLATIONAL",r[r.CINEMATIC=3]="CINEMATIC"})(we||(we={}));var vt;(function(r){r[r.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",r[r.PERSPECTIVE=1]="PERSPECTIVE"})(vt||(vt={}));var _n={UPDATED:"updated"},un=2e-4,Ta=function(){function r(){this.clipSpaceNearZ=ue.NEGATIVE_ONE,this.eventEmitter=new Mr,this.matrix=at(),this.right=V(1,0,0),this.up=V(0,1,0),this.forward=V(0,0,1),this.position=V(0,0,1),this.focalPoint=V(0,0,0),this.distanceVector=V(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=at(),this.projectionMatrixInverse=at(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Q.EXPLORING,this.trackingMode=we.DEFAULT,this.projectionMode=vt.PERSPECTIVE,this.frustum=new xa,this.orthoMatrix=at()}return r.prototype.isOrtho=function(){return this.projectionMode===vt.ORTHOGRAPHIC},r.prototype.getProjectionMode=function(){return this.projectionMode},r.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},r.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},r.prototype.getFrustum=function(){return this.frustum},r.prototype.getPosition=function(){return this.position},r.prototype.getFocalPoint=function(){return this.focalPoint},r.prototype.getDollyingStep=function(){return this.dollyingStep},r.prototype.getNear=function(){return this.near},r.prototype.getFar=function(){return this.far},r.prototype.getZoom=function(){return this.zoom},r.prototype.getOrthoMatrix=function(){return this.orthoMatrix},r.prototype.getView=function(){return this.view},r.prototype.setEnableUpdate=function(e){this.enableUpdate=e},r.prototype.setType=function(e,t){return this.type=e,this.type===Q.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Q.TRACKING&&t!==void 0&&this.setTrackingMode(t),this},r.prototype.setProjectionMode=function(e){return this.projectionMode=e,this},r.prototype.setTrackingMode=function(e){if(this.type!==Q.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this},r.prototype.setWorldRotation=function(e){return this.rotateWorld=e,this._getAngles(),this},r.prototype.getViewTransform=function(){return Ut(at(),this.matrix)},r.prototype.getWorldTransform=function(){return this.matrix},r.prototype.jitterProjectionMatrix=function(e,t){var n=ne(at(),[e,t,0]);this.jitteredProjectionMatrix=Lt(at(),n,this.projectionMatrix)},r.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},r.prototype.setMatrix=function(e){return this.matrix=e,this._update(),this},r.prototype.setProjectionMatrix=function(e){this.projectionMatrix=e},r.prototype.setFov=function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this},r.prototype.setAspect=function(e){return this.setPerspective(this.near,this.far,this.fov,e),this},r.prototype.setNear=function(e){return this.projectionMode===vt.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this},r.prototype.setFar=function(e){return this.projectionMode===vt.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this},r.prototype.setViewOffset=function(e,t,n,i,a,o){return this.aspect=e/t,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.projectionMode===vt.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},r.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===vt.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},r.prototype.setZoom=function(e){return this.zoom=e,this.projectionMode===vt.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===vt.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},r.prototype.setZoomByViewportPoint=function(e,t){var n=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),i=n.x,a=n.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(i,a),this.setFocalPoint(i,a),this.setZoom(e),this.rotate(0,0,o);var s=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),u=s.x,l=s.y,c=V(u-i,l-a,0),f=Dt(c,this.right)/_t(this.right),h=Dt(c,this.up)/_t(this.up);return this.pan(-f,-h),this},r.prototype.setPerspective=function(e,t,n,i){var a;this.projectionMode=vt.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=i;var o=this.near*Math.tan(q(.5*this.fov))/this.zoom,s=2*o,u=this.aspect*s,l=-.5*u;if(!((a=this.view)===null||a===void 0)&&a.enabled){var c=this.view.fullWidth,f=this.view.fullHeight;l+=this.view.offsetX*u/c,o-=this.view.offsetY*s/f,u*=this.view.width/c,s*=this.view.height/f}return da(this.projectionMatrix,l,l+u,o,o-s,e,this.far,this.clipSpaceNearZ===ue.ZERO),zr(this.projectionMatrix,this.projectionMatrix,V(1,-1,1)),Ut(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},r.prototype.setOrthographic=function(e,t,n,i,a,o){var s;this.projectionMode=vt.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=i,this.near=a,this.far=o;var u=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,h=c-u,p=c+u,d=f+l,x=f-l;if(!((s=this.view)===null||s===void 0)&&s.enabled){var y=(this.rright-this.left)/this.view.fullWidth/this.zoom,T=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=y*this.view.offsetX,p=h+y*this.view.width,d-=T*this.view.offsetY,x=d-T*this.view.height}return this.clipSpaceNearZ===ue.NEGATIVE_ONE?Pi(this.projectionMatrix,h,p,x,d,a,o):wi(this.projectionMatrix,h,p,x,d,a,o),zr(this.projectionMatrix,this.projectionMatrix,V(1,-1,1)),Ut(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},r.prototype.setPosition=function(e,t,n){t===void 0&&(t=this.position[1]),n===void 0&&(n=this.position[2]);var i=xt(e,t,n);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},r.prototype.setFocalPoint=function(e,t,n){t===void 0&&(t=this.focalPoint[1]),n===void 0&&(n=this.focalPoint[2]);var i=V(0,1,0);if(this.focalPoint=xt(e,t,n),this.trackingMode===we.CINEMATIC){var a=Kr(K(),this.focalPoint,this.position);e=a[0],t=a[1],n=a[2];var o=_t(a),s=Ct(Math.asin(t/o)),u=90+Ct(Math.atan2(n,e)),l=at();Ci(l,l,q(u)),Si(l,l,q(s)),i=mt(K(),[0,1,0],l)}return Ut(this.matrix,Ni(at(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},r.prototype.getDistance=function(){return this.distance},r.prototype.getDistanceVector=function(){return this.distanceVector},r.prototype.setDistance=function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<un&&(this.distance=un),this.dollyingStep=this.distance/100;var t=K();e=this.distance;var n=this.forward,i=this.focalPoint;return t[0]=e*n[0]+i[0],t[1]=e*n[1]+i[1],t[2]=e*n[2]+i[2],this._setPosition(t),this.triggerUpdate(),this},r.prototype.setMaxDistance=function(e){return this.maxDistance=e,this},r.prototype.setMinDistance=function(e){return this.minDistance=e,this},r.prototype.setAzimuth=function(e){return this.azimuth=qe(e),this.computeMatrix(),this._getAxes(),this.type===Q.ORBITING||this.type===Q.EXPLORING?this._getPosition():this.type===Q.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getAzimuth=function(){return this.azimuth},r.prototype.setElevation=function(e){return this.elevation=qe(e),this.computeMatrix(),this._getAxes(),this.type===Q.ORBITING||this.type===Q.EXPLORING?this._getPosition():this.type===Q.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getElevation=function(){return this.elevation},r.prototype.setRoll=function(e){return this.roll=qe(e),this.computeMatrix(),this._getAxes(),this.type===Q.ORBITING||this.type===Q.EXPLORING?this._getPosition():this.type===Q.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getRoll=function(){return this.roll},r.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},r.prototype.computeMatrix=function(){var e=ke(yt(),[0,0,1],q(this.roll));Ve(this.matrix);var t=ke(yt(),[1,0,0],q((this.rotateWorld&&this.type!==Q.TRACKING||this.type===Q.TRACKING?1:-1)*this.elevation)),n=ke(yt(),[0,1,0],q((this.rotateWorld&&this.type!==Q.TRACKING||this.type===Q.TRACKING?1:-1)*this.azimuth)),i=Te(yt(),n,t);i=Te(yt(),i,e);var a=Mi(at(),i);this.type===Q.ORBITING||this.type===Q.EXPLORING?(We(this.matrix,this.matrix,this.focalPoint),Lt(this.matrix,this.matrix,a),We(this.matrix,this.matrix,[0,0,this.distance])):this.type===Q.TRACKING&&(We(this.matrix,this.matrix,this.position),Lt(this.matrix,this.matrix,a))},r.prototype._setPosition=function(e,t,n){this.position=xt(e,t,n);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},r.prototype._getAxes=function(){Yt(this.right,xt(xe(me(),[1,0,0,0],this.matrix))),Yt(this.up,xt(xe(me(),[0,1,0,0],this.matrix))),Yt(this.forward,xt(xe(me(),[0,0,1,0],this.matrix))),se(this.right,this.right),se(this.up,this.up),se(this.forward,this.forward)},r.prototype._getAngles=function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],i=_t(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===Q.TRACKING?(this.elevation=Ct(Math.asin(t/i)),this.azimuth=Ct(Math.atan2(-e,-n))):this.rotateWorld?(this.elevation=Ct(Math.asin(t/i)),this.azimuth=Ct(Math.atan2(-e,-n))):(this.elevation=-Ct(Math.asin(t/i)),this.azimuth=-Ct(Math.atan2(-e,-n)))},r.prototype._getPosition=function(){Yt(this.position,xt(xe(me(),[0,0,0,1],this.matrix))),this._getDistance()},r.prototype._getFocalPoint=function(){bi(this.distanceVector,[0,0,-this.distance],ki(Ai(),this.matrix)),fr(this.focalPoint,this.position,this.distanceVector),this._getDistance()},r.prototype._getDistance=function(){this.distanceVector=Kr(K(),this.focalPoint,this.position),this.distance=_t(this.distanceVector),this.dollyingStep=this.distance/100},r.prototype._getOrthoMatrix=function(){if(this.projectionMode===vt.ORTHOGRAPHIC){var e=this.position,t=ke(yt(),[0,0,1],-this.roll*Math.PI/180);De(this.orthoMatrix,t,V((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),V(this.zoom,this.zoom,1),e)}},r.prototype.triggerUpdate=function(){if(this.enableUpdate){var e=this.getViewTransform(),t=Lt(at(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(_n.UPDATED)}},r.prototype.rotate=function(e,t,n){throw new Error(j)},r.prototype.pan=function(e,t){throw new Error(j)},r.prototype.dolly=function(e){throw new Error(j)},r.prototype.createLandmark=function(e,t){throw new Error(j)},r.prototype.gotoLandmark=function(e,t){throw new Error(j)},r.prototype.cancelLandmarkAnimation=function(){throw new Error(j)},r}();function lt(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e?e.apply(this,n):n[0],o=t.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return t.cache=o.set(a,s)||o,s};return t.cache=new(lt.Cache||Map),t}lt.Cache=Map;var M;(function(r){r[r.kUnknown=0]="kUnknown",r[r.kNumber=1]="kNumber",r[r.kPercentage=2]="kPercentage",r[r.kEms=3]="kEms",r[r.kPixels=4]="kPixels",r[r.kRems=5]="kRems",r[r.kDegrees=6]="kDegrees",r[r.kRadians=7]="kRadians",r[r.kGradians=8]="kGradians",r[r.kTurns=9]="kTurns",r[r.kMilliseconds=10]="kMilliseconds",r[r.kSeconds=11]="kSeconds",r[r.kInteger=12]="kInteger"})(M||(M={}));var Pt;(function(r){r[r.kUNumber=0]="kUNumber",r[r.kUPercent=1]="kUPercent",r[r.kULength=2]="kULength",r[r.kUAngle=3]="kUAngle",r[r.kUTime=4]="kUTime",r[r.kUOther=5]="kUOther"})(Pt||(Pt={}));var ln;(function(r){r[r.kAll=0]="kAll",r[r.kNonNegative=1]="kNonNegative",r[r.kInteger=2]="kInteger",r[r.kNonNegativeInteger=3]="kNonNegativeInteger",r[r.kPositiveInteger=4]="kPositiveInteger"})(ln||(ln={}));var pr;(function(r){r[r.kYes=0]="kYes",r[r.kNo=1]="kNo"})(pr||(pr={}));var dr;(function(r){r[r.kYes=0]="kYes",r[r.kNo=1]="kNo"})(dr||(dr={}));var Pa=[{name:"em",unit_type:M.kEms},{name:"px",unit_type:M.kPixels},{name:"deg",unit_type:M.kDegrees},{name:"rad",unit_type:M.kRadians},{name:"grad",unit_type:M.kGradians},{name:"ms",unit_type:M.kMilliseconds},{name:"s",unit_type:M.kSeconds},{name:"rem",unit_type:M.kRems},{name:"turn",unit_type:M.kTurns}],Xt;(function(r){r[r.kUnknownType=0]="kUnknownType",r[r.kUnparsedType=1]="kUnparsedType",r[r.kKeywordType=2]="kKeywordType",r[r.kUnitType=3]="kUnitType",r[r.kSumType=4]="kSumType",r[r.kProductType=5]="kProductType",r[r.kNegateType=6]="kNegateType",r[r.kInvertType=7]="kInvertType",r[r.kMinType=8]="kMinType",r[r.kMaxType=9]="kMaxType",r[r.kClampType=10]="kClampType",r[r.kTransformType=11]="kTransformType",r[r.kPositionType=12]="kPositionType",r[r.kURLImageType=13]="kURLImageType",r[r.kColorType=14]="kColorType",r[r.kUnsupportedColorType=15]="kUnsupportedColorType"})(Xt||(Xt={}));var wa=function(r){return Pa.find(function(e){return e.name===r}).unit_type},Ca=function(r){return r?r==="number"?M.kNumber:r==="percent"||r==="%"?M.kPercentage:wa(r):M.kUnknown},Sa=function(r){switch(r){case M.kNumber:case M.kInteger:return Pt.kUNumber;case M.kPercentage:return Pt.kUPercent;case M.kPixels:return Pt.kULength;case M.kMilliseconds:case M.kSeconds:return Pt.kUTime;case M.kDegrees:case M.kRadians:case M.kGradians:case M.kTurns:return Pt.kUAngle;default:return Pt.kUOther}},Na=function(r){switch(r){case Pt.kUNumber:return M.kNumber;case Pt.kULength:return M.kPixels;case Pt.kUPercent:return M.kPercentage;case Pt.kUTime:return M.kSeconds;case Pt.kUAngle:return M.kDegrees;default:return M.kUnknown}},cn=function(r){var e=1;switch(r){case M.kPixels:case M.kDegrees:case M.kSeconds:break;case M.kMilliseconds:e=.001;break;case M.kRadians:e=180/Math.PI;break;case M.kGradians:e=.9;break;case M.kTurns:e=360;break}return e},vr=function(r){switch(r){case M.kNumber:case M.kInteger:return"";case M.kPercentage:return"%";case M.kEms:return"em";case M.kRems:return"rem";case M.kPixels:return"px";case M.kDegrees:return"deg";case M.kRadians:return"rad";case M.kGradians:return"grad";case M.kMilliseconds:return"ms";case M.kSeconds:return"s";case M.kTurns:return"turn"}return""},He=function(){function r(){}return r.isAngle=function(e){return e===M.kDegrees||e===M.kRadians||e===M.kGradians||e===M.kTurns},r.isLength=function(e){return e>=M.kEms&&e<M.kDegrees},r.isRelativeUnit=function(e){return e===M.kPercentage||e===M.kEms||e===M.kRems},r.isTime=function(e){return e===M.kSeconds||e===M.kMilliseconds},r.prototype.toString=function(){return this.buildCSSText(pr.kNo,dr.kNo,"")},r.prototype.isNumericValue=function(){return this.getType()>=Xt.kUnitType&&this.getType()<=Xt.kClampType},r}(),Ma=function(r){z(e,r);function e(t){var n=r.call(this)||this;return n.colorSpace=t,n}return e.prototype.getType=function(){return Xt.kColorType},e.prototype.to=function(t){return this},e}(He),ae;(function(r){r[r.Constant=0]="Constant",r[r.LinearGradient=1]="LinearGradient",r[r.RadialGradient=2]="RadialGradient"})(ae||(ae={}));var Oe=function(r){z(e,r);function e(t,n){var i=r.call(this)||this;return i.type=t,i.value=n,i}return e.prototype.clone=function(){return new e(this.type,this.value)},e.prototype.buildCSSText=function(t,n,i){return i},e.prototype.getType=function(){return Xt.kColorType},e}(He),Et=function(r){z(e,r);function e(t){var n=r.call(this)||this;return n.value=t,n}return e.prototype.clone=function(){return new e(this.value)},e.prototype.getType=function(){return Xt.kKeywordType},e.prototype.buildCSSText=function(t,n,i){return i+this.value},e}(He),ba=lt(function(r){return r===void 0&&(r=""),r.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}),fn=function(r){return r.split("").map(function(e,t){return e.toUpperCase()===e?"".concat(t!==0?"-":"").concat(e.toLowerCase()):e}).join("")};function ka(r){if(!r)throw new Error}function oe(r){return typeof r=="function"}function Aa(r){return typeof r=="symbol"}var Ra={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},gr=lt(function(r){var e=ba(r),t=Ra[e];return e=(t==null?void 0:t.alias)||e,e}),Oa=function(r,e){e===void 0&&(e="");var t="";return Number.isFinite(r)?(ka(Number.isNaN(r)),t="NaN"):r>0?t="infinity":t="-infinity",t+=e},yr=function(r){return Na(Sa(r))},H=function(r){z(e,r);function e(t,n){n===void 0&&(n=M.kNumber);var i=r.call(this)||this,a;return typeof n=="string"?a=Ca(n):a=n,i.unit=a,i.value=t,i}return e.prototype.clone=function(){return new e(this.value,this.unit)},e.prototype.equals=function(t){var n=t;return this.value===n.value&&this.unit===n.unit},e.prototype.getType=function(){return Xt.kUnitType},e.prototype.convertTo=function(t){if(this.unit===t)return new e(this.value,this.unit);var n=yr(this.unit);if(n!==yr(t)||n===M.kUnknown)return null;var i=cn(this.unit)/cn(t);return new e(this.value*i,t)},e.prototype.buildCSSText=function(t,n,i){var a;switch(this.unit){case M.kUnknown:break;case M.kInteger:a=Number(this.value).toFixed(0);break;case M.kNumber:case M.kPercentage:case M.kEms:case M.kRems:case M.kPixels:case M.kDegrees:case M.kRadians:case M.kGradians:case M.kMilliseconds:case M.kSeconds:case M.kTurns:{var o=-999999,s=999999,u=this.value,l=vr(this.unit);if(u<o||u>s){var c=vr(this.unit);!Number.isFinite(u)||Number.isNaN(u)?a=Oa(u,c):a=u+(c||"")}else a="".concat(u).concat(l)}}return i+=a,i},e}(He),nt=new H(0,"px");new H(1,"px");var St=new H(0,"deg"),br=function(r){z(e,r);function e(t,n,i,a,o){a===void 0&&(a=1),o===void 0&&(o=!1);var s=r.call(this,"rgb")||this;return s.r=t,s.g=n,s.b=i,s.alpha=a,s.isNone=o,s}return e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.alpha)},e.prototype.buildCSSText=function(t,n,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},e}(Ma),Z=new Et("unset"),Ia=new Et("initial"),La=new Et("inherit"),Qe={"":Z,unset:Z,initial:Ia,inherit:La},mr=function(r){return Qe[r]||(Qe[r]=new Et(r)),Qe[r]},_e=new br(0,0,0,0,!0),Un=new br(0,0,0,0),Da=lt(function(r,e,t,n){return new br(r,e,t,n)},function(r,e,t,n){return"rgba(".concat(r,",").concat(e,",").concat(t,",").concat(n,")")}),W=function(r,e){return e===void 0&&(e=M.kNumber),new H(r,e)};new H(50,"%");var xr;(function(r){r[r.Standard=0]="Standard"})(xr||(xr={}));var fe;(function(r){r[r.ADDED=0]="ADDED",r[r.REMOVED=1]="REMOVED",r[r.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(fe||(fe={}));var Yn={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Jt(0,0,0,0)},b;(function(r){r.COORDINATE="<coordinate>",r.COLOR="<color>",r.PAINT="<paint>",r.NUMBER="<number>",r.ANGLE="<angle>",r.OPACITY_VALUE="<opacity-value>",r.SHADOW_BLUR="<shadow-blur>",r.LENGTH="<length>",r.PERCENTAGE="<percentage>",r.LENGTH_PERCENTAGE="<length> | <percentage>",r.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",r.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",r.LIST_OF_POINTS="<list-of-points>",r.PATH="<path>",r.FILTER="<filter>",r.Z_INDEX="<z-index>",r.OFFSET_DISTANCE="<offset-distance>",r.DEFINED_PATH="<defined-path>",r.MARKER="<marker>",r.TRANSFORM="<transform>",r.TRANSFORM_ORIGIN="<transform-origin>",r.TEXT="<text>",r.TEXT_TRANSFORM="<text-transform>"})(b||(b={}));function Ba(r){var e=r.type,t=r.value;return e==="hex"?"#".concat(t):e==="literal"?t:e==="rgb"?"rgb(".concat(t.join(","),")"):"rgba(".concat(t.join(","),")")}var Ga=function(){var r={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function t(R){throw new Error(e+": "+R)}function n(){var R=i();return e.length>0&&t("Invalid input not EOF"),R}function i(){return O(a)}function a(){return o("linear-gradient",r.linearGradient,u)||o("repeating-linear-gradient",r.repeatingLinearGradient,u)||o("radial-gradient",r.radialGradient,f)||o("repeating-radial-gradient",r.repeatingRadialGradient,f)||o("conic-gradient",r.conicGradient,f)}function o(R,_,U){return s(_,function(st){var wt=U();return wt&&(F(r.comma)||t("Missing comma before color stops")),{type:R,orientation:wt,colorStops:O(L)}})}function s(R,_){var U=F(R);if(U){F(r.startCall)||t("Missing (");var st=_(U);return F(r.endCall)||t("Missing )"),st}}function u(){return l()||c()}function l(){return D("directional",r.sideOrCorner,1)}function c(){return D("angular",r.angleValue,1)}function f(){var R,_=h(),U;return _&&(R=[],R.push(_),U=e,F(r.comma)&&(_=h(),_?R.push(_):e=U)),R}function h(){var R=p()||d();if(R)R.at=y();else{var _=x();if(_){R=_;var U=y();U&&(R.at=U)}else{var st=T();st&&(R={type:"default-radial",at:st})}}return R}function p(){var R=D("shape",/^(circle)/i,0);return R&&(R.style=I()||x()),R}function d(){var R=D("shape",/^(ellipse)/i,0);return R&&(R.style=C()||x()),R}function x(){return D("extent-keyword",r.extentKeywords,1)}function y(){if(D("position",/^at/,0)){var R=T();return R||t("Missing positioning value"),R}}function T(){var R=w();if(R.x||R.y)return{type:"position",value:R}}function w(){return{x:C(),y:C()}}function O(R){var _=R(),U=[];if(_)for(U.push(_);F(r.comma);)_=R(),_?U.push(_):t("One extra comma");return U}function L(){var R=E();return R||t("Expected color definition"),R.length=C(),R}function E(){return g()||N()||m()||v()}function v(){return D("literal",r.literalColor,0)}function g(){return D("hex",r.hexColor,1)}function m(){return s(r.rgbColor,function(){return{type:"rgb",value:O(S)}})}function N(){return s(r.rgbaColor,function(){return{type:"rgba",value:O(S)}})}function S(){return F(r.number)[1]}function C(){return D("%",r.percentageValue,1)||k()||I()}function k(){return D("position-keyword",r.positionKeywords,1)}function I(){return D("px",r.pixelValue,1)||D("em",r.emValue,1)}function D(R,_,U){var st=F(_);if(st)return{type:R,value:st[U]}}function F(R){var _=/^[\n\r\t\s]+/.exec(e);_&&X(_[0].length);var U=R.exec(e);return U&&X(U[0].length),U}function X(R){e=e.substring(R)}return function(R){return e=R,n()}}();function ku(r,e,t,n){var i=q(n.value),a=0,o=0,s=a+e/2,u=o+t/2,l=Math.abs(e*Math.cos(i))+Math.abs(t*Math.sin(i)),c=r[0]+s-Math.cos(i)*l/2,f=r[1]+u-Math.sin(i)*l/2,h=r[0]+s+Math.cos(i)*l/2,p=r[1]+u+Math.sin(i)*l/2;return{x1:c,y1:f,x2:h,y2:p}}function Au(r,e,t,n,i,a){var o=n.value,s=i.value;n.unit===M.kPercentage&&(o=n.value/100*e),i.unit===M.kPercentage&&(s=i.value/100*t);var u=Math.max(Gt([0,0],[o,s]),Gt([0,t],[o,s]),Gt([e,t],[o,s]),Gt([e,0],[o,s]));return a&&(a instanceof H?u=a.value:a instanceof Et&&(a.value==="closest-side"?u=Math.min(o,e-o,s,t-s):a.value==="farthest-side"?u=Math.max(o,e-o,s,t-s):a.value==="closest-corner"&&(u=Math.min(Gt([0,0],[o,s]),Gt([0,t],[o,s]),Gt([e,t],[o,s]),Gt([e,0],[o,s]))))),{x:o+r[0],y:s+r[1],r:u}}var Fa=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,_a=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ua=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Xn=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Ya(r){var e,t,n,i=r.length;r[i-1].length=(e=r[i-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},i>1&&(r[0].length=(t=r[0].length)!==null&&t!==void 0?t:{type:"%",value:"0"});for(var a=0,o=Number(r[0].length.value),s=1;s<i;s++){var u=(n=r[s].length)===null||n===void 0?void 0:n.value;if(!rt(u)&&!rt(o)){for(var l=1;l<s-a;l++)r[a+l].length={type:"%",value:"".concat(o+(Number(u)-o)*l/(s-a))};a=s,o=Number(u)}}}var Xa={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},Va=lt(function(r){var e;return r.type==="angular"?e=Number(r.value):e=Xa[r.value]||0,W(e,"deg")}),Ha=lt(function(r){var e=50,t=50,n="%",i="%";if((r==null?void 0:r.type)==="position"){var a=r.value,o=a.x,s=a.y;(o==null?void 0:o.type)==="position-keyword"&&(o.value==="left"?e=0:o.value==="center"?e=50:o.value==="right"?e=100:o.value==="top"?t=0:o.value==="bottom"&&(t=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?t=50:s.value==="right"?e=100:s.value==="top"?t=0:s.value==="bottom"&&(t=100)),((o==null?void 0:o.type)==="px"||(o==null?void 0:o.type)==="%"||(o==null?void 0:o.type)==="em")&&(n=o==null?void 0:o.type,e=Number(o.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,t=Number(s.value))}return{cx:W(e,n),cy:W(t,i)}}),Wa=lt(function(r){var e;if(r.indexOf("linear")>-1||r.indexOf("radial")>-1){var t=Ga(r);return t.map(function(s){var u=s.type,l=s.orientation,c=s.colorStops;Ya(c);var f=c.map(function(O){return{offset:W(Number(O.length.value),"%"),color:Ba(O)}});if(u==="linear-gradient")return new Oe(ae.LinearGradient,{angle:l?Va(l):St,steps:f});if(u==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var h=Ha(l[0].at),p=h.cx,d=h.cy,x=void 0;if(l[0].style){var y=l[0].style,T=y.type,w=y.value;T==="extent-keyword"?x=mr(w):x=W(w,T)}return new Oe(ae.RadialGradient,{cx:p,cy:d,size:x,steps:f})}})}var n=r[0];if(r[1]==="("||r[2]==="("){if(n==="l"){var i=Fa.exec(r);if(i){var a=((e=i[2].match(Xn))===null||e===void 0?void 0:e.map(function(s){return s.split(":")}))||[];return[new Oe(ae.LinearGradient,{angle:W(parseFloat(i[1]),"deg"),steps:a.map(function(s){var u=B(s,2),l=u[0],c=u[1];return{offset:W(Number(l)*100,"%"),color:c}})})]}}else if(n==="r"){var o=za(r);if(o)if(Bt(o))r=o;else return[new Oe(ae.RadialGradient,o)]}else if(n==="p")return Ka(r)}});function za(r){var e,t=_a.exec(r);if(t){var n=((e=t[4].match(Xn))===null||e===void 0?void 0:e.map(function(i){return i.split(":")}))||[];return{cx:W(50,"%"),cy:W(50,"%"),steps:n.map(function(i){var a=B(i,2),o=a[0],s=a[1];return{offset:W(Number(o)*100,"%"),color:s}})}}return null}function Ka(r){var e=Ua.exec(r);if(e){var t=e[1],n=e[2];switch(t){case"a":t="repeat";break;case"x":t="repeat-x";break;case"y":t="repeat-y";break;case"n":t="no-repeat";break;default:t="no-repeat"}return{image:n,repetition:t}}return null}function Za(r){return r&&!!r.image}function hn(r){return r&&!rt(r.r)&&!rt(r.g)&&!rt(r.b)}var le=lt(function(r){if(Za(r))return Y({repetition:"repeat"},r);if(rt(r)&&(r=""),r==="transparent")return Un;if(r==="currentColor")r="black";else if(r==="none")return _e;var e=Wa(r);if(e)return e;var t=aa(r),n=[0,0,0,0];return t!==null&&(n[0]=t.r||0,n[1]=t.g||0,n[2]=t.b||0,n[3]=t.opacity),Da.apply(void 0,tt([],B(n),!1))});function qa(r,e){if(!(!hn(r)||!hn(e)))return[[Number(r.r),Number(r.g),Number(r.b),Number(r.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var n=t.slice();if(n[3])for(var i=0;i<3;i++)n[i]=Math.round(Pe(n[i],0,255));return n[3]=Pe(n[3],0,1),"rgba(".concat(n.join(","),")")}]}function Se(r,e){if(rt(e))return W(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(r)>=0)return W(Number(e),"px");if("deg".search(r)>=0)return W(Number(e),"deg")}var t=[];e=e.replace(r,function(i){return t.push(i),"U"+i});var n="U("+r.source+")";return t.map(function(i){return W(Number(e.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(n,"g"),"*0")),i)})[0]}var Vn=function(r){return Se(new RegExp("px","g"),r)},Ja=lt(Vn),$a=function(r){return Se(new RegExp("%","g"),r)};lt($a);var Ce=function(r){return te(r)||isFinite(Number(r))?W(Number(r)||0,"px"):Se(new RegExp("px|%|em|rem","g"),r)},he=lt(Ce),kr=function(r){return Se(new RegExp("deg|rad|grad|turn","g"),r)},Hn=lt(kr);function Qa(r,e,t,n,i){i===void 0&&(i=0);var a="",o=r.value||0,s=e.value||0,u=yr(r.unit),l=r.convertTo(u),c=e.convertTo(u);return l&&c?(o=l.value,s=c.value,a=vr(r.unit)):(H.isLength(r.unit)||H.isLength(e.unit))&&(o=Tt(r,i,t),s=Tt(e,i,t),a="px"),[o,s,function(f){return f+a}]}function gt(r){var e=0;return r.unit===M.kDegrees?e=r.value:r.unit===M.kRadians?e=Ct(Number(r.value)):r.unit===M.kTurns&&(e=ca(Number(r.value))),e}function pn(r,e){var t;return Array.isArray(r)?t=r.map(function(n){return Number(n)}):Bt(r)?t=r.split(" ").map(function(n){return Number(n)}):te(r)&&(t=[r]),e===2?t.length===1?[t[0],t[0]]:[t[0],t[1]]:t.length===1?[t[0],t[0],t[0],t[0]]:t.length===2?[t[0],t[1],t[0],t[1]]:t.length===3?[t[0],t[1],t[2],t[1]]:[t[0],t[1],t[2],t[3]]}function Wn(r){return Bt(r)?r.split(" ").map(function(e){return he(e)}):r.map(function(e){return he(e.toString())})}function Tt(r,e,t,n){if(n===void 0&&(n=!1),r.unit===M.kPixels)return Number(r.value);if(r.unit===M.kPercentage&&t){var i=t.nodeName===A.GROUP?t.getLocalBounds():t.getGeometryBounds();return(n?i.min[e]:0)+r.value/100*i.halfExtents[e]*2}return 0}var ja=function(r){return Se(/deg|rad|grad|turn|px|%/g,r)},to=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function zn(r){if(r===void 0&&(r=""),r=r.toLowerCase().trim(),r==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,t=[],n,i=0;n=e.exec(r);){if(n.index!==i)return[];if(i=n.index+n[0].length,to.indexOf(n[1])>-1&&t.push({name:n[1],params:n[2].split(" ").map(function(a){return ja(a)||le(a)})}),e.lastIndex===r.length)return t}return[]}function Kn(r){return r.toString()}var pe=function(r){return typeof r=="number"?W(r):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(r)?W(Number(r)):W(0)},$t=lt(pe);lt(function(r){return Bt(r)?r.split(" ").map($t):r.map($t)});function Ar(r,e){return[r,e,Kn]}function Rr(r,e){return function(t,n){return[t,n,function(i){return Kn(Pe(i,r,e))}]}}function Zn(r,e){if(r.length===e.length)return[r,e,function(t){return t}]}function dn(r){return r.parsedStyle.d.totalLength===0&&(r.parsedStyle.d.totalLength=Qi(r.parsedStyle.d.absolutePath)),r.parsedStyle.d.totalLength}function eo(r){return r.parsedStyle.points.totalLength===0&&(r.parsedStyle.points.totalLength=Ki(r.parsedStyle.points.points)),r.parsedStyle.points.totalLength}function ro(r){for(var e=0;e<r.length;e++){var t=r[e-1],n=r[e],i=n[0];if(i==="M"&&t){var a=t[0],o=[n[1],n[2]],s=void 0;a==="L"||a==="M"?s=[t[1],t[2]]:(a==="C"||a==="A"||a==="Q")&&(s=[t[t.length-2],t[t.length-1]]),s&&Ue(o,s)&&(r.splice(e,1),e--)}}}function no(r){for(var e=!1,t=r.length,n=0;n<t;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function io(r){for(var e=[],t=[],n=[],i=0;i<r.length;i++){var a=r[i],o=a[0];o==="M"?(n.length&&(t.push(n),n=[]),n.push([a[1],a[2]])):o==="Z"?n.length&&(e.push(n),n=[]):n.push([a[1],a[2]])}return n.length>0&&t.push(n),{polygons:e,polylines:t}}function Ue(r,e){return r[0]===e[0]&&r[1]===e[1]}function ao(r,e){for(var t=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,u=o.params,l=o.prePoint,c=void 0;switch(o.command){case"Q":c=Ji(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=qi(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var f=o.arcParams;c=Zi(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:t.push(s[0]),n.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height))}t=t.filter(function(T){return!Number.isNaN(T)&&T!==1/0&&T!==-1/0}),n=n.filter(function(T){return!Number.isNaN(T)&&T!==1/0&&T!==-1/0});var h=tn(t),p=tn(n),d=en(t),x=en(n);if(i.length===0)return{x:h,y:p,width:d-h,height:x-p};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,y=void 0;s[0]===h?(y=Ie(o,e),h=h-y.xExtra):s[0]===d&&(y=Ie(o,e),d=d+y.xExtra),s[1]===p?(y=Ie(o,e),p=p-y.yExtra):s[1]===x&&(y=Ie(o,e),x=x+y.yExtra)}return{x:h,y:p,width:d-h,height:x-p}}function Ie(r,e){var t=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||ji(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return f}function vn(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}var gn=function(r,e){var t=r.x*e.x+r.y*e.y,n=Math.sqrt((Math.pow(r.x,2)+Math.pow(r.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),i=r.x*e.y-r.y*e.x<0?-1:1,a=i*Math.acos(t/n);return a},yn=function(r,e,t,n,i,a,o,s){e=Math.abs(e),t=Math.abs(t),n=Gn(n,360);var u=q(n);if(r.x===o.x&&r.y===o.y)return{x:r.x,y:r.y,ellipticalArcAngle:0};if(e===0||t===0)return{x:0,y:0,ellipticalArcAngle:0};var l=(r.x-o.x)/2,c=(r.y-o.y)/2,f={x:Math.cos(u)*l+Math.sin(u)*c,y:-Math.sin(u)*l+Math.cos(u)*c},h=Math.pow(f.x,2)/Math.pow(e,2)+Math.pow(f.y,2)/Math.pow(t,2);h>1&&(e=Math.sqrt(h)*e,t=Math.sqrt(h)*t);var p=Math.pow(e,2)*Math.pow(t,2)-Math.pow(e,2)*Math.pow(f.y,2)-Math.pow(t,2)*Math.pow(f.x,2),d=Math.pow(e,2)*Math.pow(f.y,2)+Math.pow(t,2)*Math.pow(f.x,2),x=p/d;x=x<0?0:x;var y=(i!==a?1:-1)*Math.sqrt(x),T={x:y*(e*f.y/t),y:y*(-(t*f.x)/e)},w={x:Math.cos(u)*T.x-Math.sin(u)*T.y+(r.x+o.x)/2,y:Math.sin(u)*T.x+Math.cos(u)*T.y+(r.y+o.y)/2},O={x:(f.x-T.x)/e,y:(f.y-T.y)/t},L=gn({x:1,y:0},O),E={x:(-f.x-T.x)/e,y:(-f.y-T.y)/t},v=gn(O,E);!a&&v>0?v-=2*Math.PI:a&&v<0&&(v+=2*Math.PI),v%=2*Math.PI;var g=L+v*s,m=e*Math.cos(g),N=t*Math.sin(g),S={x:Math.cos(u)*m-Math.sin(u)*N+w.x,y:Math.sin(u)*m+Math.cos(u)*N+w.y,ellipticalArcStartAngle:L,ellipticalArcEndAngle:L+v,ellipticalArcAngle:g,ellipticalArcCenter:w,resultantRx:e,resultantRy:t};return S};function oo(r){for(var e=[],t=null,n=null,i=null,a=0,o=r.length,s=0;s<o;s++){var u=r[s];n=r[s+1];var l=u[0],c={command:l,prePoint:t,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[u[1],u[2]],a=s;break;case"A":var f=so(t,u);c.arcParams=f;break}if(l==="Z")t=i,n=r[a+1];else{var h=u.length;t=[u[h-2],u[h-1]]}n&&n[0]==="Z"&&(n=r[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Ue(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var p=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=p;var d=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[d[0]-t[0],d[1]-t[1]],c.endTangent=[t[0]-d[0],t[1]-d[1]];else if(l==="Q"){var x=[u[1],u[2]];c.startTangent=[d[0]-x[0],d[1]-x[1]],c.endTangent=[t[0]-x[0],t[1]-x[1]]}else if(l==="T"){var y=e[s-1],x=vn(y.currentPoint,d);y.command==="Q"?(c.command="Q",c.startTangent=[d[0]-x[0],d[1]-x[1]],c.endTangent=[t[0]-x[0],t[1]-x[1]]):(c.command="TL",c.startTangent=[d[0]-t[0],d[1]-t[1]],c.endTangent=[t[0]-d[0],t[1]-d[1]])}else if(l==="C"){var T=[u[1],u[2]],w=[u[3],u[4]];c.startTangent=[d[0]-T[0],d[1]-T[1]],c.endTangent=[t[0]-w[0],t[1]-w[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[T[0]-w[0],T[1]-w[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[w[0]-T[0],w[1]-T[1]])}else if(l==="S"){var y=e[s-1],T=vn(y.currentPoint,d),w=[u[1],u[2]];y.command==="C"?(c.command="C",c.startTangent=[d[0]-T[0],d[1]-T[1]],c.endTangent=[t[0]-w[0],t[1]-w[1]]):(c.command="SQ",c.startTangent=[d[0]-w[0],d[1]-w[1]],c.endTangent=[t[0]-w[0],t[1]-w[1]])}else if(l==="A"){var O=mn(c,0),L=O.x,E=O.y,v=mn(c,1,!1),g=v.x,m=v.y;c.startTangent=[L,E],c.endTangent=[g,m]}e.push(c)}return e}function mn(r,e,t){t===void 0&&(t=!0);var n=r.arcParams,i=n.rx,a=i===void 0?0:i,o=n.ry,s=o===void 0?0:o,u=n.xRotation,l=n.arcFlag,c=n.sweepFlag,f=yn({x:r.prePoint[0],y:r.prePoint[1]},a,s,u,!!l,!!c,{x:r.currentPoint[0],y:r.currentPoint[1]},e),h=yn({x:r.prePoint[0],y:r.prePoint[1]},a,s,u,!!l,!!c,{x:r.currentPoint[0],y:r.currentPoint[1]},t?e+.005:e-.005),p=h.x-f.x,d=h.y-f.y,x=Math.sqrt(p*p+d*d);return{x:-p/x,y:-d/x}}function Le(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Er(r,e){return Le(r)*Le(e)?(r[0]*e[0]+r[1]*e[1])/(Le(r)*Le(e)):1}function xn(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(Er(r,e))}function so(r,e){var t=e[1],n=e[2],i=Gn(q(e[3]),Math.PI*2),a=e[4],o=e[5],s=r[0],u=r[1],l=e[6],c=e[7],f=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,h=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,p=f*f/(t*t)+h*h/(n*n);p>1&&(t*=Math.sqrt(p),n*=Math.sqrt(p));var d=t*t*(h*h)+n*n*(f*f),x=d?Math.sqrt((t*t*(n*n)-d)/d):1;a===o&&(x*=-1),isNaN(x)&&(x=0);var y=n?x*t*h/n:0,T=t?x*-n*f/t:0,w=(s+l)/2+Math.cos(i)*y-Math.sin(i)*T,O=(u+c)/2+Math.sin(i)*y+Math.cos(i)*T,L=[(f-y)/t,(h-T)/n],E=[(-1*f-y)/t,(-1*h-T)/n],v=xn([1,0],L),g=xn(L,E);return Er(L,E)<=-1&&(g=Math.PI),Er(L,E)>=1&&(g=0),o===0&&g>0&&(g=g-2*Math.PI),o===1&&g<0&&(g=g+2*Math.PI),{cx:w,cy:O,rx:Ue(r,[l,c])?0:t,ry:Ue(r,[l,c])?0:n,startAngle:v,endAngle:v+g,xRotation:i,arcFlag:a,sweepFlag:o}}function uo(r,e,t){return r.reduce(function(n,i){var a="";if(i[0]==="M"||i[0]==="L"){var o=V(i[1],i[2],0);t&&mt(o,o,t),a="".concat(i[0]).concat(o[0],",").concat(o[1])}else if(i[0]==="Z")a=i[0];else if(i[0]==="C"){var s=V(i[1],i[2],0),u=V(i[3],i[4],0),l=V(i[5],i[6],0);t&&(mt(s,s,t),mt(u,u,t),mt(l,l,t)),a="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(u[0],",").concat(u[1],",").concat(l[0],",").concat(l[1])}else if(i[0]==="A"){var c=V(i[6],i[7],0);t&&mt(c,c,t),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(c[0],",").concat(c[1])}else if(i[0]==="Q"){var s=V(i[1],i[2],0),u=V(i[3],i[4],0);t&&(mt(s,s,t),mt(u,u,t)),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return n+=a},"")}function lo(r,e,t,n){return[["M",r,e],["L",t,n]]}function En(r,e,t,n){var i=(-1+Math.sqrt(2))/3*4,a=r*i,o=e*i,s=t-r,u=t+r,l=n-e,c=n+e;return[["M",s,n],["C",s,n-o,t-a,l,t,l],["C",t+a,l,u,n-o,u,n],["C",u,n+o,t+a,c,t,c],["C",t-a,c,s,n+o,s,n],["Z"]]}function co(r,e){var t=r.map(function(n,i){return[i===0?"M":"L",n[0],n[1]]});return e&&t.push(["Z"]),t}function fo(r,e,t,n,i){if(i){var a=B(i,4),o=a[0],s=a[1],u=a[2],l=a[3],c=r>0?1:-1,f=e>0?1:-1,h=c+f!==0?1:0;return[["M",c*o+t,n],["L",r-c*s+t,n],s?["A",s,s,0,0,h,r+t,f*s+n]:null,["L",r+t,e-f*u+n],u?["A",u,u,0,0,h,r+t-c*u,e+n]:null,["L",t+c*l,e+n],l?["A",l,l,0,0,h,t,e+n-f*l]:null,["L",t,f*o+n],o?["A",o,o,0,0,h,c*o+t,n]:null,["Z"]].filter(function(p){return p})}return[["M",t,n],["L",t+r,n],["L",t+r,n+e],["L",t,n+e],["Z"]]}function Ru(r,e){e===void 0&&(e=r.getLocalTransform());var t=[];switch(r.nodeName){case A.LINE:var n=r.parsedStyle,i=n.x1,a=i===void 0?0:i,o=n.y1,s=o===void 0?0:o,u=n.x2,l=u===void 0?0:u,c=n.y2,f=c===void 0?0:c;t=lo(a,s,l,f);break;case A.CIRCLE:{var h=r.parsedStyle,p=h.r,d=p===void 0?0:p,x=h.cx,y=x===void 0?0:x,T=h.cy,w=T===void 0?0:T;t=En(d,d,y,w);break}case A.ELLIPSE:{var O=r.parsedStyle,L=O.rx,E=L===void 0?0:L,v=O.ry,g=v===void 0?0:v,m=O.cx,y=m===void 0?0:m,N=O.cy,w=N===void 0?0:N;t=En(E,g,y,w);break}case A.POLYLINE:case A.POLYGON:var S=r.parsedStyle.points;t=co(S.points,r.nodeName===A.POLYGON);break;case A.RECT:var C=r.parsedStyle,k=C.width,I=k===void 0?0:k,D=C.height,F=D===void 0?0:D,X=C.x,R=X===void 0?0:X,_=C.y,U=_===void 0?0:_,st=C.radius,wt=st&&st.some(function(Vt){return Vt!==0});t=fo(I,F,R,U,wt&&st.map(function(Vt){return Pe(Vt,0,Math.min(Math.abs(I)/2,Math.abs(F)/2))}));break;case A.PATH:var Rt=r.parsedStyle.d.absolutePath;t=tt([],B(Rt),!1);break}if(t.length)return uo(t,r,e)}var qn=function(r){if(r===""||Array.isArray(r)&&r.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=jr(r)}catch{e=jr(""),console.error("[g]: Invalid SVG Path definition: ".concat(r))}ro(e);var t=no(e),n=io(e),i=n.polygons,a=n.polylines,o=oo(e),s=ao(o,0),u=s.x,l=s.y,c=s.width,f=s.height;return{absolutePath:e,hasArc:t,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(f)?f:0}}},ho=lt(qn);function Tr(r){return Bt(r)?ho(r):qn(r)}function po(r,e,t){var n=r.curve,i=e.curve;(!n||n.length===0)&&(n=rn(r.absolutePath,!1),r.curve=n),(!i||i.length===0)&&(i=rn(e.absolutePath,!1),e.curve=i);var a=[n,i];n.length!==i.length&&(a=ta(n,i));var o=nn(a[0])!==nn(a[1])?ea(a[0]):ra(a[0]);return[o,na(a[1],o),function(s){return s}]}function Jn(r,e){var t;return Bt(r)?t=r.split(" ").map(function(n){var i=B(n.split(","),2),a=i[0],o=i[1];return[Number(a),Number(o)]}):t=r,{points:t,totalLength:0,segments:[]}}function vo(r,e){return[r.points,e.points,function(t){return t}]}var et=null;function dt(r){return function(e){var t=0;return r.map(function(n){return n===et?e[t++]:n})}}function zt(r){return r}var Ye={matrix:["NNNNNN",[et,et,0,0,et,et,0,0,0,0,1,0,et,et,0,1],zt],matrix3d:["NNNNNNNNNNNNNNNN",zt],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",dt([et,et,new H(1)]),zt],scalex:["N",dt([et,new H(1),new H(1)]),dt([et,new H(1)])],scaley:["N",dt([new H(1),et,new H(1)]),dt([new H(1),et])],scalez:["N",dt([new H(1),new H(1),et])],scale3d:["NNN",zt],skew:["Aa",null,zt],skewx:["A",null,dt([et,St])],skewy:["A",null,dt([St,et])],translate:["Tt",dt([et,et,nt]),zt],translatex:["T",dt([et,nt,nt]),dt([et,nt])],translatey:["T",dt([nt,et,nt]),dt([nt,et])],translatez:["L",dt([nt,nt,et])],translate3d:["TTL",zt]};function $n(r){if(r=(r||"none").toLowerCase().trim(),r==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,t=[],n,i=0;n=e.exec(r);){if(n.index!==i)return[];i=n.index+n[0].length;var a=n[1],o=Ye[a];if(!o)return[];var s=n[2].split(","),u=o[0];if(u.length<s.length)return[];for(var l=[],c=0;c<u.length;c++){var f=s[c],h=u[c],p=void 0;if(f?p={A:function(d){return d.trim()==="0"?St:Hn(d)},N:$t,T:he,L:Ja}[h.toUpperCase()](f):p={a:St,n:l[0],t:nt}[h],p===void 0)return[];l.push(p)}if(t.push({t:a,d:l}),e.lastIndex===r.length)return t}return[]}function Tn(r){if(r=(r||"none").toLowerCase().trim(),r==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,t=[],n,i=0;n=e.exec(r);){if(n.index!==i)return[];i=n.index+n[0].length;var a=n[1],o=Ye[a];if(!o)return[];var s=n[2].split(","),u=o[0];if(u.length<s.length)return[];for(var l=[],c=0;c<u.length;c++){var f=s[c],h=u[c],p=void 0;if(f?p={A:function(d){return d.trim()==="0"?St:kr(d)},N:pe,T:Ce,L:Vn}[h.toUpperCase()](f):p={a:St,n:l[0],t:nt}[h],p===void 0)return[];l.push(p)}if(t.push({t:a,d:l}),e.lastIndex===r.length)return t}return[]}function go(r){var e,t,n,i;switch(r.t){case"rotatex":return i=q(gt(r.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=q(gt(r.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=q(gt(r.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=r.d[0].value,t=r.d[1].value,n=r.d[2].value,i=q(gt(r.d[3]));var a=e*e+t*t+n*n;if(a===0)e=1,t=0,n=0;else if(a!==1){var o=Math.sqrt(a);e/=o,t/=o,n/=o}var s=Math.sin(i/2),u=s*Math.cos(i/2),l=s*s;return[1-2*(t*t+n*n)*l,2*(e*t*l+n*u),2*(e*n*l-t*u),0,2*(e*t*l-n*u),1-2*(e*e+n*n)*l,2*(t*n*l+e*u),0,2*(e*n*l+t*u),2*(t*n*l-e*u),1-2*(e*e+t*t)*l,0,0,0,0,1];case"scale":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[r.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,r.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,r.d[0].value,0,0,0,0,1];case"scale3d":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,r.d[2].value,0,0,0,0,1];case"skew":var c=q(gt(r.d[0])),f=q(gt(r.d[1]));return[1,Math.tan(f),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=q(gt(r.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=q(gt(r.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=Tt(r.d[0],0,null)||0,t=Tt(r.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1];case"translatex":return e=Tt(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translatey":return t=Tt(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,t,0,1];case"translatez":return n=Tt(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,n,1];case"translate3d":return e=Tt(r.d[0],0,null)||0,t=Tt(r.d[1],0,null)||0,n=Tt(r.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1];case"perspective":var h=Tt(r.d[0],0,null)||0,p=h?-1/h:0;return[1,0,0,0,0,1,0,0,0,0,1,p,0,0,0,1];case"matrix":return[r.d[0].value,r.d[1].value,0,0,r.d[2].value,r.d[3].value,0,0,0,0,1,0,r.d[4].value,r.d[5].value,0,1];case"matrix3d":return r.d.map(function(d){return d.value})}}function yo(r,e){return[r[0]*e[0]+r[4]*e[1]+r[8]*e[2]+r[12]*e[3],r[1]*e[0]+r[5]*e[1]+r[9]*e[2]+r[13]*e[3],r[2]*e[0]+r[6]*e[1]+r[10]*e[2]+r[14]*e[3],r[3]*e[0]+r[7]*e[1]+r[11]*e[2]+r[15]*e[3],r[0]*e[4]+r[4]*e[5]+r[8]*e[6]+r[12]*e[7],r[1]*e[4]+r[5]*e[5]+r[9]*e[6]+r[13]*e[7],r[2]*e[4]+r[6]*e[5]+r[10]*e[6]+r[14]*e[7],r[3]*e[4]+r[7]*e[5]+r[11]*e[6]+r[15]*e[7],r[0]*e[8]+r[4]*e[9]+r[8]*e[10]+r[12]*e[11],r[1]*e[8]+r[5]*e[9]+r[9]*e[10]+r[13]*e[11],r[2]*e[8]+r[6]*e[9]+r[10]*e[10]+r[14]*e[11],r[3]*e[8]+r[7]*e[9]+r[11]*e[10]+r[15]*e[11],r[0]*e[12]+r[4]*e[13]+r[8]*e[14]+r[12]*e[15],r[1]*e[12]+r[5]*e[13]+r[9]*e[14]+r[13]*e[15],r[2]*e[12]+r[6]*e[13]+r[10]*e[14]+r[14]*e[15],r[3]*e[12]+r[7]*e[13]+r[11]*e[14]+r[15]*e[15]]}function mo(r){return r.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:r.map(go).reduce(yo)}function Pn(r){var e=[0,0,0],t=[1,1,1],n=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return va(mo(r),e,t,n,i,a),[[e,t,n,a,i]]}var xo=function(){function r(n,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=0;o<4;o++)for(var s=0;s<4;s++)for(var u=0;u<4;u++)a[o][s]+=i[o][u]*n[u][s];return a}function e(n){return n[0][2]==0&&n[0][3]==0&&n[1][2]==0&&n[1][3]==0&&n[2][0]==0&&n[2][1]==0&&n[2][2]==1&&n[2][3]==0&&n[3][2]==0&&n[3][3]==1}function t(n,i,a,o,s){for(var u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)u[l][3]=s[l];for(var l=0;l<3;l++)for(var c=0;c<3;c++)u[3][l]+=n[c]*u[c][l];var f=o[0],h=o[1],p=o[2],d=o[3],x=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];x[0][0]=1-2*(h*h+p*p),x[0][1]=2*(f*h-p*d),x[0][2]=2*(f*p+h*d),x[1][0]=2*(f*h+p*d),x[1][1]=1-2*(f*f+p*p),x[1][2]=2*(h*p-f*d),x[2][0]=2*(f*p-h*d),x[2][1]=2*(h*p+f*d),x[2][2]=1-2*(f*f+h*h),u=r(u,x);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(y[2][1]=a[2],u=r(u,y)),a[1]&&(y[2][1]=0,y[2][0]=a[0],u=r(u,y)),a[0]&&(y[2][0]=0,y[1][0]=a[0],u=r(u,y));for(var l=0;l<3;l++)for(var c=0;c<3;c++)u[l][c]*=i[l];return e(u)?[u[0][0],u[0][1],u[1][0],u[1][1],u[3][0],u[3][1]]:u[0].concat(u[1],u[2],u[3])}return t}();function Eo(r){return r.toFixed(6).replace(".000000","")}function je(r,e){var t,n;return r.decompositionPair!==e&&(r.decompositionPair=e,t=Pn(r)),e.decompositionPair!==r&&(e.decompositionPair=r,n=Pn(e)),t[0]===null||n[0]===null?[[!1],[!0],function(i){return i?e[0].d:r[0].d}]:(t[0].push(0),n[0].push(1),[t,n,function(i){var a=Po(t[0][3],n[0][3],i[5]),o=xo(i[0],i[1],i[2],a,i[4]),s=o.map(Eo).join(",");return s}])}function To(r,e){for(var t=0,n=0;n<r.length;n++)t+=r[n]*e[n];return t}function Po(r,e,t){var n=To(r,e);n=Pe(n,-1,1);var i=[];if(n===1)i=r;else for(var a=Math.acos(n),o=Math.sin(t*a)*1/Math.sqrt(1-n*n),s=0;s<4;s++)i.push(r[s]*(Math.cos(t*a)-n*o)+e[s]*o);return i}function tr(r){return r.replace(/[xy]/,"")}function er(r){return r.replace(/(x|y|z|3d)?$/,"3d")}var wo=function(r,e){return r==="perspective"&&e==="perspective"||(r==="matrix"||r==="matrix3d")&&(e==="matrix"||e==="matrix3d")};function Co(r,e,t){var n=!1;if(!r.length||!e.length){r.length||(n=!0,r=e,e=[]);for(var i=function(v){var g=r[v],m=g.t,N=g.d,S=m.substring(0,5)==="scale"?1:0;e.push({t:m,d:N.map(function(C){return typeof C=="number"?W(S):W(S,C.unit)})})},a=0;a<r.length;a++)i(a)}var o=[],s=[],u=[];if(r.length!==e.length){var l=je(r,e);o=[l[0]],s=[l[1]],u=[["matrix",[l[2]]]]}else for(var a=0;a<r.length;a++){var c=r[a].t,f=e[a].t,h=r[a].d,p=e[a].d,d=Ye[c],x=Ye[f],y=void 0;if(wo(c,f)){var l=je([r[a]],[e[a]]);o.push(l[0]),s.push(l[1]),u.push(["matrix",[l[2]]]);continue}else if(c===f)y=c;else if(d[2]&&x[2]&&tr(c)===tr(f))y=tr(c),h=d[2](h),p=x[2](p);else if(d[1]&&x[1]&&er(c)===er(f))y=er(c),h=d[1](h),p=x[1](p);else{var l=je(r,e);o=[l[0]],s=[l[1]],u=[["matrix",[l[2]]]];break}for(var T=[],w=[],O=[],L=0;L<h.length;L++){var l=Qa(h[L],p[L],t,!1,L);T[L]=l[0],w[L]=l[1],O.push(l[2])}o.push(T),s.push(w),u.push([y,O])}if(n){var E=o;o=s,s=E}return[o,s,function(v){return v.map(function(g,m){var N=g.map(function(S,C){return u[m][1][C](S)}).join(",");return u[m][0]==="matrix"&&N.split(",").length===16&&(u[m][0]="matrix3d"),u[m][0]==="matrix3d"&&N.split(",").length===6&&(u[m][0]="matrix"),u[m][0]+"("+N+")"}).join(" ")}]}var Qn=lt(function(r){if(Bt(r)){if(r==="text-anchor")return[W(0,"px"),W(0,"px")];var e=r.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[he(Xe(e[0])),he(Xe(e[1]))]}else return[W(r[0]||0,"px"),W(r[1]||0,"px")]}),So=function(r){if(Bt(r)){if(r==="text-anchor")return[W(0,"px"),W(0,"px")];var e=r.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[Ce(Xe(e[0])),Ce(Xe(e[1]))]}else return[W(r[0]||0,"px"),W(r[1]||0,"px")]};function Xe(r){return r==="center"?"50%":r==="left"||r==="top"?"0%":r==="right"||r==="bottom"?"100%":r}var Or=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:b.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:b.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:b.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:b.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:b.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:b.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:b.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:b.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:b.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:b.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:b.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:b.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:b.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:b.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:b.FILTER},{n:"clipPath",syntax:b.DEFINED_PATH},{n:"textPath",syntax:b.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:b.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:b.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:b.COORDINATE},{n:"y1",int:!0,l:!0,syntax:b.COORDINATE},{n:"z1",int:!0,l:!0,syntax:b.COORDINATE},{n:"x2",int:!0,l:!0,syntax:b.COORDINATE},{n:"y2",int:!0,l:!0,syntax:b.COORDINATE},{n:"z2",int:!0,l:!0,syntax:b.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:b.PATH,p:50},{n:"points",int:!0,l:!0,syntax:b.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:b.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:b.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:b.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:b.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:b.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:b.NUMBER,d:function(r){return r===A.PATH||r===A.POLYGON||r===A.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:b.MARKER},{n:"markerEnd",syntax:b.MARKER},{n:"markerMid",syntax:b.MARKER},{n:"markerStartOffset",syntax:b.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:b.LENGTH,l:!0,int:!0,d:"0"}],wn=Or.filter(function(r){return!!r.l}).map(function(r){return r.n}),Kt={},ie=new WeakMap,No=function(r,e){var t=ie.get(r);return!t||t.length===0?!0:t.includes(e)},Mo=function(){function r(e){var t=this;this.runtime=e,Or.forEach(function(n){t.registerMetadata(n)})}return r.prototype.registerMetadata=function(e){tt([e.n],B(e.a||[]),!1).forEach(function(t){Kt[t]=e})},r.prototype.unregisterMetadata=function(e){delete Kt[e]},r.prototype.getPropertySyntax=function(e){return this.runtime.CSSPropertySyntaxFactory[e]},r.prototype.processProperties=function(e,t,n){var i=this;if(n===void 0&&(n={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var c=n.skipUpdateAttribute,f=n.skipParse,h=n.forceUpdateGeometry,p=n.usedAttributes,d=n.memoize,x=h,y=Object.keys(t);y.forEach(function(T){var w;c||(e.attributes[T]=t[T]),!x&&(!((w=Kt[T])===null||w===void 0)&&w.l)&&(x=!0)}),f||y.forEach(function(T){e.computedStyle[T]=i.parseProperty(T,e.attributes[T],e,d)}),p!=null&&p.length&&(y=Array.from(new Set(y.concat(p)))),y.forEach(function(T){T in e.computedStyle&&(e.parsedStyle[T]=i.computeProperty(T,e.computedStyle[T],e,d))}),x&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e)),y.forEach(function(T){T in e.parsedStyle&&i.postProcessProperty(T,e,y)}),this.runtime.enableCSSParsing&&e.children.length&&y.forEach(function(T){T in e.parsedStyle&&i.isPropertyInheritable(T)&&e.children.forEach(function(w){w.internalSetAttribute(T,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(e.attributes,t);var a=Object.keys(t),o=e.parsedStyle.clipPath,s=e.parsedStyle.offsetPath;e.parsedStyle=Object.assign(e.parsedStyle,t);var u=!!n.forceUpdateGeometry;if(!u){for(var l=0;l<wn.length;l++)if(wn[l]in t){u=!0;break}}t.fill&&(e.parsedStyle.fill=le(t.fill)),t.stroke&&(e.parsedStyle.stroke=le(t.stroke)),t.shadowColor&&(e.parsedStyle.shadowColor=le(t.shadowColor)),t.filter&&(e.parsedStyle.filter=zn(t.filter)),rt(t.radius)||(e.parsedStyle.radius=pn(t.radius,4)),rt(t.lineDash)||(e.parsedStyle.lineDash=pn(t.lineDash,2)),t.points&&(e.parsedStyle.points=Jn(t.points)),t.d===""&&(e.parsedStyle.d=Y({},Yn)),t.d&&(e.parsedStyle.d=Tr(t.d)),t.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:t.textTransform},e,null),$(t.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",o,t.clipPath,e,this.runtime),t.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",s,t.offsetPath,e,this.runtime),t.transform&&(e.parsedStyle.transform=$n(t.transform)),t.transformOrigin&&(e.parsedStyle.transformOrigin=Qn(t.transformOrigin)),t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,t.markerStart,t.markerStart,null,null)),t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,t.markerEnd,t.markerEnd,null,null)),t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",t.markerMid,t.markerMid,null,null)),rt(t.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(e,a),rt(t.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(e,a),t.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(e,a),t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(e,a),u&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e))}},r.prototype.parseProperty=function(e,t,n,i){var a=Kt[e],o=t;if((t===""||rt(t))&&(t="unset"),t==="unset"||t==="initial"||t==="inherit")o=mr(t);else if(a){var s=a.k,u=a.syntax,l=u&&this.getPropertySyntax(u);s&&s.indexOf(t)>-1?o=mr(t):l&&(!i&&l.parserUnmemoize?o=l.parserUnmemoize(t,n):l.parser&&(o=l.parser(t,n)))}return o},r.prototype.computeProperty=function(e,t,n,i){var a=Kt[e],o=n.id==="g-root",s=t;if(a){var u=a.syntax,l=a.inh,c=a.d;if(t instanceof Et){var f=t.value;if(f==="unset"&&(l&&!o?f="inherit":f="initial"),f==="initial")rt(c)||(t=this.parseProperty(e,oe(c)?c(n.nodeName):c,n,i));else if(f==="inherit"){var h=this.tryToResolveProperty(n,e,{inherited:!0});if(rt(h)){this.addUnresolveProperty(n,e);return}else return h}}var p=u&&this.getPropertySyntax(u);if(p&&p.calculator){var d=n.parsedStyle[e];s=p.calculator(e,d,t,n,this.runtime)}else t instanceof Et?s=t.value:s=t}return s},r.prototype.postProcessProperty=function(e,t,n){var i=Kt[e];if(i&&i.syntax){var a=i.syntax&&this.getPropertySyntax(i.syntax),o=a;o&&o.postProcessor&&o.postProcessor(t,n)}},r.prototype.addUnresolveProperty=function(e,t){var n=ie.get(e);n||(ie.set(e,[]),n=ie.get(e)),n.indexOf(t)===-1&&n.push(t)},r.prototype.tryToResolveProperty=function(e,t,n){n===void 0&&(n={});var i=n.inherited;if(i&&e.parentElement&&No(e.parentElement,t)){var a=e.parentElement.parsedStyle[t];return a==="unset"||a==="initial"||a==="inherit"?void 0:a}},r.prototype.recalc=function(e){var t=ie.get(e);if(t&&t.length){var n={};t.forEach(function(i){n[i]=e.attributes[i]}),this.processProperties(e,n),ie.delete(e)}},r.prototype.updateGeometry=function(e){var t=e.nodeName,n=this.runtime.geometryUpdaterFactory[t];if(n){var i=e.geometry;i.contentBounds||(i.contentBounds=new ct),i.renderBounds||(i.renderBounds=new ct);var a=e.parsedStyle,o=n.update(a,e),s=o.cx,u=s===void 0?0:s,l=o.cy,c=l===void 0?0:l,f=o.cz,h=f===void 0?0:f,p=o.hwidth,d=p===void 0?0:p,x=o.hheight,y=x===void 0?0:x,T=o.hdepth,w=T===void 0?0:T,O=[Math.abs(d),Math.abs(y),w],L=a,E=L.stroke,v=L.lineWidth,g=v===void 0?1:v,m=L.increasedLineWidthForHitTesting,N=m===void 0?0:m,S=L.shadowType,C=S===void 0?"outer":S,k=L.shadowColor,I=L.filter,D=I===void 0?[]:I,F=L.transformOrigin,X=[u,c,h];i.contentBounds.update(X,O);var R=t===A.POLYLINE||t===A.POLYGON||t===A.PATH?Math.SQRT2:.5,_=E&&!E.isNone;if(_){var U=((g||0)+(N||0))*R;O[0]+=U,O[1]+=U}if(i.renderBounds.update(X,O),k&&C&&C!=="inner"){var st=i.renderBounds,wt=st.min,Rt=st.max,Vt=a,ui=Vt.shadowBlur,li=Vt.shadowOffsetX,ci=Vt.shadowOffsetY,Ne=ui||0,Br=li||0,Gr=ci||0,fi=wt[0]-Ne+Br,hi=Rt[0]+Ne+Br,pi=wt[1]-Ne+Gr,di=Rt[1]+Ne+Gr;wt[0]=Math.min(wt[0],fi),Rt[0]=Math.max(Rt[0],hi),wt[1]=Math.min(wt[1],pi),Rt[1]=Math.max(Rt[1],di),i.renderBounds.setMinMax(wt,Rt)}D.forEach(function(Ur){var Yr=Ur.name,Me=Ur.params;if(Yr==="blur"){var Xr=Me[0].value;i.renderBounds.update(i.renderBounds.center,Ge(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[Xr,Xr,0]))}else if(Yr==="drop-shadow"){var Vr=Me[0].value,Hr=Me[1].value,be=Me[2].value,Wr=i.renderBounds,Ht=Wr.min,Wt=Wr.max,yi=Ht[0]-be+Vr,mi=Wt[0]+be+Vr,xi=Ht[1]-be+Hr,Ei=Wt[1]+be+Hr;Ht[0]=Math.min(Ht[0],yi),Wt[0]=Math.max(Wt[0],mi),Ht[1]=Math.min(Ht[1],xi),Wt[1]=Math.max(Wt[1],Ei),i.renderBounds.setMinMax(Ht,Wt)}}),e.geometry.dirty=!1;var vi=d<0,gi=y<0,Fr=(vi?-1:1)*(F?Tt(F[0],0,e,!0):0),_r=(gi?-1:1)*(F?Tt(F[1],1,e,!0):0);(Fr||_r)&&e.setOrigin(Fr,_r)}},r.prototype.updateSizeAttenuation=function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===A.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===A.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))},r.prototype.isPropertyInheritable=function(e){var t=Kt[e];return t?t.inh:!1},r}(),bo=function(){function r(){this.parser=Hn,this.parserUnmemoize=kr,this.parserWithCSSDisabled=null,this.mixer=Ar}return r.prototype.calculator=function(e,t,n,i){return gt(n)},r}(),ko=function(){function r(){}return r.prototype.calculator=function(e,t,n,i,a){return n instanceof Et&&(n=null),a.sceneGraphService.updateDisplayObjectDependency(e,t,n,i),e==="clipPath"&&i.forEach(function(o){o.childNodes.length===0&&a.sceneGraphService.dirtifyToRoot(o)}),n},r}(),Ao=function(){function r(){this.parser=le,this.parserWithCSSDisabled=le,this.mixer=qa}return r.prototype.calculator=function(e,t,n,i){return n instanceof Et?n.value==="none"?_e:Un:n},r}(),Ro=function(){function r(){this.parser=zn}return r.prototype.calculator=function(e,t,n){return n instanceof Et?[]:n},r}();function Cn(r){var e=r.parsedStyle.fontSize;return rt(e)?null:e}var Pr=function(){function r(){this.parser=he,this.parserUnmemoize=Ce,this.parserWithCSSDisabled=null,this.mixer=Ar}return r.prototype.calculator=function(e,t,n,i,a){var o;if(te(n))return n;if(H.isRelativeUnit(n.unit)){var s=a.styleValueRegistry;if(n.unit===M.kPercentage)return 0;if(n.unit===M.kEms){if(i.parentNode){var u=Cn(i.parentNode);if(u)return u*=n.value,u;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}else if(n.unit===M.kRems){if(!((o=i==null?void 0:i.ownerDocument)===null||o===void 0)&&o.documentElement){var u=Cn(i.ownerDocument.documentElement);if(u)return u*=n.value,u;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}}else return n.value},r}(),Oo=function(){function r(){this.mixer=Zn}return r.prototype.parser=function(e){var t=Wn(te(e)?[e]:e),n;return t.length===1?n=[t[0],t[0]]:n=[t[0],t[1]],n},r.prototype.calculator=function(e,t,n){return n.map(function(i){return i.value})},r}(),Io=function(){function r(){this.mixer=Zn}return r.prototype.parser=function(e){var t=Wn(te(e)?[e]:e),n;return t.length===1?n=[t[0],t[0],t[0],t[0]]:t.length===2?n=[t[0],t[1],t[0],t[1]]:t.length===3?n=[t[0],t[1],t[2],t[1]]:n=[t[0],t[1],t[2],t[3]],n},r.prototype.calculator=function(e,t,n){return n.map(function(i){return i.value})},r}(),Lo=function(){function r(){}return r.prototype.calculator=function(e,t,n,i){n instanceof Et&&(n=null);var a=n==null?void 0:n.cloneNode(!0);return a&&(a.style.isMarker=!0),a},r}(),Do=function(){function r(){this.mixer=Ar,this.parser=$t,this.parserUnmemoize=pe,this.parserWithCSSDisabled=null}return r.prototype.calculator=function(e,t,n){return n.value},r}(),Bo=function(){function r(){this.parser=$t,this.parserUnmemoize=pe,this.parserWithCSSDisabled=null,this.mixer=Rr(0,1)}return r.prototype.calculator=function(e,t,n){return n.value},r.prototype.postProcessor=function(e){var t=e.parsedStyle,n=t.offsetPath,i=t.offsetDistance;if(n){var a=n.nodeName;if(a===A.LINE||a===A.PATH||a===A.POLYLINE){var o=n.getPoint(i);o&&e.setLocalPosition(o.x,o.y)}}},r}(),Go=function(){function r(){this.parser=$t,this.parserUnmemoize=pe,this.parserWithCSSDisabled=null,this.mixer=Rr(0,1)}return r.prototype.calculator=function(e,t,n){return n.value},r}(),Fo=function(){function r(){this.parser=Tr,this.parserWithCSSDisabled=Tr,this.mixer=po}return r.prototype.calculator=function(e,t,n){return n instanceof Et&&n.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Jt(0,0,0,0)}:n},r}(),_o=function(){function r(){this.parser=Jn,this.mixer=vo}return r}(),Uo=function(r){z(e,r);function e(){var t=r.apply(this,tt([],B(arguments),!1))||this;return t.mixer=Rr(0,1/0),t}return e}(Pr),Yo=function(){function r(){}return r.prototype.calculator=function(e,t,n,i){return n instanceof Et?n.value==="unset"?"":n.value:"".concat(n)},r.prototype.postProcessor=function(e){e.nodeValue="".concat(e.parsedStyle.text)||""},r}(),Xo=function(){function r(){}return r.prototype.calculator=function(e,t,n,i){var a=i.getAttribute("text");if(a){var o=a;n.value==="capitalize"?o=a.charAt(0).toUpperCase()+a.slice(1):n.value==="lowercase"?o=a.toLowerCase():n.value==="uppercase"&&(o=a.toUpperCase()),i.parsedStyle.text=o}return n.value},r}(),rr={},Vo=0;function Ho(r,e){if(r){var t=typeof r=="string"?r:r.id||Vo++;rr[t]&&rr[t].destroy(),rr[t]=e}}var Ir=typeof window<"u"&&typeof window.document<"u";function Wo(r){return!!r.getAttribute}function zo(r,e){for(var t=0,n=r.length;t<n;){var i=t+n>>>1;jn(r[i],e)<0?t=i+1:n=i}return t}function jn(r,e){var t=Number(r.parsedStyle.zIndex||0),n=Number(e.parsedStyle.zIndex||0);if(t===n){var i=r.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(r)-a.indexOf(e)}}return t-n}function Ko(r){var e,t=r;do{var n=(e=t.parsedStyle)===null||e===void 0?void 0:e.clipPath;if(n)return t;t=t.parentElement}while(t!==null);return null}var Sn="px";function Ou(r,e,t){Ir&&r.style&&(r.style.width=e+Sn,r.style.height=t+Sn)}function ti(r,e){if(Ir)return document.defaultView.getComputedStyle(r,null).getPropertyValue(e)}function Zo(r){var e=ti(r,"width");return e==="auto"?r.offsetWidth:parseFloat(e)}function qo(r){var e=ti(r,"height");return e==="auto"?r.offsetHeight:parseFloat(e)}var Jo=1,$o={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},wr=typeof performance=="object"&&performance.now?performance:Date;function Iu(r,e,t){r===void 0&&(r="auto");var n=!1,i=!1,a=!!e&&!e.isNone,o=!!t&&!t.isNone;return r==="visiblepainted"||r==="painted"||r==="auto"?(n=a,i=o):r==="visiblefill"||r==="fill"?n=!0:r==="visiblestroke"||r==="stroke"?i=!0:(r==="visible"||r==="all")&&(n=!0,i=!0),[n,i]}var Qo=1,jo=function(){return Qo++},At=typeof self=="object"&&self.self==self?self:typeof global=="object"&&global.global==global?global:{},ts=Date.now(),es=function(){return At.performance&&typeof At.performance.now=="function"?At.performance.now():Date.now()-ts},Ee={},Nn=Date.now(),rs=function(r){if(typeof r!="function")throw new TypeError(r+" is not a function");var e=Date.now(),t=e-Nn,n=t>16?0:16-t,i=jo();return Ee[i]=r,Object.keys(Ee).length>1||setTimeout(function(){Nn=e;var a=Ee;Ee={},Object.keys(a).forEach(function(o){return a[o](es())})},n),i},ns=function(r){delete Ee[r]},is=["","webkit","moz","ms","o"],ei=function(r){return typeof r!="string"?rs:r===""?At.requestAnimationFrame:At[r+"RequestAnimationFrame"]},as=function(r){return typeof r!="string"?ns:r===""?At.cancelAnimationFrame:At[r+"CancelAnimationFrame"]||At[r+"CancelRequestAnimationFrame"]},os=function(r,e){for(var t=0;r[t]!==void 0;){if(e(r[t]))return r[t];t=t+1}},ri=os(is,function(r){return!!ei(r)}),Lr=ei(ri),ni=as(ri);At.requestAnimationFrame=Lr;At.cancelAnimationFrame=ni;var ss=function(){function r(){this.callbacks=[]}return r.prototype.getCallbacksNum=function(){return this.callbacks.length},r.prototype.tapPromise=function(e,t){this.callbacks.push(t)},r.prototype.promise=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.all(this.callbacks.map(function(n){return n.apply(void 0,tt([],B(e),!1))}))},r}(),us=function(){function r(){this.callbacks=[]}return r.prototype.tapPromise=function(e,t){this.callbacks.push(t)},r.prototype.promise=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sr(this,void 0,void 0,function(){var n,i,a,o;return ur(this,function(s){switch(s.label){case 0:return this.callbacks.length?[4,(o=this.callbacks)[0].apply(o,tt([],B(e),!1))]:[3,6];case 1:n=s.sent(),i=0,s.label=2;case 2:return i<this.callbacks.length-1?(a=this.callbacks[i],[4,a(n)]):[3,5];case 3:n=s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2,n];case 6:return[2,null]}})})},r}(),ht=function(){function r(){this.callbacks=[]}return r.prototype.tap=function(e,t){this.callbacks.push(t)},r.prototype.call=function(){var e=arguments;this.callbacks.forEach(function(t){t.apply(void 0,e)})},r}(),nr=function(){function r(){this.callbacks=[]}return r.prototype.tap=function(e,t){this.callbacks.push(t)},r.prototype.call=function(){if(this.callbacks.length){for(var e=arguments,t=this.callbacks[0].apply(void 0,e),n=0;n<this.callbacks.length-1;n++){var i=this.callbacks[n];t=i(t)}return t}return null},r}(),ls=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],cs=/([\"\'])[^\'\"]+\1/;function fs(r){for(var e=r.fontSize,t=e===void 0?16:e,n=r.fontFamily,i=n===void 0?"sans-serif":n,a=r.fontStyle,o=a===void 0?"normal":a,s=r.fontVariant,u=s===void 0?"normal":s,l=r.fontWeight,c=l===void 0?"normal":l,f=te(t)&&"".concat(t,"px")||"16px",h=i.split(","),p=h.length-1;p>=0;p--){var d=h[p].trim();!cs.test(d)&&ls.indexOf(d)<0&&(d='"'.concat(d,'"')),h[p]=d}return"".concat(o," ").concat(u," ").concat(c," ").concat(f," ").concat(h.join(","))}function ir(r,e,t){return Ve(r),r[4]=Math.tan(e),r[1]=Math.tan(t),r}var ye=1e-5,hs=at(),it=at();function ps(r,e){if(r.length){var t=Ve(hs);r.forEach(function(n){var i=n.t,a=n.d;if(i==="scale"){var o=(a==null?void 0:a.map(function(T){return Math.max(T.value,ye)}))||[1,1];ve(it,[o[0],o[1],1])}else if(i==="scalex"){var o=(a==null?void 0:a.map(function(w){return Math.max(w.value,ye)}))||[1];ve(it,[o[0],1,1])}else if(i==="scaley"){var o=(a==null?void 0:a.map(function(w){return Math.max(w.value,ye)}))||[1];ve(it,[1,o[0],1])}else if(i==="scalez"){var o=(a==null?void 0:a.map(function(w){return Math.max(w.value,ye)}))||[1];ve(it,[1,1,o[0]])}else if(i==="scale3d"){var o=(a==null?void 0:a.map(function(w){return Math.max(w.value,ye)}))||[1,1,1];ve(it,[o[0],o[1],o[2]])}else if(i==="translate"){var s=a||[nt,nt];ne(it,[s[0].value,s[1].value,0])}else if(i==="translatex"){var s=a||[nt];ne(it,[s[0].value,0,0])}else if(i==="translatey"){var s=a||[nt];ne(it,[0,s[0].value,0])}else if(i==="translatez"){var s=a||[nt];ne(it,[0,0,s[0].value])}else if(i==="translate3d"){var s=a||[nt,nt,nt];ne(it,[s[0].value,s[1].value,s[2].value])}else if(i==="rotate"){var u=a||[St];Jr(it,q(gt(u[0])))}else if(i==="rotatex"){var u=a||[St];Bi(it,q(gt(u[0])))}else if(i==="rotatey"){var u=a||[St];Gi(it,q(gt(u[0])))}else if(i==="rotatez"){var u=a||[St];Jr(it,q(gt(u[0])))}else if(i==="rotate3d"){var u=a||[nt,nt,nt,St];Fi(it,q(gt(u[3])),[u[0].value,u[1].value,u[2].value])}else if(i==="skew"){var l=(a==null?void 0:a.map(function(T){return T.value}))||[0,0];ir(it,q(l[0]),q(l[1]))}else if(i==="skewx"){var l=(a==null?void 0:a.map(function(w){return w.value}))||[0];ir(it,q(l[0]),0)}else if(i==="skewy"){var l=(a==null?void 0:a.map(function(w){return w.value}))||[0];ir(it,0,q(l[0]))}else if(i==="matrix"){var c=B(a.map(function(T){return T.value}),6),f=c[0],h=c[1],p=c[2],d=c[3],x=c[4],y=c[5];$r(it,f,h,0,0,p,d,0,0,0,0,1,0,x,y,0,1)}else i==="matrix3d"&&$r.apply(_i,tt([it],B(a.map(function(T){return T.value})),!1));Ui(t,t,it)}),e.setLocalTransform(t)}else e.resetLocalTransform();return e.getLocalTransform()}var ds=function(){function r(){this.parser=$n,this.parserUnmemoize=Tn,this.parserWithCSSDisabled=Tn,this.mixer=Co}return r.prototype.calculator=function(e,t,n,i){return n instanceof Et?[]:n},r.prototype.postProcessor=function(e){var t=e.parsedStyle.transform;ps(t,e)},r}(),vs=function(){function r(){this.parser=Qn,this.parserUnmemoize=So}return r.prototype.postProcessor=function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===M.kPixels&&t[1].unit===M.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds()},r}(),gs=function(){function r(){this.parser=$t,this.parserUnmemoize=pe}return r.prototype.calculator=function(e,t,n,i){return n.value},r.prototype.postProcessor=function(e){if(e.parentNode){var t=e.parentNode,n=t.renderable,i=t.sortable;n&&(n.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=fe.Z_INDEX_CHANGED)}},r}(),ys=function(){function r(){}return r.prototype.update=function(e,t){var n=e.cx,i=n===void 0?0:n,a=e.cy,o=a===void 0?0:a,s=e.r,u=s===void 0?0:s;return{cx:i,cy:o,hwidth:u,hheight:u}},r}(),ms=function(){function r(){}return r.prototype.update=function(e,t){var n=e.cx,i=n===void 0?0:n,a=e.cy,o=a===void 0?0:a,s=e.rx,u=s===void 0?0:s,l=e.ry,c=l===void 0?0:l;return{cx:i,cy:o,hwidth:u,hheight:c}},r}(),xs=function(){function r(){}return r.prototype.update=function(e){var t=e.x1,n=e.y1,i=e.x2,a=e.y2,o=Math.min(t,i),s=Math.max(t,i),u=Math.min(n,a),l=Math.max(n,a),c=s-o,f=l-u,h=c/2,p=f/2;return{cx:o+h,cy:u+p,hwidth:h,hheight:p}},r}(),Es=function(){function r(){}return r.prototype.update=function(e){var t=e.d,n=t.rect,i=n.x,a=n.y,o=n.width,s=n.height,u=o/2,l=s/2;return{cx:i+u,cy:a+l,hwidth:u,hheight:l}},r}(),Ts=function(){function r(){}return r.prototype.update=function(e){if(e.points&&ia(e.points.points)){var t=e.points.points,n=Math.min.apply(Math,tt([],B(t.map(function(f){return f[0]})),!1)),i=Math.max.apply(Math,tt([],B(t.map(function(f){return f[0]})),!1)),a=Math.min.apply(Math,tt([],B(t.map(function(f){return f[1]})),!1)),o=Math.max.apply(Math,tt([],B(t.map(function(f){return f[1]})),!1)),s=i-n,u=o-a,l=s/2,c=u/2;return{cx:n+l,cy:a+c,hwidth:l,hheight:c}}return{cx:0,cy:0,hwidth:0,hheight:0}},r}(),Ps=function(){function r(){}return r.prototype.update=function(e,t){var n=e.x,i=n===void 0?0:n,a=e.y,o=a===void 0?0:a,s=e.src,u=e.width,l=u===void 0?0:u,c=e.height,f=c===void 0?0:c,h=l,p=f;return s&&!Bt(s)&&(h||(h=s.width,e.width=h),p||(p=s.height,e.height=p)),{cx:i+h/2,cy:o+p/2,hwidth:h/2,hheight:p/2}},r}(),ws=function(){function r(e){this.globalRuntime=e}return r.prototype.isReadyToMeasure=function(e,t){var n=e.text,i=e.textAlign,a=e.textBaseline,o=e.fontSize,s=e.fontStyle,u=e.fontWeight,l=e.fontVariant,c=e.lineWidth;return P.enableCSSParsing?n&&o&&s&&u&&l&&i&&a&&!rt(c):n},r.prototype.update=function(e,t){var n,i,a=e.text,o=e.textAlign,s=o===void 0?"start":o,u=e.lineWidth,l=u===void 0?1:u,c=e.textBaseline,f=c===void 0?"alphabetic":c,h=e.dx,p=h===void 0?0:h,d=e.dy,x=d===void 0?0:d,y=e.x,T=y===void 0?0:y,w=e.y,O=w===void 0?0:w;if(!this.isReadyToMeasure(e,t))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var L=(((i=(n=t==null?void 0:t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,E=this.globalRuntime.textService.measureText(a,e,L);e.metrics=E;var v=E.width,g=E.height,m=E.lineHeight,N=E.fontProperties,S=v/2,C=g/2,k=T+S;s==="center"||s==="middle"?k+=l/2-S:(s==="right"||s==="end")&&(k+=l-S*2);var I=O-C;return f==="middle"?I+=C:f==="top"||f==="hanging"?I+=C*2:f==="alphabetic"?I+=this.globalRuntime.enableCSSParsing?m-N.ascent:0:(f==="bottom"||f==="ideographic")&&(I+=0),p&&(k+=p),x&&(I+=x),{cx:k,cy:I,hwidth:S,hheight:C}},r}(),Cs=function(){function r(){}return r.prototype.update=function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0}},r}();function Ss(r){return!!r.type}var Dr=function(){function r(e){this.eventPhase=r.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ft,this.page=new ft,this.canvas=new ft,this.viewport=new ft,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return Object.defineProperty(r.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),r.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(r.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),r.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},r.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.initEvent=function(){},r.prototype.initUIEvent=function(){},r.prototype.clone=function(){throw new Error(j)},r}(),ii=function(r){z(e,r);function e(){var t=r.apply(this,tt([],B(arguments),!1))||this;return t.client=new ft,t.movement=new ft,t.offset=new ft,t.global=new ft,t.screen=new ft,t}return Object.defineProperty(e.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)},e.prototype.initMouseEvent=function(){throw new Error(j)},e}(Dr),Cr=function(r){z(e,r);function e(){var t=r.apply(this,tt([],B(arguments),!1))||this;return t.width=0,t.height=0,t.isPrimary=!1,t}return e.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},e.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},e.prototype.clone=function(){return this.manager.clonePointerEvent(this)},e}(ii),Sr=function(r){z(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},e}(ii),pt=function(r){z(e,r);function e(t,n){var i=r.call(this,null)||this;return i.type=t,i.detail=n,Object.assign(i,n),i}return e}(Dr),Mn=":",ai=function(){function r(){this.emitter=new Mr}return r.prototype.on=function(e,t,n){return this.addEventListener(e,t,n),this},r.prototype.addEventListener=function(e,t,n){var i=Qr(n)&&n||Be(n)&&n.capture,a=Be(n)&&n.once,o=oe(t)?void 0:t,s=!1,u="";if(e.indexOf(Mn)>-1){var l=B(e.split(Mn),2),c=l[0],f=l[1];e=f,u=c,s=!0}if(e=i?"".concat(e,"capture"):e,t=oe(t)?t:t.handleEvent,s){var h=t;t=function(){for(var p,d=[],x=0;x<arguments.length;x++)d[x]=arguments[x];((p=d[0].target)===null||p===void 0?void 0:p.name)===u&&h.apply(void 0,tt([],B(d),!1))}}return a?this.emitter.once(e,t,o):this.emitter.on(e,t,o),this},r.prototype.off=function(e,t,n){return e?this.removeEventListener(e,t,n):this.removeAllEventListeners(),this},r.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},r.prototype.removeEventListener=function(e,t,n){var i=Qr(n)&&n||Be(n)&&n.capture,a=oe(t)?void 0:t;return e=i?"".concat(e,"capture"):e,t=oe(t)?t:t==null?void 0:t.handleEvent,this.emitter.off(e,t,a),this},r.prototype.emit=function(e,t){this.dispatchEvent(new pt(e,t))},r.prototype.dispatchEvent=function(e,t){var n,i;if(t===void 0&&(t=!1),!Ss(e))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var a;if(this.document?a=this:this.defaultView?a=this.defaultView:a=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView,a){if(e.manager=a.getEventService()||null,!e.manager)return!1;e.defaultPrevented=!1,e.path=[],t||(e.target=this),(i=e.manager)===null||i===void 0||i.dispatchEvent(e,e.type,t)}return!e.defaultPrevented},r}(),ut=function(r){z(e,r);function e(){var t=r.call(this)||this;return t.shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t}return e.isNode=function(t){return!!t.childNodes},Object.defineProperty(e.prototype,"textContent",{get:function(){var t,n,i="";this.nodeName===A.TEXT&&(i+=this.style.text);try{for(var a=qt(this.childNodes),o=a.next();!o.done;o=a.next()){var s=o.value;s.nodeName===A.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},set:function(t){var n=this;this.childNodes.slice().forEach(function(i){n.removeChild(i)}),this.nodeName===A.TEXT&&(this.style.text="".concat(t))},enumerable:!1,configurable:!0}),e.prototype.getRootNode=function(t){return t===void 0&&(t={}),this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this},e.prototype.hasChildNodes=function(){return this.childNodes.length>0},e.prototype.isDefaultNamespace=function(t){throw new Error(j)},e.prototype.lookupNamespaceURI=function(t){throw new Error(j)},e.prototype.lookupPrefix=function(t){throw new Error(j)},e.prototype.normalize=function(){throw new Error(j)},e.prototype.isEqualNode=function(t){return this===t},e.prototype.isSameNode=function(t){return this.isEqualNode(t)},Object.defineProperty(e.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),e.prototype.compareDocumentPosition=function(t){var n;if(t===this)return 0;for(var i=t,a=this,o=[i],s=[a];(n=i.parentNode)!==null&&n!==void 0?n:a.parentNode;)i=i.parentNode?(o.push(i.parentNode),i.parentNode):i,a=a.parentNode?(s.push(a.parentNode),a.parentNode):a;if(i!==a)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var u=o.length>s.length?o:s,l=u===o?s:o;if(u[u.length-l.length]===l[0])return u===o?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var c=u.length-l.length,f=l.length-1;f>=0;f--){var h=l[f],p=u[c+f];if(p!==h){var d=h.parentNode.childNodes;return d.indexOf(h)<d.indexOf(p)?l===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:u===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING},e.prototype.contain=function(t){return this.contains(t)},e.prototype.contains=function(t){for(var n=t;n&&this!==n;)n=n.parentNode;return!!n},e.prototype.getAncestor=function(t){for(var n=this;t>0&&n;)n=n.parentNode,t--;return n},e.prototype.forEach=function(t,n){n===void 0&&(n=!1),t(this)||(n?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(t)})},e.DOCUMENT_POSITION_DISCONNECTED=1,e.DOCUMENT_POSITION_PRECEDING=2,e.DOCUMENT_POSITION_FOLLOWING=4,e.DOCUMENT_POSITION_CONTAINS=8,e.DOCUMENT_POSITION_CONTAINED_BY=16,e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,e}(ai),Ns=2048,Ms=function(){function r(e,t){var n=this;this.globalRuntime=e,this.context=t,this.emitter=new Mr,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=at(),this.tmpVec3=K(),this.onPointerDown=function(i){var a=n.createPointerEvent(i);if(n.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")n.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;n.dispatchEvent(a,o?"rightdown":"mousedown")}var s=n.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=a.composedPath(),n.freeEvent(a)},this.onPointerUp=function(i){var a,o=wr.now(),s=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);if(n.dispatchEvent(s,"pointerup"),s.pointerType==="touch")n.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var u=s.button===2;n.dispatchEvent(s,u?"rightup":"mouseup")}var l=n.trackingData(i.pointerId),c=n.findMountedTarget(l.pressTargetsByButton[i.button]),f=c;if(c&&!s.composedPath().includes(c)){for(var h=c;h&&!s.composedPath().includes(h);){if(s.currentTarget=h,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")n.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var u=s.button===2;n.notifyTarget(s,u?"rightupoutside":"mouseupoutside")}ut.isNode(h)&&(h=h.parentNode)}delete l.pressTargetsByButton[i.button],f=h}if(f){var p=n.clonePointerEvent(s,"click");p.target=f,p.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:p.target,timeStamp:o});var d=l.clicksByButton[i.button];d.target===p.target&&o-d.timeStamp<200?++d.clickCount:d.clickCount=1,d.target=p.target,d.timeStamp=o,p.detail=d.clickCount,!((a=s.detail)===null||a===void 0)&&a.preventClick||(!n.context.config.useNativeClickEvent&&(p.pointerType==="mouse"||p.pointerType==="touch")&&n.dispatchEvent(p,"click"),n.dispatchEvent(p,"pointertap")),n.freeEvent(p)}n.freeEvent(s)},this.onPointerMove=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0),o=a.pointerType==="mouse"||a.pointerType==="pen",s=n.trackingData(i.pointerId),u=n.findMountedTarget(s.overTargets);if(s.overTargets&&u!==a.target){var l=i.type==="mousemove"?"mouseout":"pointerout",c=n.createPointerEvent(i,l,u||void 0);if(n.dispatchEvent(c,"pointerout"),o&&n.dispatchEvent(c,"mouseout"),!a.composedPath().includes(u)){var f=n.createPointerEvent(i,"pointerleave",u||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!a.composedPath().includes(f.target);)f.currentTarget=f.target,n.notifyTarget(f),o&&n.notifyTarget(f,"mouseleave"),ut.isNode(f.target)&&(f.target=f.target.parentNode);n.freeEvent(f)}n.freeEvent(c)}if(u!==a.target){var h=i.type==="mousemove"?"mouseover":"pointerover",p=n.clonePointerEvent(a,h);n.dispatchEvent(p,"pointerover"),o&&n.dispatchEvent(p,"mouseover");for(var d=u&&ut.isNode(u)&&u.parentNode;d&&d!==(ut.isNode(n.rootTarget)&&n.rootTarget.parentNode)&&d!==a.target;)d=d.parentNode;var x=!d||d===(ut.isNode(n.rootTarget)&&n.rootTarget.parentNode);if(x){var y=n.clonePointerEvent(a,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==u&&y.target!==(ut.isNode(n.rootTarget)&&n.rootTarget.parentNode);)y.currentTarget=y.target,n.notifyTarget(y),o&&n.notifyTarget(y,"mouseenter"),ut.isNode(y.target)&&(y.target=y.target.parentNode);n.freeEvent(y)}n.freeEvent(p)}n.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&n.dispatchEvent(a,"touchmove"),o&&(n.dispatchEvent(a,"mousemove"),n.cursor=n.getCursor(a.target)),s.overTargets=a.composedPath(),n.freeEvent(a)},this.onPointerOut=function(i){var a=n.trackingData(i.pointerId);if(a.overTargets){var o=i.pointerType==="mouse"||i.pointerType==="pen",s=n.findMountedTarget(a.overTargets),u=n.createPointerEvent(i,"pointerout",s||void 0);n.dispatchEvent(u),o&&n.dispatchEvent(u,"mouseout");var l=n.createPointerEvent(i,"pointerleave",s||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(ut.isNode(n.rootTarget)&&n.rootTarget.parentNode);)l.currentTarget=l.target,n.notifyTarget(l),o&&n.notifyTarget(l,"mouseleave"),ut.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=null,n.freeEvent(u),n.freeEvent(l)}n.cursor=null},this.onPointerOver=function(i){var a=n.trackingData(i.pointerId),o=n.createPointerEvent(i),s=o.pointerType==="mouse"||o.pointerType==="pen";n.dispatchEvent(o,"pointerover"),s&&n.dispatchEvent(o,"mouseover"),o.pointerType==="mouse"&&(n.cursor=n.getCursor(o.target));var u=n.clonePointerEvent(o,"pointerenter");for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==(ut.isNode(n.rootTarget)&&n.rootTarget.parentNode);)u.currentTarget=u.target,n.notifyTarget(u),s&&n.notifyTarget(u,"mouseenter"),ut.isNode(u.target)&&(u.target=u.target.parentNode);a.overTargets=o.composedPath(),n.freeEvent(o),n.freeEvent(u)},this.onPointerUpOutside=function(i){var a=n.trackingData(i.pointerId),o=n.findMountedTarget(a.pressTargetsByButton[i.button]),s=n.createPointerEvent(i);if(o){for(var u=o;u;)s.currentTarget=u,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&n.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),ut.isNode(u)&&(u=u.parentNode);delete a.pressTargetsByButton[i.button]}n.freeEvent(s)},this.onWheel=function(i){var a=n.createWheelEvent(i);n.dispatchEvent(a),n.freeEvent(a)},this.onClick=function(i){if(n.context.config.useNativeClickEvent){var a=n.createPointerEvent(i);n.dispatchEvent(a),n.freeEvent(a)}},this.onPointerCancel=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);n.dispatchEvent(a),n.freeEvent(a)}}return r.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},r.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},r.prototype.getScale=function(){var e=this.context.contextService.getBoundingClientRect(),t=1,n=1,i=this.context.contextService.getDomElement();if(i&&e){var a=i.offsetWidth,o=i.offsetHeight;a&&o&&(t=e.width/a,n=e.height/o)}return{scaleX:t,scaleY:n,bbox:e}},r.prototype.client2Viewport=function(e){var t=this.getScale(),n=t.scaleX,i=t.scaleY,a=t.bbox;return new ft((e.x-((a==null?void 0:a.left)||0))/n,(e.y-((a==null?void 0:a.top)||0))/i)},r.prototype.viewport2Client=function(e){var t=this.getScale(),n=t.scaleX,i=t.scaleY,a=t.bbox;return new ft((e.x+((a==null?void 0:a.left)||0))*n,(e.y+((a==null?void 0:a.top)||0))*i)},r.prototype.viewport2Canvas=function(e){var t=e.x,n=e.y,i=this.rootTarget.defaultView,a=i.getCamera(),o=this.context.config,s=o.width,u=o.height,l=a.getPerspectiveInverse(),c=a.getWorldTransform(),f=Lt(this.tmpMatrix,c,l),h=It(this.tmpVec3,t/s*2-1,(1-n/u)*2-1,0);return mt(h,h,f),new ft(h[0],h[1])},r.prototype.canvas2Viewport=function(e){var t=this.rootTarget.defaultView,n=t.getCamera(),i=n.getPerspective(),a=n.getViewTransform(),o=Lt(this.tmpMatrix,i,a),s=It(this.tmpVec3,e.x,e.y,0);mt(this.tmpVec3,this.tmpVec3,o);var u=this.context.config,l=u.width,c=u.height;return new ft((s[0]+1)/2*l,(1-(s[1]+1)/2)*c)},r.prototype.setPickHandler=function(e){this.pickHandler=e},r.prototype.addEventMapping=function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(n,i){return n.priority-i.priority})},r.prototype.mapEvent=function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,i=t.length;n<i;n++)t[n].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}},r.prototype.dispatchEvent=function(e,t,n){if(!n)e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t);else{e.eventPhase=e.AT_TARGET;var i=this.rootTarget.defaultView||null;e.currentTarget=i,this.notifyListeners(e,t)}this.emitter.emit(t||e.type,e)},r.prototype.propagate=function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var i=n.length-1;i>=1;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){var a=n.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var i=a+1;i<n.length;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}},r.prototype.propagationPath=function(e){var t=[e],n=this.rootTarget.defaultView||null;if(n&&n===e)return t.unshift(n.document),t;for(var i=0;i<Ns&&e!==this.rootTarget;i++)ut.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return n&&t.push(n),t},r.prototype.hitTest=function(e){var t=e.viewportX,n=e.viewportY,i=this.context.config,a=i.width,o=i.height,s=i.disableHitTesting;return t<0||n<0||t>a||n>o?null:!s&&this.pickHandler(e)||this.rootTarget||null},r.prototype.isNativeEventFromCanvas=function(e,t){var n=t==null?void 0:t.target;if(n!=null&&n.shadowRoot&&(n=t.composedPath()[0]),n){if(n===e)return!0;if(e&&e.contains)return e.contains(n)}return t!=null&&t.composedPath?t.composedPath().indexOf(e)>-1:!1},r.prototype.getExistedHTML=function(e){var t,n;if(e.nativeEvent.composedPath)try{for(var i=qt(e.nativeEvent.composedPath()),a=i.next();!a.done;a=i.next()){var o=a.value,s=this.nativeHTMLMap.get(o);if(s)return s}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return null},r.prototype.pickTarget=function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})},r.prototype.createPointerEvent=function(e,t,n,i){var a=this.allocateEvent(Cr);this.copyPointerData(e,a),this.copyMouseData(e,a),this.copyData(e,a),a.nativeEvent=e.nativeEvent,a.originalEvent=e;var o=this.getExistedHTML(a),s=this.context.contextService.getDomElement();return a.target=n??(o||this.isNativeEventFromCanvas(s,a.nativeEvent)&&this.pickTarget(a)||i),typeof t=="string"&&(a.type=t),a},r.prototype.createWheelEvent=function(e){var t=this.allocateEvent(Sr);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var n=this.getExistedHTML(t),i=this.context.contextService.getDomElement();return t.target=n||this.isNativeEventFromCanvas(i,t.nativeEvent)&&this.pickTarget(t),t},r.prototype.trackingData=function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]},r.prototype.cloneWheelEvent=function(e){var t=this.allocateEvent(Sr);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t},r.prototype.clonePointerEvent=function(e,t){var n=this.allocateEvent(Cr);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n},r.prototype.copyPointerData=function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist},r.prototype.copyMouseData=function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset)},r.prototype.copyWheelData=function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ},r.prototype.copyData=function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=wr.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport)},r.prototype.allocateEvent=function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t},r.prototype.freeEvent=function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)},r.prototype.notifyTarget=function(e,t){t=t??e.type;var n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)},r.prototype.notifyListeners=function(e,t){var n=e.currentTarget.emitter,i=n._events[t];if(i)if("fn"in i)i.once&&n.removeListener(t,i.fn,void 0,!0),i.fn.call(e.currentTarget||i.context,e);else for(var a=0;a<i.length&&!e.propagationImmediatelyStopped;a++)i[a].once&&n.removeListener(t,i[a].fn,void 0,!0),i[a].fn.call(e.currentTarget||i[a].context,e)},r.prototype.findMountedTarget=function(e){if(!e)return null;for(var t=e[e.length-1],n=e.length-2;n>=0;n--){var i=e[n];if(i===this.rootTarget||ut.isNode(i)&&i.parentNode===t)t=e[n];else break}return t},r.prototype.getCursor=function(e){for(var t=e;t;){var n=Wo(t)&&t.getAttribute("cursor");if(n)return n;t=ut.isNode(t)&&t.parentNode}},r}(),bs=function(){function r(){}return r.prototype.getOrCreateCanvas=function(e,t){if(this.canvas)return this.canvas;if(e||P.offscreenCanvas)this.canvas=e||P.offscreenCanvas,this.context=this.canvas.getContext("2d",Y({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",Y({willReadFrequently:!0},t)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",Y({willReadFrequently:!0},t))}return this.canvas.width=10,this.canvas.height=10,this.canvas},r.prototype.getOrCreateContext=function(e,t){return this.context?this.context:(this.getOrCreateCanvas(e,t),this.context)},r}(),ce;(function(r){r[r.CAMERA_CHANGED=0]="CAMERA_CHANGED",r[r.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",r[r.NONE=2]="NONE"})(ce||(ce={}));var ks=function(){function r(e,t){this.globalRuntime=e,this.context=t,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new ht,initAsync:new ss,dirtycheck:new nr,cull:new nr,beginFrame:new ht,beforeRender:new ht,render:new ht,afterRender:new ht,endFrame:new ht,destroy:new ht,pick:new us,pickSync:new nr,pointerDown:new ht,pointerUp:new ht,pointerMove:new ht,pointerOut:new ht,pointerOver:new ht,pointerWheel:new ht,pointerCancel:new ht,click:new ht}}return r.prototype.init=function(e){var t=this,n=Y(Y({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(n,t.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){t.inited=!0,e()})},r.prototype.getStats=function(){return this.stats},r.prototype.disableDirtyRectangleRendering=function(){var e=this.context.config.renderer,t=e.getConfig().enableDirtyRectangleRendering;return!t||this.context.renderingContext.renderReasons.has(ce.CAMERA_CHANGED)},r.prototype.render=function(e,t,n){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var a=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(a.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),a.renderReasons.size&&this.inited){a.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var o=a.renderReasons.size===1&&a.renderReasons.has(ce.CAMERA_CHANGED),s=!e.disableRenderHooks||!(e.disableRenderHooks&&o);s&&this.renderDisplayObject(a.root,e,a),this.hooks.beginFrame.call(t),s&&a.renderListCurrentFrame.forEach(function(u){i.hooks.beforeRender.call(u),i.hooks.render.call(u),i.hooks.afterRender.call(u)}),this.hooks.endFrame.call(t),a.renderListCurrentFrame=[],a.renderReasons.clear(),n()}},r.prototype.renderDisplayObject=function(e,t,n){var i=this,a=t.renderer.getConfig(),o=a.enableDirtyCheck,s=a.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(e);var u=e.renderable,l=o?u.dirty||n.dirtyRectangleRenderingDisabled?e:null:e;if(l){var c=s?this.hooks.cull.call(l,this.context.camera):l;c&&(this.stats.rendered++,n.renderListCurrentFrame.push(c))}e.renderable.dirty=!1,e.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var f=e.sortable;f.dirty&&(this.sort(e,f),f.dirty=!1,f.dirtyChildren=[],f.dirtyReason=void 0),(f.sorted||e.childNodes).forEach(function(h){i.renderDisplayObject(h,t,n)})},r.prototype.sort=function(e,t){t.sorted&&t.dirtyReason!==fe.Z_INDEX_CHANGED?t.dirtyChildren.forEach(function(n){var i=e.childNodes.indexOf(n);if(i===-1){var a=t.sorted.indexOf(n);a>=0&&t.sorted.splice(a,1)}else if(t.sorted.length===0)t.sorted.push(n);else{var o=zo(t.sorted,n);t.sorted.splice(o,0,n)}}):t.sorted=e.childNodes.slice().sort(jn)},r.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},r.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(ce.DISPLAY_OBJECT_CHANGED)},r}(),As=/\[\s*(.*)=(.*)\s*\]/,Rs=function(){function r(){}return r.prototype.selectOne=function(e,t){var n=this;if(e.startsWith("."))return t.find(function(s){return((s==null?void 0:s.classList)||[]).indexOf(n.getIdOrClassname(e))>-1});if(e.startsWith("#"))return t.find(function(s){return s.id===n.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),a=i.name,o=i.value;return a?t.find(function(s){return t!==s&&(a==="name"?s.name===o:n.attributeToString(s,a)===o)}):null}else return t.find(function(s){return t!==s&&s.nodeName===e})},r.prototype.selectAll=function(e,t){var n=this;if(e.startsWith("."))return t.findAll(function(s){return t!==s&&((s==null?void 0:s.classList)||[]).indexOf(n.getIdOrClassname(e))>-1});if(e.startsWith("#"))return t.findAll(function(s){return t!==s&&s.id===n.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),a=i.name,o=i.value;return a?t.findAll(function(s){return t!==s&&(a==="name"?s.name===o:n.attributeToString(s,a)===o)}):[]}else return t.findAll(function(s){return t!==s&&s.nodeName===e})},r.prototype.is=function(e,t){if(e.startsWith("."))return t.className===this.getIdOrClassname(e);if(e.startsWith("#"))return t.id===this.getIdOrClassname(e);if(e.startsWith("[")){var n=this.getAttribute(e),i=n.name,a=n.value;return i==="name"?t.name===a:this.attributeToString(t,i)===a}else return t.nodeName===e},r.prototype.getIdOrClassname=function(e){return e.substring(1)},r.prototype.getAttribute=function(e){var t=e.match(As),n="",i="";return t&&t.length>2&&(n=t[1].replace(/"/g,""),i=t[2].replace(/"/g,"")),{name:n,value:i}},r.prototype.attributeToString=function(e,t){if(!e.getAttribute)return"";var n=e.getAttribute(t);return rt(n)?"":n.toString?n.toString():""},r}(),Qt=function(r){z(e,r);function e(t,n,i,a,o,s,u,l){var c=r.call(this,null)||this;return c.relatedNode=n,c.prevValue=i,c.newValue=a,c.attrName=o,c.attrChange=s,c.prevParsedValue=u,c.newParsedValue=l,c.type=t,c}return e.ADDITION=2,e.MODIFICATION=1,e.REMOVAL=3,e}(Dr),ot;(function(r){r.REPARENT="reparent",r.DESTROY="destroy",r.ATTR_MODIFIED="DOMAttrModified",r.INSERTED="DOMNodeInserted",r.REMOVED="removed",r.MOUNTED="DOMNodeInsertedIntoDocument",r.UNMOUNTED="DOMNodeRemovedFromDocument",r.BOUNDS_CHANGED="bounds-changed",r.CULLED="culled"})(ot||(ot={}));function bn(r){var e=r.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}var Os=new Qt(ot.REPARENT,null,"","","",0,"",""),Is=function(){function r(e){var t=this;this.runtime=e,this.pendingEvents=[],this.boundsChangedEvent=new pt(ot.BOUNDS_CHANGED),this.rotate=function(){var n=yt();return function(i,a,o,s,u){o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=!0),typeof a=="number"&&(a=V(a,o,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)t.rotateLocal(i,a);else{var c=yt();Ae(c,a[0],a[1],a[2]);var f=t.getRotation(i),h=t.getRotation(i.parentNode);Re(n,h),ze(n,n),Te(c,n,c),Te(l.localRotation,c,f),Zr(l.localRotation,l.localRotation),u&&t.dirtifyLocal(i,l)}}}(),this.rotateLocal=function(){var n=yt();return function(i,a,o,s,u){o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=!0),typeof a=="number"&&(a=V(a,o,s));var l=i.transformable;Ae(n,a[0],a[1],a[2]),qr(l.localRotation,l.localRotation,n),u&&t.dirtifyLocal(i,l)}}(),this.setEulerAngles=function(){var n=yt();return function(i,a,o,s,u){o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=!0),typeof a=="number"&&(a=V(a,o,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)t.setLocalEulerAngles(i,a);else{Ae(l.localRotation,a[0],a[1],a[2]);var c=t.getRotation(i.parentNode);Re(n,ze(yt(),c)),qr(l.localRotation,l.localRotation,n),u&&t.dirtifyLocal(i,l)}}}(),this.translateLocal=function(){return function(n,i,a,o,s){a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=!0),typeof i=="number"&&(i=V(i,a,o));var u=n.transformable;de(i,K())||(Oi(i,i,u.localRotation),fr(u.localPosition,u.localPosition,i),s&&t.dirtifyLocal(n,u))}}(),this.setPosition=function(){var n=at(),i=K();return function(a,o,s){s===void 0&&(s=!0);var u=a.transformable;if(i[0]=o[0],i[1]=o[1],i[2]=o[2]||0,!de(t.getPosition(a),i)){if(Yt(u.position,i),a.parentNode===null||!a.parentNode.transformable)Yt(u.localPosition,i);else{var l=a.parentNode.transformable;hr(n,l.worldTransform),Ut(n,n),mt(u.localPosition,i,n)}s&&t.dirtifyLocal(a,u)}}}(),this.setLocalPosition=function(){var n=K();return function(i,a,o){o===void 0&&(o=!0);var s=i.transformable;n[0]=a[0],n[1]=a[1],n[2]=a[2]||0,!de(s.localPosition,n)&&(Yt(s.localPosition,n),o&&t.dirtifyLocal(i,s))}}(),this.translate=function(){var n=K(),i=K(),a=K();return function(o,s,u,l,c){u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=!0),typeof s=="number"&&(s=It(i,s,u,l)),!de(s,n)&&(fr(a,t.getPosition(o),s),t.setPosition(o,a,c))}}(),this.setRotation=function(){var n=yt();return function(i,a,o,s,u,l){l===void 0&&(l=!0);var c=i.transformable;if(typeof a=="number"&&(a=Ke(a,o,s,u)),i.parentNode===null||!i.parentNode.transformable)t.setLocalRotation(i,a);else{var f=t.getRotation(i.parentNode);Re(n,f),ze(n,n),Te(c.localRotation,n,a),Zr(c.localRotation,c.localRotation),l&&t.dirtifyLocal(i,c)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var n=at(),i=K(),a=Ke(0,0,0,1);return function(o){var s=o.localSkew[0]!==0||o.localSkew[1]!==0;if(s){if(De(o.localTransform,o.localRotation,o.localPosition,V(1,1,1),o.origin),o.localSkew[0]!==0||o.localSkew[1]!==0){var u=Ve(n);u[4]=Math.tan(o.localSkew[0]),u[1]=Math.tan(o.localSkew[1]),Lt(o.localTransform,o.localTransform,u)}var l=De(n,a,i,o.localScale,o.origin);Lt(o.localTransform,o.localTransform,l)}else De(o.localTransform,o.localRotation,o.localPosition,o.localScale,o.origin)}}()}return r.prototype.matches=function(e,t){return this.runtime.sceneGraphSelector.is(e,t)},r.prototype.querySelector=function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t)},r.prototype.querySelectorAll=function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t)},r.prototype.attach=function(e,t,n){var i,a=!1;e.parentNode&&(a=e.parentNode!==t,this.detach(e)),e.parentNode=t,rt(n)?e.parentNode.childNodes.push(e):e.parentNode.childNodes.splice(n,0,e);var o=t.sortable;(!((i=o==null?void 0:o.sorted)===null||i===void 0)&&i.length||e.parsedStyle.zIndex)&&(o.dirtyChildren.indexOf(e)===-1&&o.dirtyChildren.push(e),o.dirty=!0,o.dirtyReason=fe.ADDED);var s=e.transformable;s&&this.dirtifyWorld(e,s),s.frozen&&this.unfreezeParentToRoot(e),a&&e.dispatchEvent(Os)},r.prototype.detach=function(e){var t,n;if(e.parentNode){var i=e.transformable,a=e.parentNode.sortable;(!((t=a==null?void 0:a.sorted)===null||t===void 0)&&t.length||!((n=e.style)===null||n===void 0)&&n.zIndex)&&(a.dirtyChildren.indexOf(e)===-1&&a.dirtyChildren.push(e),a.dirty=!0,a.dirtyReason=fe.REMOVED);var o=e.parentNode.childNodes.indexOf(e);o>-1&&e.parentNode.childNodes.splice(o,1),i&&this.dirtifyWorld(e,i),e.parentNode=null}},r.prototype.getOrigin=function(e){return e.getGeometryBounds(),e.transformable.origin},r.prototype.setOrigin=function(e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=0),typeof t=="number"&&(t=[t,n,i]);var a=e.transformable;if(!(t[0]===a.origin[0]&&t[1]===a.origin[1]&&t[2]===a.origin[2])){var o=a.origin;o[0]=t[0],o[1]=t[1],o[2]=t[2]||0,this.dirtifyLocal(e,a)}},r.prototype.setLocalEulerAngles=function(e,t,n,i,a){n===void 0&&(n=0),i===void 0&&(i=0),a===void 0&&(a=!0),typeof t=="number"&&(t=V(t,n,i));var o=e.transformable;Ae(o.localRotation,t[0],t[1],t[2]),a&&this.dirtifyLocal(e,o)},r.prototype.scaleLocal=function(e,t,n){n===void 0&&(n=!0);var i=e.transformable;Ii(i.localScale,i.localScale,V(t[0],t[1],t[2]||1)),n&&this.dirtifyLocal(e,i)},r.prototype.setLocalScale=function(e,t,n){n===void 0&&(n=!0);var i=e.transformable,a=V(t[0],t[1],t[2]||i.localScale[2]);de(a,i.localScale)||(Yt(i.localScale,a),n&&this.dirtifyLocal(e,i))},r.prototype.setLocalRotation=function(e,t,n,i,a,o){o===void 0&&(o=!0),typeof t=="number"&&(t=Ke(t,n,i,a));var s=e.transformable;Re(s.localRotation,t),o&&this.dirtifyLocal(e,s)},r.prototype.setLocalSkew=function(e,t,n){typeof t=="number"&&(t=Li(t,n));var i=e.transformable;Di(i.localSkew,t),this.dirtifyLocal(e,i)},r.prototype.dirtifyLocal=function(e,t){t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtifyWorld(e,t))},r.prototype.dirtifyWorld=function(e,t){t.dirtyFlag||this.unfreezeParentToRoot(e),this.dirtifyWorldInternal(e,t),this.dirtifyToRoot(e,!0)},r.prototype.triggerPendingEvents=function(){var e=this,t=new Set,n=function(i,a){i.isConnected&&!t.has(i.entity)&&(e.boundsChangedEvent.detail=a,e.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(e.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0),t.add(i.entity))};this.pendingEvents.forEach(function(i){var a=B(i,2),o=a[0],s=a[1];s.affectChildren?o.forEach(function(u){n(u,s)}):n(o,s)}),this.clearPendingEvents(),t.clear()},r.prototype.clearPendingEvents=function(){this.pendingEvents=[]},r.prototype.dirtifyToRoot=function(e,t){t===void 0&&(t=!1);var n=e;for(n.renderable&&(n.renderable.dirty=!0);n;)bn(n),n=n.parentNode;t&&e.forEach(function(i){bn(i)}),this.informDependentDisplayObjects(e),this.pendingEvents.push([e,{affectChildren:t}])},r.prototype.updateDisplayObjectDependency=function(e,t,n,i){if(t&&t!==n){var a=this.displayObjectDependencyMap.get(t);if(a&&a[e]){var o=a[e].indexOf(i);a[e].splice(o,1)}}if(n){var s=this.displayObjectDependencyMap.get(n);s||(this.displayObjectDependencyMap.set(n,{}),s=this.displayObjectDependencyMap.get(n)),s[e]||(s[e]=[]),s[e].push(i)}},r.prototype.informDependentDisplayObjects=function(e){var t=this,n=this.displayObjectDependencyMap.get(e);n&&Object.keys(n).forEach(function(i){n[i].forEach(function(a){t.dirtifyToRoot(a,!0),a.dispatchEvent(new Qt(ot.ATTR_MODIFIED,a,t,t,i,Qt.MODIFICATION,t,t)),a.isCustomElement&&a.isConnected&&a.attributeChangedCallback&&a.attributeChangedCallback(i,t,t)})})},r.prototype.getPosition=function(e){var t=e.transformable;return lr(t.position,this.getWorldTransform(e,t))},r.prototype.getRotation=function(e){var t=e.transformable;return cr(t.rotation,this.getWorldTransform(e,t))},r.prototype.getScale=function(e){var t=e.transformable;return Fe(t.scaling,this.getWorldTransform(e,t))},r.prototype.getWorldTransform=function(e,t){return t===void 0&&(t=e.transformable),!t.localDirtyFlag&&!t.dirtyFlag||(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.sync(e,t)),t.worldTransform},r.prototype.getLocalPosition=function(e){return e.transformable.localPosition},r.prototype.getLocalRotation=function(e){return e.transformable.localRotation},r.prototype.getLocalScale=function(e){return e.transformable.localScale},r.prototype.getLocalSkew=function(e){return e.transformable.localSkew},r.prototype.getLocalTransform=function(e){var t=e.transformable;return t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.localTransform},r.prototype.setLocalTransform=function(e,t){var n=lr(K(),t),i=cr(yt(),t),a=Fe(K(),t);this.setLocalScale(e,a,!1),this.setLocalPosition(e,n,!1),this.setLocalRotation(e,i,void 0,void 0,void 0,!1),this.dirtifyLocal(e,e.transformable)},r.prototype.resetLocalTransform=function(e){this.setLocalScale(e,[1,1,1]),this.setLocalPosition(e,[0,0,0]),this.setLocalEulerAngles(e,[0,0,0]),this.setLocalSkew(e,[0,0])},r.prototype.getTransformedGeometryBounds=function(e,t,n){t===void 0&&(t=!1);var i=this.getGeometryBounds(e,t);if(ct.isEmpty(i))return null;var a=n||new ct;return a.setFromTransformedAABB(i,this.getWorldTransform(e)),a},r.prototype.getGeometryBounds=function(e,t){t===void 0&&(t=!1);var n=e.geometry;n.dirty&&P.styleValueRegistry.updateGeometry(e);var i=t?n.renderBounds:n.contentBounds||null;return i||new ct},r.prototype.getBounds=function(e,t){var n=this;t===void 0&&(t=!1);var i=e.renderable;if(!i.boundsDirty&&!t&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&t&&i.renderBounds)return i.renderBounds;var a=t?i.renderBounds:i.bounds,o=this.getTransformedGeometryBounds(e,t,a),s=e.childNodes;if(s.forEach(function(c){var f=n.getBounds(c,t);f&&(o?o.add(f):(o=a||new ct,o.update(f.center,f.halfExtents)))}),o||(o=new ct),t){var u=Ko(e);if(u){var l=u.parsedStyle.clipPath.getBounds(t);o?l&&(o=l.intersection(o)):o.update(l.center,l.halfExtents)}}return t?(i.renderBounds=o,i.renderBoundsDirty=!1):(i.bounds=o,i.boundsDirty=!1),o},r.prototype.getLocalBounds=function(e){if(e.parentNode){var t=at();e.parentNode.transformable&&(t=Ut(at(),this.getWorldTransform(e.parentNode)));var n=this.getBounds(e);if(!ct.isEmpty(n)){var i=new ct;return i.setFromTransformedAABB(n,t),i}}return this.getBounds(e)},r.prototype.getBoundingClientRect=function(e){var t,n,i,a=this.getGeometryBounds(e);ct.isEmpty(a)||(i=new ct,i.setFromTransformedAABB(a,this.getWorldTransform(e)));var o=(n=(t=e.ownerDocument)===null||t===void 0?void 0:t.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect();if(i){var s=B(i.getMin(),2),u=s[0],l=s[1],c=B(i.getMax(),2),f=c[0],h=c[1];return new Jt(u+((o==null?void 0:o.left)||0),l+((o==null?void 0:o.top)||0),f-u,h-l)}return new Jt((o==null?void 0:o.left)||0,(o==null?void 0:o.top)||0,0,0)},r.prototype.dirtifyWorldInternal=function(e,t){var n=this;if(!t.dirtyFlag){t.dirtyFlag=!0,t.frozen=!1,e.childNodes.forEach(function(a){var o=a.transformable;o.dirtyFlag||n.dirtifyWorldInternal(a,o)});var i=e.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},r.prototype.syncHierarchy=function(e){var t=e.transformable;if(!t.frozen){t.frozen=!0,(t.localDirtyFlag||t.dirtyFlag)&&this.sync(e,t);for(var n=e.childNodes,i=0;i<n.length;i++)this.syncHierarchy(n[i])}},r.prototype.sync=function(e,t){if(t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.dirtyFlag){var n=e.parentNode,i=n&&n.transformable;n===null||!i?hr(t.worldTransform,t.localTransform):Lt(t.worldTransform,i.worldTransform,t.localTransform),t.dirtyFlag=!1}},r.prototype.unfreezeParentToRoot=function(e){for(var t=e.parentNode;t;){var n=t.transformable;n&&(n.frozen=!1),t=t.parentNode}},r}(),Zt={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},kn=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Ls=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,Ds=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,Bs=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,Gs=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,Fs=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,_s=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,Us=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,Ys=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,Xs=new RegExp("".concat(Ls.source,"|").concat(Bs.source,"|").concat(Fs.source,"|").concat(Us.source)),Vs=new RegExp("".concat(Ds.source,"|").concat(Gs.source,"|").concat(_s.source,"|").concat(Ys.source)),Hs=function(){function r(e){var t=this;this.runtime=e,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(n,i){return t.isBreakingSpace(i)?!1:!!(n&&(Vs.exec(i)||Xs.exec(n)))},this.trimByKinsokuShorui=function(n){var i=tt([],B(n),!1),a=i[i.length-2];if(!a)return n;var o=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=o+i[i.length-1],i}}return r.prototype.measureFont=function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var n={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),a=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});a.font=e;var o=Zt.MetricsString+Zt.BaselineSymbol,s=Math.ceil(a.measureText(o).width),u=Math.ceil(a.measureText(Zt.BaselineSymbol).width),l=Zt.HeightMultiplier*u;u=u*Zt.BaselineMultiplier|0,i.width=s,i.height=l,a.fillStyle="#f00",a.fillRect(0,0,s,l),a.font=e,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(o,0,u);var c=a.getImageData(0,0,s||1,l||1).data,f=c.length,h=s*4,p=0,d=0,x=!1;for(p=0;p<u;++p){for(var y=0;y<h;y+=4)if(c[d+y]!==255){x=!0;break}if(!x)d+=h;else break}for(n.ascent=u-p,d=f-h,x=!1,p=l;p>u;--p){for(var y=0;y<h;y+=4)if(c[d+y]!==255){x=!0;break}if(!x)d-=h;else break}return n.descent=p-u,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[e]=n,n},r.prototype.measureText=function(e,t,n){var i=t.fontSize,a=i===void 0?16:i,o=t.wordWrap,s=o===void 0?!1:o,u=t.lineHeight,l=t.lineWidth,c=l===void 0?1:l,f=t.textBaseline,h=f===void 0?"alphabetic":f,p=t.textAlign,d=p===void 0?"start":p,x=t.letterSpacing,y=x===void 0?0:x,T=t.textPath;t.textPathSide,t.textPathStartOffset;var w=t.leading,O=w===void 0?0:w,L=fs(t),E=this.measureFont(L,n);E.fontSize===0&&(E.fontSize=a,E.ascent=a);var v=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);v.font=L,t.isOverflowing=!1;var g=s?this.wordWrap(e,t,n):e,m=g.split(/(?:\r\n|\r|\n)/),N=new Array(m.length),S=0;if(T){T.getTotalLength();for(var C=0;C<m.length;C++)var k=v.measureText(m[C]).width+(m[C].length-1)*y}else{for(var C=0;C<m.length;C++){var I=v.measureText(m[C]).width+(m[C].length-1)*y;N[C]=I,S=Math.max(S,I)}var k=S+c,D=u||E.fontSize+c,F=Math.max(D,E.fontSize+c)+(m.length-1)*(D+O);D+=O;var X=0;return h==="middle"?X=-F/2:h==="bottom"||h==="alphabetic"||h==="ideographic"?X=-F:(h==="top"||h==="hanging")&&(X=0),{font:L,width:k,height:F,lines:m,lineWidths:N,lineHeight:D,maxLineWidth:S,fontProperties:E,lineMetrics:N.map(function(_,U){var st=0;return d==="center"||d==="middle"?st-=_/2:(d==="right"||d==="end")&&(st-=_),new Jt(st-c/2,X+U*D,_+c,D)})}}},r.prototype.setGraphemeOnPath=function(){},r.prototype.wordWrap=function(e,t,n){var i=this,a=t.wordWrapWidth,o=a===void 0?0:a,s=t.letterSpacing,u=s===void 0?0:s,l=t.maxLines,c=l===void 0?1/0:l,f=t.textOverflow,h=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),p=o+u,d="";f==="ellipsis"?d="...":f&&f!=="clip"&&(d=f);for(var x=[],y=0,T=0,w={},O=function(X){return i.getFromCache(X,u,w,h)},L=Array.from(d).reduce(function(X,R){return X+O(R)},0),E=Array.from(e),v=0;v<E.length;v++){var g=E[v],m=e[v-1],N=e[v+1],S=O(g);if(this.isNewline(g)){if(y++,y>=c){t.isOverflowing=!0;break}T=0,x[y]="";continue}if(T>0&&T+S>p){if(y+1>=c){if(t.isOverflowing=!0,L>0&&L<=p){for(var C=x[y].length,k=0,I=C,D=0;D<C;D++){var F=O(x[y][D]);if(k+F+L>p){I=D;break}k+=F}x[y]=(x[y]||"").slice(0,I)+d}break}if(y++,T=0,x[y]="",this.isBreakingSpace(g))continue;this.canBreakInLastChar(g)||(x=this.trimToBreakable(x),T=this.sumTextWidthByCache(x[y]||"",w)),this.shouldBreakByKinsokuShorui(g,N)&&(x=this.trimByKinsokuShorui(x),T+=O(m||""))}T+=S,x[y]=(x[y]||"")+g}return x.join(`
`)},r.prototype.isBreakingSpace=function(e){return typeof e!="string"?!1:Zt.BreakingSpaces.indexOf(e.charCodeAt(0))>=0},r.prototype.isNewline=function(e){return typeof e!="string"?!1:Zt.Newlines.indexOf(e.charCodeAt(0))>=0},r.prototype.trimToBreakable=function(e){var t=tt([],B(e),!1),n=t[t.length-2],i=this.findBreakableIndex(n);if(i===-1||!n)return t;var a=n.slice(i,i+1),o=this.isBreakingSpace(a),s=i+1,u=i+(o?0:1);return t[t.length-1]+=n.slice(s,n.length),t[t.length-2]=n.slice(0,u),t},r.prototype.canBreakInLastChar=function(e){return!(e&&kn.test(e))},r.prototype.sumTextWidthByCache=function(e,t){return e.split("").reduce(function(n,i){if(!t[i])throw Error("cannot count the word without cache");return n+t[i]},0)},r.prototype.findBreakableIndex=function(e){for(var t=e.length-1;t>=0;t--)if(!kn.test(e[t]))return t;return-1},r.prototype.getFromCache=function(e,t,n,i){var a=n[e];if(typeof a!="number"){var o=e.length*t;a=i.measureText(e).width+o,n[e]=a}return a},r}(),P={},Ws=function(){var r,e=new Ps,t=new Ts;return r={},r[A.CIRCLE]=new ys,r[A.ELLIPSE]=new ms,r[A.RECT]=e,r[A.IMAGE]=e,r[A.GROUP]=new Cs,r[A.LINE]=new xs,r[A.TEXT]=new ws(P),r[A.POLYLINE]=t,r[A.POLYGON]=t,r[A.PATH]=new Es,r[A.HTML]=null,r[A.MESH]=null,r}(),zs=function(){var r,e=new Ao,t=new Pr;return r={},r[b.PERCENTAGE]=null,r[b.NUMBER]=new Do,r[b.ANGLE]=new bo,r[b.DEFINED_PATH]=new ko,r[b.PAINT]=e,r[b.COLOR]=e,r[b.FILTER]=new Ro,r[b.LENGTH]=t,r[b.LENGTH_PERCENTAGE]=t,r[b.LENGTH_PERCENTAGE_12]=new Oo,r[b.LENGTH_PERCENTAGE_14]=new Io,r[b.COORDINATE]=new Pr,r[b.OFFSET_DISTANCE]=new Bo,r[b.OPACITY_VALUE]=new Go,r[b.PATH]=new Fo,r[b.LIST_OF_POINTS]=new _o,r[b.SHADOW_BLUR]=new Uo,r[b.TEXT]=new Yo,r[b.TEXT_TRANSFORM]=new Xo,r[b.TRANSFORM]=new ds,r[b.TRANSFORM_ORIGIN]=new vs,r[b.Z_INDEX]=new gs,r[b.MARKER]=new Lo,r}(),Ks=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};P.CameraContribution=Ta;P.AnimationTimeline=null;P.EasingFunction=null;P.offscreenCanvasCreator=new bs;P.sceneGraphSelector=new Rs;P.sceneGraphService=new Is(P);P.textService=new Hs(P);P.geometryUpdaterFactory=Ws;P.CSSPropertySyntaxFactory=zs;P.styleValueRegistry=new Mo(P);P.layoutRegistry=null;P.globalThis=Ks();P.enableCSSParsing=!1;P.enableDataset=!1;P.enableStyleSyntax=!0;P.enableAttributeDashCased=!1;P.enableSizeAttenuation=!1;var Zs=0,An=new Qt(ot.INSERTED,null,"","","",0,"",""),Rn=new Qt(ot.REMOVED,null,"","","",0,"",""),qs=new pt(ot.DESTROY),Js=function(r){z(e,r);function e(){var t=r.call(this)||this;return t.entity=Zs++,t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.cullable={strategy:xr.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.rBushNode={aabb:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.destroyed=!1,t.style={},t.computedStyle=P.enableCSSParsing?{opacity:Z,fillOpacity:Z,strokeOpacity:Z,fill:Z,stroke:Z,transform:Z,transformOrigin:Z,visibility:Z,pointerEvents:Z,lineWidth:Z,lineCap:Z,lineJoin:Z,increasedLineWidthForHitTesting:Z,fontSize:Z,fontFamily:Z,fontStyle:Z,fontWeight:Z,fontVariant:Z,textAlign:Z,textBaseline:Z,textTransform:Z,zIndex:Z,filter:Z,shadowType:Z}:null,t.parsedStyle={},t.attributes={},t}return Object.defineProperty(e.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(t){return t!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){throw new Error(j)},e.prototype.appendChild=function(t,n){var i;if(t.destroyed)throw new Error(Ea);return P.sceneGraphService.attach(t,this,n),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(t),this.isMutationObserved&&(An.relatedNode=this,t.dispatchEvent(An)),t},e.prototype.insertBefore=function(t,n){if(!n)this.appendChild(t);else{t.parentElement&&t.parentElement.removeChild(t);var i=this.childNodes.indexOf(n);i===-1?this.appendChild(t):this.appendChild(t,i)}return t},e.prototype.replaceChild=function(t,n){var i=this.childNodes.indexOf(n);return this.removeChild(n),this.appendChild(t,i),n},e.prototype.removeChild=function(t){var n;return Rn.relatedNode=this,t.dispatchEvent(Rn),!((n=t.ownerDocument)===null||n===void 0)&&n.defaultView&&t.ownerDocument.defaultView.unmountChildren(t),P.sceneGraphService.detach(t),t},e.prototype.removeChildren=function(){for(var t=this.childNodes.length-1;t>=0;t--){var n=this.childNodes[t];this.removeChild(n)}},e.prototype.destroyChildren=function(){for(var t=this.childNodes.length-1;t>=0;t--){var n=this.childNodes[t];n.childNodes.length&&n.destroyChildren(),n.destroy()}},e.prototype.matches=function(t){return P.sceneGraphService.matches(t,this)},e.prototype.getElementById=function(t){return P.sceneGraphService.querySelector("#".concat(t),this)},e.prototype.getElementsByName=function(t){return P.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)},e.prototype.getElementsByClassName=function(t){return P.sceneGraphService.querySelectorAll(".".concat(t),this)},e.prototype.getElementsByTagName=function(t){return P.sceneGraphService.querySelectorAll(t,this)},e.prototype.querySelector=function(t){return P.sceneGraphService.querySelector(t,this)},e.prototype.querySelectorAll=function(t){return P.sceneGraphService.querySelectorAll(t,this)},e.prototype.closest=function(t){var n=this;do{if(P.sceneGraphService.matches(t,n))return n;n=n.parentElement}while(n!==null);return null},e.prototype.find=function(t){var n=this,i=null;return this.forEach(function(a){return a!==n&&t(a)?(i=a,!0):!1}),i},e.prototype.findAll=function(t){var n=this,i=[];return this.forEach(function(a){a!==n&&t(a)&&i.push(a)}),i},e.prototype.after=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(this.parentNode){var a=this.parentNode.childNodes.indexOf(this);n.forEach(function(o,s){var u;return(u=t.parentNode)===null||u===void 0?void 0:u.appendChild(o,a+s+1)})}},e.prototype.before=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(this.parentNode){var a=this.parentNode.childNodes.indexOf(this),o=B(n),s=o[0],u=o.slice(1);this.parentNode.appendChild(s,a),(t=s).after.apply(t,tt([],B(u),!1))}},e.prototype.replaceWith=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.after.apply(this,tt([],B(t),!1)),this.remove()},e.prototype.append=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];n.forEach(function(a){return t.appendChild(a)})},e.prototype.prepend=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];n.forEach(function(a,o){return t.appendChild(a,o)})},e.prototype.replaceChildren=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,tt([],B(t),!1))},e.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},e.prototype.destroy=function(){this.dispatchEvent(qs),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},e.prototype.getGeometryBounds=function(){return P.sceneGraphService.getGeometryBounds(this)},e.prototype.getRenderBounds=function(){return P.sceneGraphService.getBounds(this,!0)},e.prototype.getBounds=function(){return P.sceneGraphService.getBounds(this)},e.prototype.getLocalBounds=function(){return P.sceneGraphService.getLocalBounds(this)},e.prototype.getBoundingClientRect=function(){return P.sceneGraphService.getBoundingClientRect(this)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},e.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},e.prototype.getAttribute=function(t){if(Aa(t))return P.enableCSSParsing?null:void 0;var n=this.attributes[t];if(n===void 0){if(P.enableAttributeDashCased){var i=gr(t);n=this.attributes[i]}return P.enableCSSParsing&&rt(n)?null:n}else return n},e.prototype.hasAttribute=function(t){return this.getAttributeNames().includes(t)},e.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},e.prototype.removeAttribute=function(t){this.setAttribute(t,null),delete this.attributes[t]},e.prototype.setAttribute=function(t,n,i,a){this.attributes[t]=n},e.prototype.getAttributeNS=function(t,n){throw new Error(j)},e.prototype.getAttributeNode=function(t){throw new Error(j)},e.prototype.getAttributeNodeNS=function(t,n){throw new Error(j)},e.prototype.hasAttributeNS=function(t,n){throw new Error(j)},e.prototype.removeAttributeNS=function(t,n){throw new Error(j)},e.prototype.removeAttributeNode=function(t){throw new Error(j)},e.prototype.setAttributeNS=function(t,n,i){throw new Error(j)},e.prototype.setAttributeNode=function(t){throw new Error(j)},e.prototype.setAttributeNodeNS=function(t){throw new Error(j)},e.prototype.toggleAttribute=function(t,n){throw new Error(j)},e}(ut);function J(r){return!!(r!=null&&r.nodeName)}var On=P.globalThis.Proxy?P.globalThis.Proxy:function(){},Ot=new Qt(ot.ATTR_MODIFIED,null,null,null,null,Qt.MODIFICATION,null,null),$s={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},Qs={fill:_e,stroke:_e,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},js=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],tu=tt(tt([],B(js),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),In="data-",Nt=function(r){z(e,r);function e(t){var n=r.call(this)||this;return n.isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=n.config.id||"",n.name=n.config.name||"",(n.config.className||n.config.class)&&(n.className=n.config.className||n.config.class),n.nodeName=n.config.type||A.GROUP,P.enableCSSParsing?(Object.assign(n.attributes,$s),Object.assign(n.parsedStyle,Qs,n.config.initialParsedStyle)):n.config.initialParsedStyle&&Object.assign(n.parsedStyle,n.config.initialParsedStyle),n.initAttributes(n.config.style),P.enableDataset&&(n.dataset=new On({},{get:function(i,a){var o="".concat(In).concat(fn(a));return i[o]!==void 0?i[o]:n.getAttribute(o)},set:function(i,a,o){return n.setAttribute("".concat(In).concat(fn(a)),o),!0}})),P.enableStyleSyntax&&(n.style=new On({setProperty:function(i,a){n.setAttribute(i,a)},getPropertyValue:function(i){return n.getAttribute(i)},removeProperty:function(i){n.removeAttribute(i)},item:function(){return""}},{get:function(i,a){return i[a]!==void 0?i[a]:n.getAttribute(a)},set:function(i,a,o){return n.setAttribute(a,o),!0}})),n}return e.prototype.destroy=function(){r.prototype.destroy.call(this),this.getAnimations().forEach(function(t){t.cancel()})},e.prototype.cloneNode=function(t,n){var i=Y({},this.attributes);for(var a in i){var o=i[a];J(o)&&a!=="clipPath"&&a!=="offsetPath"&&a!=="textPath"&&(i[a]=o.cloneNode(t)),n&&(i[a]=n(a,o))}var s=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return s.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach(function(u){if(!u.style.isMarker){var l=u.cloneNode(t);s.appendChild(l)}}),s},e.prototype.initAttributes=function(t){t===void 0&&(t={});var n=this.renderable,i={forceUpdateGeometry:!0};P.enableCSSParsing&&(i.usedAttributes=tu);var a=t;if(P.enableAttributeDashCased){a={};for(var o in t){var s=gr(o);a[s]=t[o]}}P.styleValueRegistry.processProperties(this,a,i),n.dirty=!0},e.prototype.setAttribute=function(t,n,i,a){i===void 0&&(i=!1),a===void 0&&(a=!0),P.enableAttributeDashCased&&(t=gr(t)),!$(n)&&(i||n!==this.attributes[t])&&(this.internalSetAttribute(t,n,{memoize:a}),r.prototype.setAttribute.call(this,t,n))},e.prototype.internalSetAttribute=function(t,n,i){var a;i===void 0&&(i={});var o=this.renderable,s=this.attributes[t],u=this.parsedStyle[t];P.styleValueRegistry.processProperties(this,(a={},a[t]=n,a),i),o.dirty=!0;var l=this.parsedStyle[t];this.isConnected&&(Ot.relatedNode=this,Ot.prevValue=s,Ot.newValue=n,Ot.attrName=t,Ot.prevParsedValue=u,Ot.newParsedValue=l,this.isMutationObserved?this.dispatchEvent(Ot):(Ot.target=this,this.ownerDocument.defaultView.dispatchEvent(Ot,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(t,s,n,u,l)},e.prototype.getBBox=function(){var t=this.getBounds(),n=B(t.getMin(),2),i=n[0],a=n[1],o=B(t.getMax(),2),s=o[0],u=o[1];return new Jt(i,a,s-i,u-a)},e.prototype.setOrigin=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),P.sceneGraphService.setOrigin(this,xt(t,n,i)),this},e.prototype.getOrigin=function(){return P.sceneGraphService.getOrigin(this)},e.prototype.setPosition=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),P.sceneGraphService.setPosition(this,xt(t,n,i)),this},e.prototype.setLocalPosition=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),P.sceneGraphService.setLocalPosition(this,xt(t,n,i)),this},e.prototype.translate=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),P.sceneGraphService.translate(this,xt(t,n,i)),this},e.prototype.translateLocal=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),P.sceneGraphService.translateLocal(this,xt(t,n,i)),this},e.prototype.getPosition=function(){return P.sceneGraphService.getPosition(this)},e.prototype.getLocalPosition=function(){return P.sceneGraphService.getLocalPosition(this)},e.prototype.scale=function(t,n,i){return this.scaleLocal(t,n,i)},e.prototype.scaleLocal=function(t,n,i){return typeof t=="number"&&(n=n||t,i=i||t,t=xt(t,n,i)),P.sceneGraphService.scaleLocal(this,t),this},e.prototype.setLocalScale=function(t,n,i){return typeof t=="number"&&(n=n||t,i=i||t,t=xt(t,n,i)),P.sceneGraphService.setLocalScale(this,t),this},e.prototype.getLocalScale=function(){return P.sceneGraphService.getLocalScale(this)},e.prototype.getScale=function(){return P.sceneGraphService.getScale(this)},e.prototype.getEulerAngles=function(){var t=B(Je(K(),P.sceneGraphService.getWorldTransform(this)),3),n=t[2];return Ct(n)},e.prototype.getLocalEulerAngles=function(){var t=B(Je(K(),P.sceneGraphService.getLocalRotation(this)),3),n=t[2];return Ct(n)},e.prototype.setEulerAngles=function(t){return P.sceneGraphService.setEulerAngles(this,0,0,t),this},e.prototype.setLocalEulerAngles=function(t){return P.sceneGraphService.setLocalEulerAngles(this,0,0,t),this},e.prototype.rotateLocal=function(t,n,i){return rt(n)&&rt(i)?P.sceneGraphService.rotateLocal(this,0,0,t):P.sceneGraphService.rotateLocal(this,t,n,i),this},e.prototype.rotate=function(t,n,i){return rt(n)&&rt(i)?P.sceneGraphService.rotate(this,0,0,t):P.sceneGraphService.rotate(this,t,n,i),this},e.prototype.setRotation=function(t,n,i,a){return P.sceneGraphService.setRotation(this,t,n,i,a),this},e.prototype.setLocalRotation=function(t,n,i,a){return P.sceneGraphService.setLocalRotation(this,t,n,i,a),this},e.prototype.setLocalSkew=function(t,n){return P.sceneGraphService.setLocalSkew(this,t,n),this},e.prototype.getRotation=function(){return P.sceneGraphService.getRotation(this)},e.prototype.getLocalRotation=function(){return P.sceneGraphService.getLocalRotation(this)},e.prototype.getLocalSkew=function(){return P.sceneGraphService.getLocalSkew(this)},e.prototype.getLocalTransform=function(){return P.sceneGraphService.getLocalTransform(this)},e.prototype.getWorldTransform=function(){return P.sceneGraphService.getWorldTransform(this)},e.prototype.setLocalTransform=function(t){return P.sceneGraphService.setLocalTransform(this,t),this},e.prototype.resetLocalTransform=function(){P.sceneGraphService.resetLocalTransform(this)},e.prototype.getAnimations=function(){return this.activeAnimations},e.prototype.animate=function(t,n){var i,a=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return a?a.play(this,t,n):null},e.prototype.isVisible=function(){var t,n;return P.enableCSSParsing?((t=this.parsedStyle)===null||t===void 0?void 0:t.visibility)==="visible":((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)!=="hidden"},Object.defineProperty(e.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"},enumerable:!1,configurable:!0}),e.prototype.isInteractive=function(){var t;return((t=this.parsedStyle)===null||t===void 0?void 0:t.pointerEvents)!=="none"},e.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},e.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,tt([],B(this.parentNode.children.map(function(t){return Number(t.style.zIndex)})),!1))+1),this},e.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,tt([],B(this.parentNode.children.map(function(t){return Number(t.style.zIndex)})),!1))-1),this},e.prototype.getConfig=function(){return this.config},e.prototype.attr=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=B(n,2),o=a[0],s=a[1];return o?Be(o)?(Object.keys(o).forEach(function(u){t.setAttribute(u,o[u])}),this):n.length===2?(this.setAttribute(o,s),this):this.attributes[o]:this.attributes},e.prototype.getMatrix=function(t){var n=t||this.getWorldTransform(),i=B(lr(K(),n),2),a=i[0],o=i[1],s=B(Fe(K(),n),2),u=s[0],l=s[1],c=cr(yt(),n),f=B(Je(K(),c),3),h=f[0],p=f[2];return pa(h||p,a,o,u,l)},e.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},e.prototype.setMatrix=function(t){var n=B(on(t),5),i=n[0],a=n[1],o=n[2],s=n[3],u=n[4];this.setEulerAngles(u).setPosition(i,a).setLocalScale(o,s)},e.prototype.setLocalMatrix=function(t){var n=B(on(t),5),i=n[0],a=n[1],o=n[2],s=n[3],u=n[4];this.setLocalEulerAngles(u).setLocalPosition(i,a).setLocalScale(o,s)},e.prototype.show=function(){P.enableCSSParsing?this.style.visibility="visible":this.forEach(function(t){t.style.visibility="visible"})},e.prototype.hide=function(){P.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(t){t.style.visibility="hidden"})},e.prototype.getCount=function(){return this.childElementCount},e.prototype.getParent=function(){return this.parentElement},e.prototype.getChildren=function(){return this.children},e.prototype.getFirst=function(){return this.firstElementChild},e.prototype.getLast=function(){return this.lastElementChild},e.prototype.getChildByIndex=function(t){return this.children[t]||null},e.prototype.add=function(t,n){return this.appendChild(t,n)},e.prototype.set=function(t,n){this.config[t]=n},e.prototype.get=function(t){return this.config[t]},e.prototype.moveTo=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.setPosition(t,n,i),this},e.prototype.move=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.setPosition(t,n,i),this},e.prototype.setZIndex=function(t){return this.style.zIndex=t,this},e}(Js),eu=function(r){z(e,r);function e(t){return t===void 0&&(t={}),r.call(this,Y({type:A.CIRCLE},t))||this}return e}(Nt),Lu=function(r){z(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,a=jt(t,["style"]);return n=r.call(this,Y({style:P.enableCSSParsing?Y({},i):Y({},i)},a))||this,n.isCustomElement=!0,n}return e}(Nt),ru=function(r){z(e,r);function e(t){return t===void 0&&(t={}),r.call(this,Y({type:A.ELLIPSE},t))||this}return e}(Nt),Nr=function(r){z(e,r);function e(t){return t===void 0&&(t={}),r.call(this,Y({type:A.GROUP},t))||this}return e}(Nt),nu=function(r){z(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,a=jt(t,["style"]);return n=r.call(this,Y({type:A.HTML,style:P.enableCSSParsing?Y({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):Y({},i)},a))||this,n.cullable.enable=!1,n}return e.prototype.getDomElement=function(){return this.parsedStyle.$el},e.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var t=this.parsedStyle,n=t.x,i=t.y,a=t.width,o=t.height;return new Jt(n,i,a,o)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.getBounds=function(){var t,n,i=this.getBoundingClientRect(),a=(n=(t=this.ownerDocument)===null||t===void 0?void 0:t.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect(),o=new ct,s=i.left-((a==null?void 0:a.left)||0),u=i.top-((a==null?void 0:a.top)||0);return o.setMinMax([s,u,0],[s+i.width,u+i.height,0]),o},e.prototype.getLocalBounds=function(){if(this.parentNode){var t=Ut(at(),this.parentNode.getWorldTransform()),n=this.getBounds();if(!ct.isEmpty(n)){var i=new ct;return i.setFromTransformedAABB(n,t),i}}return this.getBounds()},e}(Nt),iu=function(r){z(e,r);function e(t){return t===void 0&&(t={}),r.call(this,Y({type:A.IMAGE},t))||this}return e}(Nt),au=function(r){z(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,a=jt(t,["style"]);n=r.call(this,Y({type:A.LINE,style:Y({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a))||this,n.markerStartAngle=0,n.markerEndAngle=0;var o=n.parsedStyle,s=o.markerStart,u=o.markerEnd;return s&&J(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),u&&J(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n}return e.prototype.attributeChangedCallback=function(t,n,i,a,o){t==="x1"||t==="y1"||t==="x2"||t==="y2"||t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(a&&J(a)&&(this.markerStartAngle=0,a.remove()),o&&J(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):t==="markerEnd"&&(a&&J(a)&&(this.markerEndAngle=0,a.remove()),o&&J(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1)))},e.prototype.transformMarker=function(t){var n=this.parsedStyle,i=n.markerStart,a=n.markerEnd,o=n.markerStartOffset,s=n.markerEndOffset,u=n.x1,l=n.x2,c=n.y1,f=n.y2,h=t?i:a;if(!(!h||!J(h))){var p=0,d,x,y,T,w,O;t?(y=u,T=c,d=l-u,x=f-c,w=o||0,O=this.markerStartAngle):(y=l,T=f,d=u-l,x=c-f,w=s||0,O=this.markerEndAngle),p=Math.atan2(x,d),h.setLocalEulerAngles(p*180/Math.PI+O),h.setLocalPosition(y+Math.cos(p)*w,T+Math.sin(p)*w)}},e.prototype.getPoint=function(t,n){n===void 0&&(n=!1);var i=this.parsedStyle,a=i.x1,o=i.y1,s=i.x2,u=i.y2,l=Bn(a,o,s,u,t),c=l.x,f=l.y,h=mt(K(),V(c,f,0),n?this.getWorldTransform():this.getLocalTransform());return new ft(h[0],h[1])},e.prototype.getPointAtLength=function(t,n){return n===void 0&&(n=!1),this.getPoint(t/this.getTotalLength(),n)},e.prototype.getTotalLength=function(){var t=this.parsedStyle,n=t.x1,i=t.y1,a=t.x2,o=t.y2;return Dn(n,i,a,o)},e}(Nt),ou=function(r){z(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,a=jt(t,["style"]);n=r.call(this,Y({type:A.PATH,style:P.enableCSSParsing?Y({d:"",miterLimit:""},i):Y({},i),initialParsedStyle:P.enableCSSParsing?null:{miterLimit:4,d:Y({},Yn)}},a))||this,n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,s=o.markerStart,u=o.markerEnd,l=o.markerMid;return s&&J(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),l&&J(l)&&n.placeMarkerMid(l),u&&J(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n}return e.prototype.attributeChangedCallback=function(t,n,i,a,o){t==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(a&&J(a)&&(this.markerStartAngle=0,a.remove()),o&&J(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):t==="markerEnd"?(a&&J(a)&&(this.markerEndAngle=0,a.remove()),o&&J(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):t==="markerMid"&&this.placeMarkerMid(o)},e.prototype.transformMarker=function(t){var n=this.parsedStyle,i=n.markerStart,a=n.markerEnd,o=n.markerStartOffset,s=n.markerEndOffset,u=t?i:a;if(!(!u||!J(u))){var l=0,c,f,h,p,d,x;if(t){var y=B(this.getStartTangent(),2),T=y[0],w=y[1];h=w[0],p=w[1],c=T[0]-w[0],f=T[1]-w[1],d=o||0,x=this.markerStartAngle}else{var O=B(this.getEndTangent(),2),T=O[0],w=O[1];h=w[0],p=w[1],c=T[0]-w[0],f=T[1]-w[1],d=s||0,x=this.markerEndAngle}l=Math.atan2(f,c),u.setLocalEulerAngles(l*180/Math.PI+x),u.setLocalPosition(h+Math.cos(l)*d,p+Math.sin(l)*d)}},e.prototype.placeMarkerMid=function(t){var n=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(l){l.remove()}),t&&J(t))for(var i=1;i<n.length-1;i++){var a=B(n[i].currentPoint,2),o=a[0],s=a[1],u=i===1?t:t.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(o,s)}},e.prototype.getTotalLength=function(){return dn(this)},e.prototype.getPointAtLength=function(t,n){n===void 0&&(n=!1);var i=this.parsedStyle.d.absolutePath,a=$i(i,t),o=a.x,s=a.y,u=mt(K(),V(o,s,0),n?this.getWorldTransform():this.getLocalTransform());return new ft(u[0],u[1])},e.prototype.getPoint=function(t,n){return n===void 0&&(n=!1),this.getPointAtLength(t*dn(this),n)},e.prototype.getStartTangent=function(){var t=this.parsedStyle.d.segments,n=[];if(t.length>1){var i=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},e.prototype.getEndTangent=function(){var t=this.parsedStyle.d.segments,n=t.length,i=[];if(n>1){var a=t[n-2].currentPoint,o=t[n-1].currentPoint,s=t[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},e}(Nt),oi=function(r){z(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,a=jt(t,["style"]);n=r.call(this,Y({type:A.POLYGON,style:P.enableCSSParsing?Y({points:"",miterLimit:"",isClosed:!0},i):Y({},i),initialParsedStyle:P.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a))||this,n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,s=o.markerStart,u=o.markerEnd,l=o.markerMid;return s&&J(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),l&&J(l)&&n.placeMarkerMid(l),u&&J(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n}return e.prototype.attributeChangedCallback=function(t,n,i,a,o){t==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(a&&J(a)&&(this.markerStartAngle=0,a.remove()),o&&J(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):t==="markerEnd"?(a&&J(a)&&(this.markerEndAngle=0,a.remove()),o&&J(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):t==="markerMid"&&this.placeMarkerMid(o)},e.prototype.transformMarker=function(t){var n=this.parsedStyle,i=n.markerStart,a=n.markerEnd,o=n.markerStartOffset,s=n.markerEndOffset,u=n.points,l=(u||{}).points,c=t?i:a;if(!(!c||!J(c)||!l)){var f=0,h,p,d,x,y,T;if(d=l[0][0],x=l[0][1],t)h=l[1][0]-l[0][0],p=l[1][1]-l[0][1],y=o||0,T=this.markerStartAngle;else{var w=l.length;this.parsedStyle.isClosed?(h=l[w-1][0]-l[0][0],p=l[w-1][1]-l[0][1]):(d=l[w-1][0],x=l[w-1][1],h=l[w-2][0]-l[w-1][0],p=l[w-2][1]-l[w-1][1]),y=s||0,T=this.markerEndAngle}f=Math.atan2(p,h),c.setLocalEulerAngles(f*180/Math.PI+T),c.setLocalPosition(d+Math.cos(f)*y,x+Math.sin(f)*y)}},e.prototype.placeMarkerMid=function(t){var n=this.parsedStyle.points,i=(n||{}).points;if(this.markerMidList.forEach(function(l){l.remove()}),this.markerMidList=[],t&&J(t)&&i)for(var a=1;a<(this.parsedStyle.isClosed?i.length:i.length-1);a++){var o=i[a][0],s=i[a][1],u=a===1?t:t.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(o,s)}},e}(Nt),su=function(r){z(e,r);function e(t){t===void 0&&(t={});var n=t.style,i=jt(t,["style"]);return r.call(this,Y({type:A.POLYLINE,style:P.enableCSSParsing?Y({points:"",miterLimit:"",isClosed:!1},n):Y({},n),initialParsedStyle:P.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return e.prototype.getTotalLength=function(){return eo(this)},e.prototype.getPointAtLength=function(t,n){return n===void 0&&(n=!1),this.getPoint(t/this.getTotalLength(),n)},e.prototype.getPoint=function(t,n){n===void 0&&(n=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var a=[],o=0,s,u,l=this.getTotalLength();i.forEach(function(y,T){i[T+1]&&(s=[0,0],s[0]=o/l,u=Dn(y[0],y[1],i[T+1][0],i[T+1][1]),o+=u,s[1]=o/l,a.push(s))}),this.parsedStyle.points.segments=a}var c=0,f=0;this.parsedStyle.points.segments.forEach(function(y,T){t>=y[0]&&t<=y[1]&&(c=(t-y[0])/(y[1]-y[0]),f=T)});var h=Bn(i[f][0],i[f][1],i[f+1][0],i[f+1][1],c),p=h.x,d=h.y,x=mt(K(),V(p,d,0),n?this.getWorldTransform():this.getLocalTransform());return new ft(x[0],x[1])},e.prototype.getStartTangent=function(){var t=this.parsedStyle.points.points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.parsedStyle.points.points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(oi),uu=function(r){z(e,r);function e(t){return t===void 0&&(t={}),r.call(this,Y({type:A.RECT},t))||this}return e}(Nt),si=function(r){z(e,r);function e(t){t===void 0&&(t={});var n=t.style,i=jt(t,["style"]);return r.call(this,Y({type:A.TEXT,style:P.enableCSSParsing?Y({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},n):Y({fill:"black"},n)},i))||this}return e.prototype.getComputedTextLength=function(){var t;return this.getGeometryBounds(),((t=this.parsedStyle.metrics)===null||t===void 0?void 0:t.maxLineWidth)||0},e.prototype.getLineBoundingRects=function(){var t;return this.getGeometryBounds(),((t=this.parsedStyle.metrics)===null||t===void 0?void 0:t.lineMetrics)||[]},e.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},e}(Nt),lu=function(){function r(){this.registry={},this.define(A.CIRCLE,eu),this.define(A.ELLIPSE,ru),this.define(A.RECT,uu),this.define(A.IMAGE,iu),this.define(A.LINE,au),this.define(A.GROUP,Nr),this.define(A.PATH,ou),this.define(A.POLYGON,oi),this.define(A.POLYLINE,su),this.define(A.TEXT,si),this.define(A.HTML,nu)}return r.prototype.define=function(e,t){this.registry[e]=t},r.prototype.get=function(e){return this.registry[e]},r}(),Du={number:function(r){return new H(r)},percent:function(r){return new H(r,"%")},px:function(r){return new H(r,"px")},em:function(r){return new H(r,"em")},rem:function(r){return new H(r,"rem")},deg:function(r){return new H(r,"deg")},grad:function(r){return new H(r,"grad")},rad:function(r){return new H(r,"rad")},turn:function(r){return new H(r,"turn")},s:function(r){return new H(r,"s")},ms:function(r){return new H(r,"ms")},registerProperty:function(r){var e=r.name,t=r.inherits,n=r.interpolable,i=r.initialValue,a=r.syntax;P.styleValueRegistry.registerMetadata({n:e,inh:t,int:n,d:i,syntax:a})},registerLayout:function(r,e){P.layoutRegistry.registerLayout(r,e)}},cu=function(r){z(e,r);function e(){var t=r.call(this)||this;t.defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new P.AnimationTimeline(t)}catch{}var n={};return Or.forEach(function(i){var a=i.n,o=i.inh,s=i.d;o&&s&&(n[a]=oe(s)?s(A.GROUP):s)}),t.documentElement=new Nr({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),e.prototype.createElement=function(t,n){if(t==="svg")return this.documentElement;var i=this.defaultView.customElements.get(t);i||(console.warn("Unsupported tagName: ",t),i=t==="tspan"?si:Nr);var a=new i(n);return a.ownerDocument=this,a},e.prototype.createElementNS=function(t,n,i){return this.createElement(n,i)},e.prototype.cloneNode=function(t){throw new Error(j)},e.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}},e.prototype.elementsFromBBox=function(t,n,i,a){var o=this.defaultView.context.rBushRoot,s=o.search({minX:t,minY:n,maxX:i,maxY:a}),u=[];return s.forEach(function(l){var c=l.displayObject,f=c.parsedStyle.pointerEvents,h=f===void 0?"auto":f,p=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(h);(!p||p&&c.isVisible())&&!c.isCulled()&&c.isInteractive()&&u.push(c)}),u.sort(function(l,c){return c.sortable.renderOrder-l.sortable.renderOrder}),u},e.prototype.elementFromPointSync=function(t,n){var i=this.defaultView.canvas2Viewport({x:t,y:n}),a=i.x,o=i.y,s=this.defaultView.getConfig(),u=s.width,l=s.height;if(a<0||o<0||a>u||o>l)return null;var c=this.defaultView.viewport2Client({x:a,y:o}),f=c.x,h=c.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:n,viewportX:a,viewportY:o,clientX:f,clientY:h},picked:[]}).picked;return p&&p[0]||this.documentElement},e.prototype.elementFromPoint=function(t,n){return sr(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h,p;return ur(this,function(d){switch(d.label){case 0:return i=this.defaultView.canvas2Viewport({x:t,y:n}),a=i.x,o=i.y,s=this.defaultView.getConfig(),u=s.width,l=s.height,a<0||o<0||a>u||o>l?[2,null]:(c=this.defaultView.viewport2Client({x:a,y:o}),f=c.x,h=c.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:t,y:n,viewportX:a,viewportY:o,clientX:f,clientY:h},picked:[]})]);case 1:return p=d.sent().picked,[2,p&&p[0]||this.documentElement]}})})},e.prototype.elementsFromPointSync=function(t,n){var i=this.defaultView.canvas2Viewport({x:t,y:n}),a=i.x,o=i.y,s=this.defaultView.getConfig(),u=s.width,l=s.height;if(a<0||o<0||a>u||o>l)return[];var c=this.defaultView.viewport2Client({x:a,y:o}),f=c.x,h=c.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:n,viewportX:a,viewportY:o,clientX:f,clientY:h},picked:[]}).picked;return p[p.length-1]!==this.documentElement&&p.push(this.documentElement),p},e.prototype.elementsFromPoint=function(t,n){return sr(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h,p;return ur(this,function(d){switch(d.label){case 0:return i=this.defaultView.canvas2Viewport({x:t,y:n}),a=i.x,o=i.y,s=this.defaultView.getConfig(),u=s.width,l=s.height,a<0||o<0||a>u||o>l?[2,[]]:(c=this.defaultView.viewport2Client({x:a,y:o}),f=c.x,h=c.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:t,y:n,viewportX:a,viewportY:o,clientX:f,clientY:h},picked:[]})]);case 1:return p=d.sent().picked,p[p.length-1]!==this.documentElement&&p.push(this.documentElement),[2,p]}})})},e.prototype.appendChild=function(t,n){throw new Error(re)},e.prototype.insertBefore=function(t,n){throw new Error(re)},e.prototype.removeChild=function(t,n){throw new Error(re)},e.prototype.replaceChild=function(t,n,i){throw new Error(re)},e.prototype.append=function(){throw new Error(re)},e.prototype.prepend=function(){throw new Error(re)},e.prototype.getElementById=function(t){return this.documentElement.getElementById(t)},e.prototype.getElementsByName=function(t){return this.documentElement.getElementsByName(t)},e.prototype.getElementsByTagName=function(t){return this.documentElement.getElementsByTagName(t)},e.prototype.getElementsByClassName=function(t){return this.documentElement.getElementsByClassName(t)},e.prototype.querySelector=function(t){return this.documentElement.querySelector(t)},e.prototype.querySelectorAll=function(t){return this.documentElement.querySelectorAll(t)},e.prototype.find=function(t){return this.documentElement.find(t)},e.prototype.findAll=function(t){return this.documentElement.findAll(t)},e}(ut),fu=function(){function r(e){this.strategies=e}return r.prototype.apply=function(e){var t=e.camera,n=e.renderingService,i=e.renderingContext,a=this.strategies;n.hooks.cull.tap(r.tag,function(o){if(o){var s=o.cullable;return a.length===0?s.visible=i.unculledEntities.indexOf(o.entity)>-1:s.visible=a.every(function(u){return u.isVisible(t,o)}),!o.isCulled()&&o.isVisible()?o:(o.dispatchEvent(new pt(ot.CULLED)),null)}return o}),n.hooks.afterRender.tap(r.tag,function(o){o.cullable.visibilityPlaneMask=-1})},r.tag="Culling",r}(),hu=function(){function r(){var e=this;this.autoPreventDefault=!1,this.rootPointerEvent=new Cr(null),this.rootWheelEvent=new Sr(null),this.onPointerMove=function(t){var n,i,a,o,s=(o=(a=e.context.renderingContext.root)===null||a===void 0?void 0:a.ownerDocument)===null||o===void 0?void 0:o.defaultView;if(!(s.supportsTouchEvents&&t.pointerType==="touch")){var u=e.normalizeToPointerEvent(t,s);try{for(var l=qt(u),c=l.next();!c.done;c=l.next()){var f=c.value,h=e.bootstrapEvent(e.rootPointerEvent,f,s,t);e.context.eventService.mapEvent(h)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,i,a,o,s=(o=(a=e.context.renderingContext.root)===null||a===void 0?void 0:a.ownerDocument)===null||o===void 0?void 0:o.defaultView,u=e.normalizeToPointerEvent(t,s);try{for(var l=qt(u),c=l.next();!c.done;c=l.next()){var f=c.value,h=e.bootstrapEvent(e.rootPointerEvent,f,s,t);e.context.eventService.mapEvent(h)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}e.setCursor(e.context.eventService.cursor)}}return r.prototype.apply=function(e){var t=this;this.context=e;var n=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(a){var o=t.context.renderingService.hooks.pickSync.call({position:a,picked:[],topmost:!0}).picked;return o[0]||null}),n.hooks.pointerWheel.tap(r.tag,function(a){var o=t.normalizeWheelEvent(a);t.context.eventService.mapEvent(o)}),n.hooks.pointerDown.tap(r.tag,function(a){var o,s;if(!(i.supportsTouchEvents&&a.pointerType==="touch")){var u=t.normalizeToPointerEvent(a,i);if(t.autoPreventDefault&&u[0].isNormalized){var l=a.cancelable||!("cancelable"in a);l&&a.preventDefault()}try{for(var c=qt(u),f=c.next();!f.done;f=c.next()){var h=f.value,p=t.bootstrapEvent(t.rootPointerEvent,h,i,a);t.context.eventService.mapEvent(p)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}t.setCursor(t.context.eventService.cursor)}}),n.hooks.pointerUp.tap(r.tag,function(a){var o,s;if(!(i.supportsTouchEvents&&a.pointerType==="touch")){var u=t.context.contextService.getDomElement(),l=t.context.eventService.isNativeEventFromCanvas(u,a),c=l?"":"outside",f=t.normalizeToPointerEvent(a,i);try{for(var h=qt(f),p=h.next();!p.done;p=h.next()){var d=p.value,x=t.bootstrapEvent(t.rootPointerEvent,d,i,a);x.type+=c,t.context.eventService.mapEvent(x)}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}t.setCursor(t.context.eventService.cursor)}}),n.hooks.pointerMove.tap(r.tag,this.onPointerMove),n.hooks.pointerOver.tap(r.tag,this.onPointerMove),n.hooks.pointerOut.tap(r.tag,this.onPointerMove),n.hooks.click.tap(r.tag,this.onClick),n.hooks.pointerCancel.tap(r.tag,function(a){var o,s,u=t.normalizeToPointerEvent(a,i);try{for(var l=qt(u),c=l.next();!c.done;c=l.next()){var f=c.value,h=t.bootstrapEvent(t.rootPointerEvent,f,i,a);t.context.eventService.mapEvent(h)}}catch(p){o={error:p}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}t.setCursor(t.context.eventService.cursor)})},r.prototype.bootstrapEvent=function(e,t,n,i){e.view=n,e.originalEvent=null,e.nativeEvent=i,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var a=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),o=a.x,s=a.y;e.viewport.x=o,e.viewport.y=s;var u=this.context.eventService.viewport2Canvas(e.viewport),l=u.x,c=u.y;return e.canvas.x=l,e.canvas.y=c,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=$o[e.type]||e.type),e},r.prototype.normalizeWheelEvent=function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var n=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),i=n.x,a=n.y;t.viewport.x=i,t.viewport.y=a;var o=this.context.eventService.viewport2Canvas(t.viewport),s=o.x,u=o.y;return t.canvas.x=s,t.canvas.y=u,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t},r.prototype.transferMouseData=function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=wr.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null},r.prototype.setCursor=function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")},r.prototype.normalizeToPointerEvent=function(e,t){var n=[];if(t.isTouchEvent(e))for(var i=0;i<e.changedTouches.length;i++){var a=e.changedTouches[i];$(a.button)&&(a.button=0),$(a.buttons)&&(a.buttons=1),$(a.isPrimary)&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),$(a.width)&&(a.width=a.radiusX||1),$(a.height)&&(a.height=a.radiusY||1),$(a.tiltX)&&(a.tiltX=0),$(a.tiltY)&&(a.tiltY=0),$(a.pointerType)&&(a.pointerType="touch"),$(a.pointerId)&&(a.pointerId=a.identifier||0),$(a.pressure)&&(a.pressure=a.force||.5),$(a.twist)&&(a.twist=0),$(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=e.type,n.push(a)}else if(t.isMouseEvent(e)){var o=e;$(o.isPrimary)&&(o.isPrimary=!0),$(o.width)&&(o.width=1),$(o.height)&&(o.height=1),$(o.tiltX)&&(o.tiltX=0),$(o.tiltY)&&(o.tiltY=0),$(o.pointerType)&&(o.pointerType="mouse"),$(o.pointerId)&&(o.pointerId=Jo),$(o.pressure)&&(o.pressure=.5),$(o.twist)&&(o.twist=0),$(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,n.push(o)}else n.push(e);return n},r.tag="Event",r}(),pu=[A.CIRCLE,A.ELLIPSE,A.IMAGE,A.RECT,A.LINE,A.POLYLINE,A.POLYGON,A.TEXT,A.PATH,A.HTML],du=function(){function r(){}return r.prototype.isVisible=function(e,t){var n,i,a=t.cullable;if(!a.enable)return!0;var o=t.getRenderBounds();if(ct.isEmpty(o))return!1;var s=e.getFrustum(),u=(i=(n=t.parentNode)===null||n===void 0?void 0:n.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,o,u||Ft.INDETERMINATE,s.planes),a.visible=a.visibilityPlaneMask!==Ft.OUTSIDE,a.visible},r.prototype.computeVisibilityWithPlaneMask=function(e,t,n,i){if(n===Ft.OUTSIDE||n===Ft.INSIDE)return n;for(var a=Ft.INSIDE,o=pu.indexOf(e.nodeName)>-1,s=0,u=i.length;s<u;++s){var l=1<<s;if(n&l&&!(o&&(s===4||s===5))){var c=i[s],f=c.normal,h=c.distance;if(Dt(f,t.getPositiveFarPoint(i[s]))+h<0)return Ft.OUTSIDE;Dt(f,t.getNegativeFarPoint(i[s]))+h<0&&(a|=l)}}return a},r}(),vu=function(){function r(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return r.prototype.apply=function(e){var t=this,n,i=e.renderingService,a=e.renderingContext,o=e.rBushRoot,s=a.root.ownerDocument.defaultView;this.rBush=o;var u=function(p){var d=p.target;d.renderable.dirty=!0,i.dirtify()},l=function(p){var d=p.detail.affectChildren,x=p.target;d&&x.forEach(function(T){t.toSync.add(T)});for(var y=x;y;)y.renderable&&t.toSync.add(y),y=y.parentElement;i.dirtify()},c=function(p){var d=p.target;P.enableSizeAttenuation&&P.styleValueRegistry.updateSizeAttenuation(d,s.getCamera().getZoom()),P.enableCSSParsing&&P.styleValueRegistry.recalc(d),P.sceneGraphService.dirtifyToRoot(d),i.dirtify()},f=function(p){var d=p.target,x=d.rBushNode;x.aabb&&t.rBush.remove(x.aabb),t.toSync.delete(d),P.sceneGraphService.dirtifyToRoot(d),i.dirtify()};i.hooks.init.tap(r.tag,function(){s.addEventListener(ot.MOUNTED,c),s.addEventListener(ot.UNMOUNTED,f),s.addEventListener(ot.ATTR_MODIFIED,u),s.addEventListener(ot.BOUNDS_CHANGED,l)}),i.hooks.destroy.tap(r.tag,function(){s.removeEventListener(ot.MOUNTED,c),s.removeEventListener(ot.UNMOUNTED,f),s.removeEventListener(ot.ATTR_MODIFIED,u),s.removeEventListener(ot.BOUNDS_CHANGED,l),t.toSync.clear()});var h=(n=P.globalThis.requestIdleCallback)!==null&&n!==void 0?n:Lr.bind(P.globalThis);i.hooks.endFrame.tap(r.tag,function(){t.isFirstTimeRendering?(t.isFirstTimeRendering=!1,t.syncing=!0,h(function(){t.syncRTree(!0),t.isFirstTimeRenderingFinished=!0})):t.syncRTree()})},r.prototype.syncRTree=function(e){var t=this;if(e===void 0&&(e=!1),!(!e&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var n=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var a=i.rBushNode;a&&a.aabb&&t.rBush.remove(a.aabb);var o=i.getRenderBounds();if(o){var s=i.renderable;e&&(s.dirtyRenderBounds||(s.dirtyRenderBounds=new ct),s.dirtyRenderBounds.update(o.center,o.halfExtents));var u=B(o.getMin(),2),l=u[0],c=u[1],f=B(o.getMax(),2),h=f[0],p=f[1];a.aabb||(a.aabb={}),a.aabb.displayObject=i,a.aabb.minX=l,a.aabb.minY=c,a.aabb.maxX=h,a.aabb.maxY=p}a.aabb&&!isNaN(a.aabb.maxX)&&!isNaN(a.aabb.maxX)&&!isNaN(a.aabb.minX)&&!isNaN(a.aabb.minY)&&n.push(a.aabb)}),this.rBush.load(n),n.length=0,this.toSync.clear(),this.syncing=!1}},r.tag="Prepare",r}(),bt;(function(r){r.READY="ready",r.BEFORE_RENDER="beforerender",r.RERENDER="rerender",r.AFTER_RENDER="afterrender",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.RESIZE="resize",r.DIRTY_RECTANGLE="dirtyrectangle",r.RENDERER_CHANGED="rendererchanged"})(bt||(bt={}));var Ln=500,gu=.1,yu=1e3,ar=new pt(ot.MOUNTED),or=new pt(ot.UNMOUNTED),mu=new pt(bt.BEFORE_RENDER),xu=new pt(bt.RERENDER),Eu=new pt(bt.AFTER_RENDER),Bu=function(r){z(e,r);function e(t){var n=r.call(this)||this;n.Element=Nt,n.inited=!1,n.context={},n.document=new cu,n.document.defaultView=n,n.customElements=new lu;var i=t.container,a=t.canvas,o=t.offscreenCanvas,s=t.width,u=t.height,l=t.devicePixelRatio,c=t.renderer,f=t.background,h=t.cursor,p=t.document,d=t.requestAnimationFrame,x=t.cancelAnimationFrame,y=t.createImage,T=t.supportsPointerEvents,w=t.supportsTouchEvents,O=t.supportsCSSTransform,L=t.supportsMutipleCanvasesInOneContainer,E=t.useNativeClickEvent,v=t.alwaysTriggerPointerEventOnCanvas,g=t.isTouchEvent,m=t.isMouseEvent;L||Ho(i,n);var N=s,S=u,C=l;return a&&(C=l||Ir&&window.devicePixelRatio||1,C=C>=1?Math.ceil(C):1,N=s||Zo(a)||a.width/C,S=u||qo(a)||a.height/C),o&&(P.offscreenCanvas=o),n.devicePixelRatio=C,n.requestAnimationFrame=d??Lr.bind(P.globalThis),n.cancelAnimationFrame=x??ni.bind(P.globalThis),n.supportsTouchEvents=w??"ontouchstart"in P.globalThis,n.supportsPointerEvents=T??!!P.globalThis.PointerEvent,n.isTouchEvent=g??function(k){return n.supportsTouchEvents&&k instanceof P.globalThis.TouchEvent},n.isMouseEvent=m??function(k){return!P.globalThis.MouseEvent||k instanceof P.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(k instanceof P.globalThis.PointerEvent))},n.initRenderingContext({container:i,canvas:a,width:N,height:S,renderer:c,offscreenCanvas:o,devicePixelRatio:C,cursor:h||"default",background:f||"transparent",createImage:y,document:p,supportsCSSTransform:O,useNativeClickEvent:E,alwaysTriggerPointerEventOnCanvas:v}),n.initDefaultCamera(N,S,c.clipSpaceNearZ),n.initRenderer(c,!0),n}return e.prototype.initRenderingContext=function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},e.prototype.initDefaultCamera=function(t,n,i){var a=this,o=new P.CameraContribution;o.clipSpaceNearZ=i,o.setType(Q.EXPLORING,we.DEFAULT).setPosition(t/2,n/2,Ln).setFocalPoint(t/2,n/2,0).setOrthographic(t/-2,t/2,n/2,n/-2,gu,yu),o.canvas=this,o.eventEmitter.on(_n.UPDATED,function(){a.context.renderingContext.renderReasons.add(ce.CAMERA_CHANGED),P.enableSizeAttenuation&&a.getConfig().renderer.getConfig().enableSizeAttenuation&&a.updateSizeAttenuation()}),this.context.camera=o},e.prototype.updateSizeAttenuation=function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach(function(n){P.styleValueRegistry.updateSizeAttenuation(n,t)})},e.prototype.getConfig=function(){return this.context.config},e.prototype.getRoot=function(){return this.document.documentElement},e.prototype.getCamera=function(){return this.context.camera},e.prototype.getContextService=function(){return this.context.contextService},e.prototype.getEventService=function(){return this.context.eventService},e.prototype.getRenderingService=function(){return this.context.renderingService},e.prototype.getRenderingContext=function(){return this.context.renderingContext},e.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise(function(n){t.resolveReadyPromise=function(){n(t)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,n){if(t===void 0&&(t=!0),n===void 0&&(n=!1),n||this.dispatchEvent(new pt(bt.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var a=this.getRoot();this.unmountChildren(a),t&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),t&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),n||this.dispatchEvent(new pt(bt.AFTER_DESTROY))},e.prototype.changeSize=function(t,n){this.resize(t,n)},e.prototype.resize=function(t,n){var i=this.context.config;i.width=t,i.height=n,this.getContextService().resize(t,n);var a=this.context.camera,o=a.getProjectionMode();a.setPosition(t/2,n/2,Ln).setFocalPoint(t/2,n/2,0),o===vt.ORTHOGRAPHIC?a.setOrthographic(t/-2,t/2,n/2,n/-2,a.getNear(),a.getFar()):a.setAspect(t/n),this.dispatchEvent(new pt(bt.RESIZE,{width:t,height:n}))},e.prototype.appendChild=function(t,n){return this.document.documentElement.appendChild(t,n)},e.prototype.insertBefore=function(t,n){return this.document.documentElement.insertBefore(t,n)},e.prototype.removeChild=function(t){return this.document.documentElement.removeChild(t)},e.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},e.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},e.prototype.render=function(t){var n=this;this.dispatchEvent(mu);var i=this.getRenderingService();i.render(this.getConfig(),t,function(){n.dispatchEvent(xu)}),this.dispatchEvent(Eu)},e.prototype.run=function(){var t=this,n=function(i,a){t.render(a),t.frameId=t.requestAnimationFrame(n)};n()},e.prototype.initRenderer=function(t,n){var i=this;if(n===void 0&&(n=!1),!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new sa,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new hu,new vu,new fu([new du])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService(Y(Y({},P),this.context)),this.context.renderingService=new ks(P,this.context),this.context.eventService=new Ms(P,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,n,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(t,n)})},e.prototype.initRenderingService=function(t,n,i){var a=this;n===void 0&&(n=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){a.inited=!0,n?(i?a.requestAnimationFrame(function(){a.dispatchEvent(new pt(bt.READY))}):a.dispatchEvent(new pt(bt.READY)),a.readyPromise&&a.resolveReadyPromise()):a.dispatchEvent(new pt(bt.RENDERER_CHANGED)),n||a.getRoot().forEach(function(o){var s=o.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}),a.mountChildren(a.getRoot()),t.getConfig().enableAutoRendering&&a.run()})},e.prototype.loadRendererContainerModule=function(t){var n=this,i=t.getPlugins();i.forEach(function(a){a.context=n.context,a.init(P)})},e.prototype.setRenderer=function(t){var n=this.getConfig();if(n.renderer!==t){var i=n.renderer;n.renderer=t,this.destroy(!1,!0),tt([],B(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(a){a.destroy(P)}),this.initRenderer(t)}},e.prototype.setCursor=function(t){var n=this.getConfig();n.cursor=t,this.getContextService().applyCursorStyle(t)},e.prototype.unmountChildren=function(t){var n=this;t.childNodes.forEach(function(i){n.unmountChildren(i)}),this.inited&&(t.isMutationObserved?t.dispatchEvent(or):(or.target=t,this.dispatchEvent(or,!0)),t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1),t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()},e.prototype.mountChildren=function(t){var n=this;this.inited?t.isConnected||(t.ownerDocument=this.document,t.isConnected=!0,t.isMutationObserved?t.dispatchEvent(ar):(ar.target=t,this.dispatchEvent(ar,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName),t.childNodes.forEach(function(i){n.mountChildren(i)}),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()},e.prototype.client2Viewport=function(t){return this.getEventService().client2Viewport(t)},e.prototype.viewport2Client=function(t){return this.getEventService().viewport2Client(t)},e.prototype.viewport2Canvas=function(t){return this.getEventService().viewport2Canvas(t)},e.prototype.canvas2Viewport=function(t){return this.getEventService().canvas2Viewport(t)},e.prototype.getPointByClient=function(t,n){return this.client2Viewport({x:t,y:n})},e.prototype.getClientByPoint=function(t,n){return this.viewport2Client({x:t,y:n})},e}(ai);export{Mu as A,ps as B,eu as C,Nt as D,ot as E,$n as F,Nr as G,nu as H,iu as I,ku as J,Au as K,au as L,j as M,ut as N,Dr as O,ou as P,Kt as Q,uu as R,A as S,si as T,M as U,Du as V,b as W,Ru as X,Bu as Y,ru as a,oi as b,su as c,Lu as d,pt as e,Q as f,qe as g,q as h,xt as i,Ta as j,bu as k,ce as l,Ir as m,J as n,Iu as o,le as p,dn as q,P as r,Ou as s,ft as t,Ko as u,Za as v,ae as w,ct as x,bt as y,hn as z};
