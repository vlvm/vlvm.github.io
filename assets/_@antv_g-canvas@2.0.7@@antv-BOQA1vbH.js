import{_ as a,a as s,b as o,g as c,h}from"./_tslib@2.6.3@tslib-Ck5hgXZz.js";import{A as u,k as g,s as p,l as v,m as f}from"./_@antv_g-lite@2.0.5@@antv-O0rSGUp-.js";import{P as d}from"./_@antv_g-plugin-canvas-path-generator@2.0.5@@antv-DBQIeuxu.js";import{P as l}from"./_@antv_g-plugin-canvas-picker@2.0.6@@antv-BogTKf5c.js";import{P as m}from"./_@antv_g-plugin-canvas-renderer@2.0.6@@antv-CK8ezboO.js";import{P as $}from"./_@antv_g-plugin-dom-interaction@2.0.5@@antv-Cua4VLnP.js";import{P as C}from"./_@antv_g-plugin-html-renderer@2.0.6@@antv-DqhoQUA0.js";import{P}from"./_@antv_g-plugin-image-loader@2.0.5@@antv-B-_XT6Yx.js";import{c as y}from"./_@antv_util@3.3.7@@antv-rk1Gsl7O.js";var x=function(){function i(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return i.prototype.init=function(){var t=this.canvasConfig,e=t.container,n=t.canvas;if(n)this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=y(e)?document.getElementById(e):e,this.$container)){var r=document.createElement("canvas");this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},i.prototype.getContext=function(){return this.context},i.prototype.getDomElement=function(){return this.$canvas},i.prototype.getDPR=function(){return this.dpr},i.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},i.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},i.prototype.resize=function(t,e){var n=this.canvasConfig.devicePixelRatio,r=n||f&&window.devicePixelRatio||1;r=r>=1?Math.ceil(r):1,this.dpr=r,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,p(this.$canvas,t,e)),this.renderingContext.renderReasons.add(v.CAMERA_CHANGED)},i.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},i.prototype.toDataURL=function(t){return t===void 0&&(t={}),c(this,void 0,void 0,function(){var e,n;return h(this,function(r){return e=t.type,n=t.encoderOptions,[2,this.context.canvas.toDataURL(e,n)]})})},i}(),R=function(i){a(t,i);function t(){var e=i.apply(this,s([],o(arguments),!1))||this;return e.name="canvas-context-register",e}return t.prototype.init=function(){this.context.ContextService=x},t.prototype.destroy=function(){delete this.context.ContextService},t}(u),M=function(i){a(t,i);function t(e){var n=i.call(this,e)||this;return n.registerPlugin(new R),n.registerPlugin(new P),n.registerPlugin(new d),n.registerPlugin(new m),n.registerPlugin(new $),n.registerPlugin(new l),n.registerPlugin(new C),n}return t}(g);export{M as R};
