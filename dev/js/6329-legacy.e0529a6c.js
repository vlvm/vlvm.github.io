"use strict";(self["webpackChunkteacher_project"]=self["webpackChunkteacher_project"]||[]).push([[6329],{16329:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"courseContent",class:{computedHeight:1!==t.role}},[n("draggable",{attrs:{disabled:t.off,filter:".forbid"},on:{start:t.onStart,end:t.onEnd},model:{value:t.contentData,callback:function(e){t.contentData=e},expression:"contentData"}},[n("transition-group",t._l(t.contentData,(function(e){return n("div",{key:e.content.id,staticClass:"quesBox"},[n("ContentQuestion",{key:e.content.id,class:e.content.id===t.courseContentId?"":"forbid",attrs:{contentType:e.contentType,data:e.content}})],1)})),0)],1),1===t.courseSelectedData.courseTalkingSwitch?n("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",icon:"question-circle",block:""}},[t._v(" 讨论区 ")]):t._e(),["0","1","2","3"].includes(t.editorType)?n("div",{staticClass:"stateBox"},["0"===t.editorType?n("p",[t._v(" 多题关联后，首题题干将被共享，并统计关联后总分！ ")]):t._e(),"1"===t.editorType?n("p",[t._v(" 请按顺序选择试题，后续试题将按照首题题号，顺序排列 ")]):t._e(),"2"===t.editorType?n("p",[t._v("连续设分后，所选题目分数将和首体分数相同")]):t._e(),n("a-space",{attrs:{size:10}},[n("a-button",{on:{click:t.clearData}},[t._v("取消")]),["0","1","2"].includes(t.editorType)?n("a-button",{attrs:{type:"primary"},on:{click:t.relationTrue}},[t._v(" 确定 ")]):t._e(),"3"===t.editorType?[n("a-button",{attrs:{type:"primary"}},[t._v(" 拷贝 ")]),n("a-button",{attrs:{type:"danger"},on:{click:t.deleteContents}},[t._v(" 删除 ")])]:t._e()],2)],1):t._e()],1)},c=[],r=n(7204),a=(n(21206),n(68428),n(58742),n(69418),n(52892),n(99453),n(13176),n(99258),n(72535)),i=n.n(a),s=n(26490),u=n(35462),d={name:"ContentBox",components:{draggable:i(),ContentQuestion:function(){return n.e(3134).then(n.bind(n,23134))}},data:function(){return{}},computed:(0,r.Z)((0,r.Z)({off:function(){return""===this.courseContentId||["0","1","2","3"].includes(this.editorType)},contentData:{get:function(){return this.$store.state.c.contentData},set:function(t){this.replaceContent(t)}}},(0,s.rn)({role:function(t){return t.role},editorType:function(t){return t.c.selectItem.editorType},courseId:function(t){return t.c.courseId},courseContentId:function(t){return t.c.courseContentId},relation:function(t){return t.c.selectItem.relation},contentCheckedArr:function(t){return t.c.contentCheckedArr}})),(0,s.Se)("c",["courseSelectedData"])),methods:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,s.OI)("c",["changeCourseContentId","replaceContent"])),(0,s.nv)("c",["changeEditorType","changeContentCheckedArr","getCourseTagAttrData"])),{},{onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1,this.changeCourseContentId("")},relationTrue:function(){var t=this;if(0!==this.contentCheckedArr.length){var e=this.contentData.findIndex((function(e){return e.content.id===t.contentCheckedArr[0]}));if("0"===this.editorType)(0,u.Xx)(this.contentCheckedArr).then((function(){t.contentData.forEach((function(e){t.contentCheckedArr.includes(e.content.id)&&(e.content.firstQuestionId=t.contentCheckedArr[0],e.content.mappingIdList=t.contentCheckedArr)})),t.replaceContent(t.contentData),t.clearData()}));else if("1"===this.editorType){var n=[],o=this.contentData[e].content.questionNumber;this.contentData.map((function(e){t.contentCheckedArr.includes(e.content.id)&&n.push({id:e.content.id,questionNumber:o++})})),(0,u.Ln)(n).then((function(){t.contentData.map((function(t){n.map((function(e,o){e.id===t.content.id&&(t.content.questionNumber=n[o].questionNumber)}))})),t.replaceContent(t.contentData),t.clearData()}))}else if("2"===this.editorType){var c=[];this.contentData.map((function(n){t.contentCheckedArr.includes(n.content.id)&&c.push({id:n.content.id,questionNumber:n.content.questionNumber,questionParentId:n.content.questionParentId,questionScore:t.contentData[e].content.questionScore})})),(0,u._P)(c).then((function(e){e.extra&&(t.contentData.map((function(e){t.contentCheckedArr.includes(e.content.id)&&(e.content.questionScore=c[0].questionScore)})),t.replaceContent(t.contentData),t.clearData())}))}}else this.$error({content:"请选择想要操作的内容！"})},deleteContents:function(){var t=this;if(0!==this.contentCheckedArr.length){var e=this;this.$confirm({title:"是否确定要删除所选内容?",content:"内容删除后不可恢复，您是否确定删除内容？",okText:"删除",maskClosable:!0,okType:"danger",cancelText:"取消",onOk:function(){var n=[];e.contentData.map((function(t){e.contentCheckedArr.includes(t.content.id)&&n.push({contentType:t.contentType,content:{id:t.content.id}})})),(0,u.f3)(n,e.courseId).then((function(){(0,u.vz)(e.courseId).then((function(n){t.replaceContent(n.extra),t.getCourseTagAttrData(e.courseId),e.clearData()}))}))},onCancel:function(){console.log("Cancel")}})}else this.$error({content:"请选择想要删除的内容！"})},clearData:function(){this.changeEditorType(""),this.changeCourseContentId(""),this.changeContentCheckedArr([])}})},l=d,h=n(35471),p=(0,h.Z)(l,o,c,!1,null,"4938266b",null),f=p.exports}}]);