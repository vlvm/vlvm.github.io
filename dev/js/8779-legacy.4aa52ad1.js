"use strict";(self["webpackChunkteacher_project"]=self["webpackChunkteacher_project"]||[]).push([[8779],{71781:function(t,e,n){n.d(e,{$x:function(){return h},Bd:function(){return r},KB:function(){return m},MK:function(){return b},Ui:function(){return l},W7:function(){return T},Wq:function(){return d},bT:function(){return s},gN:function(){return f},jD:function(){return p},k0:function(){return o},qO:function(){return a},td:function(){return i},zK:function(){return u}});n(8700);var c=n(98646);function o(t){return(0,c.hi)(Object.assign((0,c.aP)("GET",t),{url:"".concat(c.jz,"/api/lib/tree")}))}function i(t){return(0,c.hi)(Object.assign((0,c.aP)("POST",t),{url:"".concat(c.jz,"/api/lib/entity")}))}function r(t){return(0,c.hi)(Object.assign((0,c.aP)("PUT",t),{url:"".concat(c.jz,"/api/lib/entity")}))}function a(t){return(0,c.hi)(Object.assign((0,c.aP)("DELETE",t),{url:"".concat(c.jz,"/api/lib/entity")}))}function s(t,e){return(0,c.hi)(Object.assign((0,c.aP)("GET"),{url:"".concat(c.jz,"/api/lib/entities/").concat(t,"/").concat(e)}))}function u(t){return(0,c.hi)(Object.assign((0,c.aP)("POST",t),{url:"".concat(c.jz,"/api/calm/course")}))}function l(t,e){return(0,c.hi)(Object.assign((0,c.aP)("DELETE"),{url:"".concat(c.jz,"/api/calm/course/").concat(t,"/").concat(e)}))}function d(t){return(0,c.hi)(Object.assign((0,c.aP)("POST",t),{url:"".concat(c.jz,"/api/ctlm/text")}))}function h(t){return(0,c.hi)(Object.assign((0,c.aP)("POST",t),{url:"".concat(c.jz,"/api/calm/atta")}))}function f(t){return(0,c.hi)(Object.assign((0,c.aP)("POST",t),{url:"".concat(c.jz,"/api/cql/question")}))}function b(t,e,n){return(0,c.hi)(Object.assign((0,c.aP)("POST"),{url:"".concat(c.jz,"/api/ctlm/text/").concat(t,"/").concat(e,"/").concat(n)}))}function p(t,e,n){return(0,c.hi)(Object.assign((0,c.aP)("DELETE"),{url:"".concat(c.jz,"/api/calm/atta/").concat(t,"/").concat(e,"/").concat(n)}))}function T(t,e,n){return(0,c.hi)(Object.assign((0,c.aP)("DELETE"),{url:"".concat(c.jz,"/api/cql/question/").concat(t,"/").concat(e,"/").concat(n)}))}function m(t){return(0,c.hi)(Object.assign((0,c.aP)("GET",t),{url:"".concat(c.jz,"/api/lib/entities/").concat(t.courseId,"/").concat(t.sourceId,"/").concat(t.type)}))}},8779:function(t,e,n){n.r(e),n.d(e,{default:function(){return h}});var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("TagBox",{attrs:{name:"课程标签"}},[n("a-dropdown",{staticStyle:{width:"170px","margin-bottom":"3px"},attrs:{disabled:t.isOtherTeacher}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:function(e){return t.handleMenuClick(e,0)}},slot:"overlay"},[t._l(t.course0,(function(e,c){return n("a-menu-item",{key:c},[t._v(" "+t._s(e.libName)+" ")])})),0===t.course0.length?n("a-menu-item",[t._v("暂无数据")]):t._e()],2),n("a-button",{attrs:{size:"small"}},[t._v(" 素养：")])],1),n("a-button",{attrs:{size:"small",disabled:t.isOtherTeacher},on:{click:function(e){return t.openModal(0)}}},[n("a-icon",{attrs:{type:"plus"}})],1),t.literacy.length>0?n("ul",{staticClass:"box"},t._l(t.literacy,(function(e,c){return n("li",{key:c},[n("a-icon",{attrs:{type:"close-circle"},on:{click:function(n){return t.deleteTarg(0,e.id)}}}),t._v(" "+t._s(e.libName)+" ")],1)})),0):n("div",[t._v("暂无数据")]),n("a-dropdown",{staticStyle:{width:"170px",margin:"3px 0"},attrs:{disabled:t.isOtherTeacher}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:function(e){return t.handleMenuClick(e,1)}},slot:"overlay"},[t._l(t.course1,(function(e,c){return n("a-menu-item",{key:c},[t._v(" "+t._s(e.libName)+" ")])})),0===t.course1.length?n("a-menu-item",[t._v("暂无数据")]):t._e()],2),n("a-button",{attrs:{size:"small"}},[t._v(" 能力：")])],1),n("a-button",{attrs:{size:"small",disabled:t.isOtherTeacher},on:{click:function(e){return t.openModal(1)}}},[n("a-icon",{attrs:{type:"plus"}})],1),t.ability.length>0?n("ul",{staticClass:"box"},t._l(t.ability,(function(e,c){return n("li",{key:c},[n("a-icon",{attrs:{type:"close-circle"},on:{click:function(n){return t.deleteTarg(1,e.id)}}}),t._v(" "+t._s(e.libName)+" ")],1)})),0):n("div",[t._v("暂无数据")]),n("a-dropdown",{staticStyle:{width:"170px","margin-top":"3px"},attrs:{disabled:t.isOtherTeacher}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:function(e){return t.handleMenuClick(e,2)}},slot:"overlay"},[t._l(t.course2,(function(e,c){return n("a-menu-item",{key:c},[t._v(" "+t._s(e.libName)+" ")])})),0===t.course2.length?n("a-menu-item",[t._v("暂无数据")]):t._e()],2),n("a-button",{attrs:{size:"small"}},[t._v(" 知识点：")])],1),n("a-button",{attrs:{size:"small",disabled:t.isOtherTeacher},on:{click:function(e){return t.openModal(2)}}},[n("a-icon",{attrs:{type:"plus"}})],1),t.knowledge.length>0?n("ul",{staticClass:"box"},t._l(t.knowledge,(function(e,c){return n("li",{key:c},[n("a-icon",{attrs:{type:"close-circle"},on:{click:function(n){return t.deleteTarg(2,e.id)}}}),t._v(" "+t._s(e.libName)+" ")],1)})),0):n("div",[t._v("暂无数据")])],1),n("a-modal",{attrs:{title:"选择蓝图",width:960},on:{ok:t.handleOk},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[t.modalVisible?n("TreeComponent",{ref:"checkTag",attrs:{type:t.type}}):t._e()],1)],1)},o=[],i=n(7204),r=(n(21206),n(68428),n(58742),n(26490)),a=n(71781),s={name:"courseQuesTag",components:{TreeComponent:function(){return n.e(250).then(n.bind(n,90250))}},data:function(){return{modalVisible:!1,type:0,course0:[],course1:[],course2:[],literacyData:[],abilityData:[],knowledgeData:[]}},computed:(0,i.Z)((0,i.Z)((0,i.Z)({},(0,r.rn)({isOtherTeacher:function(t){return t.c.isOtherTeacher},courseId:function(t){return t.c.courseId},courseContentId:function(t){return t.c.courseContentId}})),(0,r.Se)("c",["courseSelectedItemData"])),{},{literacy:function(){return""===this.courseContentId?this.course0:this.literacyData},ability:function(){return""===this.courseContentId?this.course1:this.abilityData},knowledge:function(){return""===this.courseContentId?this.course2:this.knowledgeData}}),watch:{courseContentId:function(t){var e=this;""===t?((0,a.bT)(this.courseId,0).then((function(t){e.course0=t.extra})),(0,a.bT)(this.courseId,1).then((function(t){e.course1=t.extra})),(0,a.bT)(this.courseId,2).then((function(t){e.course2=t.extra}))):this.getCourseTextLabelList()},courseId:function(t,e){var n=this;console.log(t,e),""===this.courseContentId?((0,a.bT)(this.courseId,0).then((function(t){n.course0=t.extra})),(0,a.bT)(this.courseId,1).then((function(t){n.course1=t.extra})),(0,a.bT)(this.courseId,2).then((function(t){n.course2=t.extra}))):0===this.courseSelectedItemData.contentType?this.getCourseTextLabelList():(1===this.courseSelectedItemData.contentType||2===this.courseSelectedItemData.contentType)&&(this.literacyData=[],this.abilityData=[],this.knowledgeData=[])}},mounted:function(){var t=this;(0,a.bT)(this.courseId,0).then((function(e){t.course0=e.extra})),(0,a.bT)(this.courseId,1).then((function(e){t.course1=e.extra})),(0,a.bT)(this.courseId,2).then((function(e){t.course2=e.extra}))},methods:{handleOk:function(){var t=this;(0,a.zK)(this.$refs.checkTag.checkData).then((function(){(0,a.bT)(t.courseId,t.type).then((function(e){0===t.type?t.course0=e.extra:1===t.type?t.course1=e.extra:2===t.type&&(t.course2=e.extra),t.modalVisible=!1}))}))},openModal:function(t){this.type=t,this.modalVisible=!0},handleMenuClick:function(t,e){var n=this,c=t.key;if(""!==this.courseContentId){var o=function(t){(0,a.Wq)([{courseId:n.courseId,courseTextId:n.courseContentId,libId:n["course".concat(t)][c].id,courseTextLibType:t}]).then((function(){n.getCourseTextLabelList()}))},i=function(t){(0,a.$x)([{courseId:n.courseId,attachmentId:n.courseContentId,libId:n["course".concat(t)][c].id,libType:t}]).then((function(){n.getCourseTextLabelList()}))},r=function(t){(0,a.gN)([{courseId:n.courseId,questionId:n.courseContentId,libId:n["course".concat(t)][c].id,libType:t}]).then((function(){n.getCourseTextLabelList()}))};0===this.courseSelectedItemData.contentType?o(e):1===this.courseSelectedItemData.contentType?i(e):2===this.courseSelectedItemData.contentType&&r(e)}},deleteTarg:function(t,e){var n=this;""===this.courseContentId?(0,a.Ui)(this.courseId,e).then((function(){(0,a.bT)(n.courseId,t).then((function(e){n["course".concat(t)]=e.extra}))})):0===this.courseSelectedItemData.contentType?(0,a.MK)(this.courseId,this.courseContentId,e).then((function(){n.getCourseTextLabelList()})):1===this.courseSelectedItemData.contentType?(0,a.jD)(this.courseId,this.courseContentId,e).then((function(){n.getCourseTextLabelList()})):2===this.courseSelectedItemData.contentType&&(0,a.W7)(this.courseId,this.courseContentId,e).then((function(){n.getCourseTextLabelList()}))},getCourseTextLabelList:function(){for(var t=this,e=function(e){(0,a.KB)({courseId:t.courseId,sourceId:t.courseContentId,sourceType:t.courseSelectedItemData.contentType,type:e}).then((function(n){0===e?t.literacyData=n.extra:1===e?t.abilityData=n.extra:2===e&&(t.knowledgeData=n.extra)}))},n=0;n<3;n++)e(n)},getTagData:function(t){return 0===t?""===this.courseContentId?this.course0:this.literacyData:1===t?""===this.courseContentId?this.course1:this.abilityData:2===t?""===this.courseContentId?this.course2:this.knowledgeData:void 0}}},u=s,l=n(35471),d=(0,l.Z)(u,c,o,!1,null,"7f69d12a",null),h=d.exports}}]);