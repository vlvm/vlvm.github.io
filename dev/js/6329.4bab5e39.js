"use strict";(self["webpackChunkteacher_project"]=self["webpackChunkteacher_project"]||[]).push([[6329],{16329:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"courseContent",class:{computedHeight:1!==t.role}},[n("draggable",{attrs:{disabled:t.off,filter:".forbid"},on:{start:t.onStart,end:t.onEnd},model:{value:t.contentData,callback:function(e){t.contentData=e},expression:"contentData"}},[n("transition-group",t._l(t.contentData,(function(e){return n("div",{key:e.content.id,staticClass:"quesBox"},[n("ContentQuestion",{key:e.content.id,class:e.content.id===t.courseContentId?"":"forbid",attrs:{contentType:e.contentType,data:e.content}})],1)})),0)],1),1===t.courseSelectedData.courseTalkingSwitch?n("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",icon:"question-circle",block:""}},[t._v(" 讨论区 ")]):t._e(),["0","1","2","3"].includes(t.editorType)?n("div",{staticClass:"stateBox"},["0"===t.editorType?n("p",[t._v(" 多题关联后，首题题干将被共享，并统计关联后总分！ ")]):t._e(),"1"===t.editorType?n("p",[t._v(" 请按顺序选择试题，后续试题将按照首题题号，顺序排列 ")]):t._e(),"2"===t.editorType?n("p",[t._v("连续设分后，所选题目分数将和首体分数相同")]):t._e(),n("a-space",{attrs:{size:10}},[n("a-button",{on:{click:t.clearData}},[t._v("取消")]),["0","1","2"].includes(t.editorType)?n("a-button",{attrs:{type:"primary"},on:{click:t.relationTrue}},[t._v(" 确定 ")]):t._e(),"3"===t.editorType?[n("a-button",{attrs:{type:"primary"}},[t._v(" 拷贝 ")]),n("a-button",{attrs:{type:"danger"},on:{click:t.deleteContents}},[t._v(" 删除 ")])]:t._e()],2)],1):t._e()],1)},c=[],r=(n(69418),n(72535)),a=n.n(r),i=n(26490),s=n(35462),d={name:"ContentBox",components:{draggable:a(),ContentQuestion:()=>n.e(3134).then(n.bind(n,23134))},data(){return{}},computed:{off(){return""===this.courseContentId||["0","1","2","3"].includes(this.editorType)},contentData:{get(){return this.$store.state.c.contentData},set(t){this.replaceContent(t)}},...(0,i.rn)({role:t=>t.role,editorType:t=>t.c.selectItem.editorType,courseId:t=>t.c.courseId,courseContentId:t=>t.c.courseContentId,relation:t=>t.c.selectItem.relation,contentCheckedArr:t=>t.c.contentCheckedArr}),...(0,i.Se)("c",["courseSelectedData"])},methods:{...(0,i.OI)("c",["changeCourseContentId","replaceContent"]),...(0,i.nv)("c",["changeEditorType","changeContentCheckedArr","getCourseTagAttrData"]),onStart(){this.drag=!0},onEnd(){this.drag=!1,this.changeCourseContentId("")},relationTrue(){if(0===this.contentCheckedArr.length)return void this.$error({content:"请选择想要操作的内容！"});let t=this.contentData.findIndex((t=>t.content.id===this.contentCheckedArr[0]));if("0"===this.editorType)(0,s.Xx)(this.contentCheckedArr).then((()=>{this.contentData.forEach((t=>{this.contentCheckedArr.includes(t.content.id)&&(t.content.firstQuestionId=this.contentCheckedArr[0],t.content.mappingIdList=this.contentCheckedArr)})),this.replaceContent(this.contentData),this.clearData()}));else if("1"===this.editorType){let e=[],n=this.contentData[t].content.questionNumber;this.contentData.map((t=>{this.contentCheckedArr.includes(t.content.id)&&e.push({id:t.content.id,questionNumber:n++})})),(0,s.Ln)(e).then((()=>{this.contentData.map((t=>{e.map(((n,o)=>{n.id===t.content.id&&(t.content.questionNumber=e[o].questionNumber)}))})),this.replaceContent(this.contentData),this.clearData()}))}else if("2"===this.editorType){let e=[];this.contentData.map((n=>{this.contentCheckedArr.includes(n.content.id)&&e.push({id:n.content.id,questionNumber:n.content.questionNumber,questionParentId:n.content.questionParentId,questionScore:this.contentData[t].content.questionScore})})),(0,s._P)(e).then((t=>{t.extra&&(this.contentData.map((t=>{this.contentCheckedArr.includes(t.content.id)&&(t.content.questionScore=e[0].questionScore)})),this.replaceContent(this.contentData),this.clearData())}))}},deleteContents(){if(0===this.contentCheckedArr.length)return void this.$error({content:"请选择想要删除的内容！"});let t=this;this.$confirm({title:"是否确定要删除所选内容?",content:"内容删除后不可恢复，您是否确定删除内容？",okText:"删除",maskClosable:!0,okType:"danger",cancelText:"取消",onOk:()=>{let e=[];t.contentData.map((n=>{t.contentCheckedArr.includes(n.content.id)&&e.push({contentType:n.contentType,content:{id:n.content.id}})})),(0,s.f3)(e,t.courseId).then((()=>{(0,s.vz)(t.courseId).then((e=>{this.replaceContent(e.extra),this.getCourseTagAttrData(t.courseId),t.clearData()}))}))},onCancel:()=>{console.log("Cancel")}})},clearData(){this.changeEditorType(""),this.changeCourseContentId(""),this.changeContentCheckedArr([])}}},h=d,u=n(35471),l=(0,u.Z)(h,o,c,!1,null,"4938266b",null),p=l.exports}}]);