(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7a2c5596"],{"14df":function(s,t,a){"use strict";a("19a6")},"19a6":function(s,t,a){},"369a":function(s,t,a){"use strict";a.r(t);a("2f07"),a("59cd");var e=a("7850"),n=[{title:"标准班号",dataIndex:"id",width:100,scopedSlots:{customRender:"idSlot"}},{title:"班级类型",className:"table-tr-type",dataIndex:"classType",align:"center",scopedSlots:{customRender:"classType"}},{slots:{title:"classNameTitle"},dataIndex:"className",scopedSlots:{customRender:"className"}},{slots:{title:"classesPeopleNumTitle"},dataIndex:"classesPeopleNum",scopedSlots:{customRender:"classesPeopleNum"}},{title:"操作",scopedSlots:{customRender:"action"}}],l={name:"Management",data:function(){return{columns:n,data:[],addConfig:{classType:"2",startClassesNo:null,endClassesNo:null,classesPeopleNum:null},settings:{},classData:{},visible:!1,labelCol:{span:3},wrapperCol:{span:17}}},methods:{next:function(){this.$parent.next()},prev:function(){this.$parent.prev()},showModal:function(){this.getSettings(),this.getClassesList(),this.visible=!0},handleOk:function(){this.visible=!1},getSettings:function(){var s=this;Object(e.j)().then((function(t){t.data.classStatus=t.data.divisionStrategy.indexOf("1"),s.settings=t.data}))},getClassData:function(){var s=this;Object(e.j)().then((function(t){Object(e.c)({divisionType:t.data.divisionType}).then((function(t){s.classData=t.data}))}))},getClassesList:function(){var s=this;Object(e.d)().then((function(t){s.data=t.data}))},addClass:function(){var s=this,t=!0;Object.keys(this.addConfig).forEach((function(a){null==s.addConfig[a]&&(t=!1)})),(t&&parseInt(this.addConfig.startClassesNo)<=0||parseInt(this.addConfig.endClassesNo)<=0||parseInt(this.addConfig.classesPeopleNum)<=0||parseInt(this.addConfig.startClassesNo)>parseInt(this.addConfig.endClassesNo))&&(t=!1),t?(this.addConfig.divisionId=this.settings.id,Object(e.m)(this.addConfig).then((function(){s.$message.success("添加成功"),s.newData()})).catch((function(){s.$message.error("添加失败")}))):this.$message.error("请规范填写信息")},blurUpdateClassData:function(s){var t=this;Object(e.u)({id:s.id,classesPeopleNum:s.classesPeopleNum,className:s.className}).then((function(){t.$message.success("修改成功"),t.newData()})).catch((function(){t.$message.error("修改失败")}))},removeClass:function(s){var t=this;Object(e.i)({id:s.id}).then((function(){t.$message.success("删除成功"),t.newData()}))},removeAll:function(){var s=this;Object(e.i)().then((function(){s.$message.success("删除成功"),s.newData()}))},newData:function(){this.getClassesList(),this.getClassData()}},created:function(){this.getClassData()},mounted:function(){}},o=(a("14df"),a("cba8")),i=Object(o.a)(l,(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"content"},[a("a-form-model",{attrs:{"label-col":s.labelCol,"wrapper-col":s.wrapperCol}},[a("a-form-model-item",{attrs:{label:"班级设置"}},[a("div",{staticClass:"text-box"},[s._v(" 已创建"),a("span",[s._v(s._s(s.classData.classTotal))]),s._v("个班级，可分配"),a("span",[s._v(s._s(s.classData.distributablePeopleNum))]),s._v("人，剩余"),a("span",[s._v(s._s(s.classData.surplusPeopleNum))]),s._v("人 ")]),a("a-button",{staticClass:"base",attrs:{shape:"round"},on:{click:s.showModal}},[s._v(" 创建班级 ")])],1)],1)],1),a("div",{staticClass:"steps-action"},[a("a-button",{staticClass:"base",attrs:{shape:"round"},on:{click:s.prev}},[s._v(" 上一步 ")]),a("a-button",{attrs:{type:"primary"},on:{click:s.next}},[s._v(" 下一步 ")])],1),a("a-modal",{attrs:{closable:!1,keyboard:!1,footer:null,width:866},on:{ok:s.handleOk},model:{value:s.visible,callback:function(t){s.visible=t},expression:"visible"}},[a("div",{staticClass:"modal-title",attrs:{slot:"title"},slot:"title"},[a("div",[s._v(" 创建班级 "),a("a-popover",{attrs:{placement:"right"}},[a("template",{slot:"content"},[a("p",[s._v("操作说明:")]),a("p",[s._v(" 1、先选择班级类型，在输入该类型的班号（从1班开始）、每班大约人数， ")]),a("p",[s._v("例如选择重点班，1-4班，每班50人，点击创建班级后，就可以创建")]),a("p",[s._v("4个重点班，班级名称和班级人数都可以再次调整;")]),a("p",[s._v("2、一次只创建一种类型的班级，不同类型的班级分开创建;")]),a("p",[s._v(" 3、班号代表这个班级是本年级的第几个班，班号是唯一的，建议从1班开始 ")]),a("p",[s._v("且连续，总共有n个班，班号就从1-n;")])]),a("a-icon",{style:{fontSize:"14px",color:"#bbc0cb"},attrs:{type:"info-circle"}})],2)],1),a("a-button",{attrs:{type:"primary"},on:{click:s.handleOk}},[s._v(" 完成 ")])],1),a("div",[s._v(" 请选择班级类型、填入班号（本年级的第几个班-第几个班）、填入每班大约人数来批量创建班级，可多次添加： ")]),a("div",{staticClass:"config-box"},[-1==s.settings.classStatus?a("a-select",{model:{value:s.addConfig.classType,callback:function(t){s.$set(s.addConfig,"classType",t)},expression:"addConfig.classType"}},[a("a-select-option",{attrs:{value:"2"}},[s._v(" 普通班 ")]),a("a-select-option",{attrs:{value:"1"}},[s._v(" 重点班 ")])],1):s._e(),a("span",[s._v("从")]),a("a-input",{attrs:{placeholder:"输入数字",type:"number"},model:{value:s.addConfig.startClassesNo,callback:function(t){s.$set(s.addConfig,"startClassesNo",t)},expression:"addConfig.startClassesNo"}}),a("span",{staticClass:"xian"},[s._v("班")]),a("a-input",{attrs:{placeholder:"输入数字",type:"number"},model:{value:s.addConfig.endClassesNo,callback:function(t){s.$set(s.addConfig,"endClassesNo",t)},expression:"addConfig.endClassesNo"}}),a("span",[s._v("班，每班")]),a("a-input",{attrs:{placeholder:"输入数字",type:"number"},model:{value:s.addConfig.classesPeopleNum,callback:function(t){s.$set(s.addConfig,"classesPeopleNum",t)},expression:"addConfig.classesPeopleNum"}}),a("span",[s._v("人")]),a("a-button",{staticClass:"base",attrs:{shape:"round"},on:{click:s.addClass}},[s._v(" 创建班级 ")])],1),a("div",{staticClass:"text-box modal-text-box"},[s._v(" 已创建"),a("span",[s._v(s._s(s.classData.classTotal))]),s._v("个班级，可分配"),a("span",[s._v(s._s(s.classData.distributablePeopleNum))]),s._v("人，剩余"),a("span",[s._v(s._s(s.classData.surplusPeopleNum))]),s._v("人 ")]),a("div",{staticClass:"table-box"},[a("a-table",{attrs:{columns:s.columns,"data-source":s.data,pagination:!1,rowKey:"id"},scopedSlots:s._u([{key:"idSlot",fn:function(t,e){return[a("span",[s._v(s._s(e.id)+"班")])]}},{key:"classType",fn:function(t){return[1==t?a("span",[s._v("●")]):s._e(),s._v(" "+s._s(1==t?"重点班":"普通班")+" ")]}},{key:"className",fn:function(t,e){return[a("a-input",{on:{blur:function(t){return s.blurUpdateClassData(e)}},model:{value:e.className,callback:function(t){s.$set(e,"className",t)},expression:"record.className"}}),s._v(" 班 ")]}},{key:"classesPeopleNum",fn:function(t,e){return[a("a-input",{attrs:{type:"number"},on:{blur:function(t){return s.blurUpdateClassData(e)}},model:{value:e.classesPeopleNum,callback:function(t){s.$set(e,"classesPeopleNum",t)},expression:"record.classesPeopleNum"}})]}},{key:"action",fn:function(t){return[a("a",{staticClass:"text-c-red",on:{click:function(a){return s.removeClass(t)}}},[s._v("删除")])]}}])},[a("template",{slot:"classNameTitle"},[s._v(" 班级名 "),a("span",{staticClass:"text-c-red"},[s._v("(请输入)")])]),a("template",{slot:"classesPeopleNumTitle"},[s._v(" 班级人数 "),a("span",{staticClass:"text-c-red"},[s._v("(请输入)")])])],2)],1),a("div",{staticClass:"btn-delete",on:{click:s.removeAll}},[s._v("删除所有分班")])])],1)}),[],!1,null,"db27a2f4",null);t.default=i.exports}}]);