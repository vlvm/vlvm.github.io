(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7a547d0f"],{"0344":function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return o}));r("ef16"),r("7a02"),r("75b5"),r("8483"),r("f132"),r("8133"),r("89a6");r("e904"),r("e54e");function o(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},4471:function(e,t,r){},"4de5":function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return f})),r.d(t,"a",(function(){return d}));r("3b32");var n=r("b775"),o={tenantId:sessionStorage.getItem("tenantId"),orgId:sessionStorage.getItem("orgId"),garde:JSON.parse(localStorage.getItem("stuGradeId"))},a=o.orgId,i=o.garde,s="".concat(o.tenantId,"/").concat(a,"/").concat(i);function l(e){return Object(n.a)({url:"entranceNews/entranceNewsList/".concat(s),method:"get",params:e})}function c(e){return Object(n.a)({url:"/entranceNews/entranceNewsInfo?id="+e,method:"get"})}function u(e){return Object(n.a)({url:"/entranceNews/insertEntranceNews/".concat(s),method:"post",data:e})}function f(e){return Object(n.a)({url:"/entranceNews/updateEntranceNews",method:"post",data:e})}function d(e){return Object(n.a)({url:"/entranceNews/deleteEntranceNews?id="+e,method:"delete"})}},8681:function(e,t,r){"use strict";r("4471")},"9c76":function(e,t,r){"use strict";r.r(t);var n=r("0344"),o=(r("75b5"),r("f132"),r("8133"),r("6236"),r("4e2c"),r("e54e"),r("dcb2"),r("4de5")),a=r("a4f4"),i=r.n(a),s={name:"release",components:{TitleName:function(){return r.e("chunk-e7b52ff2").then(r.bind(null,"89dd"))}},props:{},data:function(){return{editor:null,labelCol:{span:4},wrapperCol:{span:17},form:{},rules:{title:[{required:!0,message:"请填写标题",trigger:"blur"},{min:1,max:30,message:"最多30个字",trigger:"blur"}]},fileList:[]}},methods:{initForm:function(){var e=this;null!=this.form.id&&Object(o.b)(this.form.id).then((function(t){if(null!=t.data){e.form={id:e.form.id,title:t.data.title},e.editor.txt.html(t.data.content),null!=t.data.enclosureUrl&&""!=t.data.enclosureUrl&&(e.fileList=t.data.enclosureUrl.split(","));var r=null;if(null!=t.data.fileListName&&""!=t.data.fileListName&&(r=t.data.fileListName.split("|")),null!=r)for(var n=0;n<e.fileList.length;n++)e.fileList[n]={uid:n,name:r[n],status:"done",url:e.fileList[n]}}else e.$router.go(-1)}))},onSubmit:function(){var e=this,t=this;this.$refs.form.validate((function(r){if(!r)return!1;e.form.content=e.editor.txt.html(),e.form.enclosureUrl="",e.form.fileListName="";for(var n=0;n<e.fileList.length;n++)e.form.enclosureUrl+=e.fileList[n].url,e.form.fileListName+=e.fileList[n].name,n+1<e.fileList.length&&(e.form.enclosureUrl+=",",e.form.fileListName+="|");null!=e.form.id?Object(o.e)(e.form).then((function(r){0===r.code?(t.$message.success("修改成功"),e.$router.push("/admissions/index")):t.$message.error("修改失败")})):Object(o.d)(e.form).then((function(r){0===r.code?(t.$message.success("添加成功"),e.$router.push("/admissions/index")):t.$message.error("添加失败")}))}))},resetForm:function(){this.form={},this.$router.go(-1)},handleChange:function(e){var t=Object(n.a)(e.fileList);t=t.map((function(e){return e.response&&(e.url=e.response.data),e})),this.fileList=t}},created:function(){null!=this.$route.query.id&&(this.form.id=this.$route.query.id),this.initForm()},mounted:function(){this.editor=new i.a("#editor"),this.editor.create()}},l=(r("8681"),r("cba8")),c=Object(l.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("TitleName",{attrs:{titleName:null!=e.form.id?"编辑信息":"发布信息"},scopedSlots:e._u([{key:"edit",fn:function(){return[r("a-button",{staticClass:"base",attrs:{shape:"round",size:"small"},on:{click:e.resetForm}},[e._v(" 取消 ")]),r("a-button",{staticClass:"add-button",attrs:{type:"primary",size:"small",shape:"round"},on:{click:e.onSubmit}},[e._v(" 保存 ")])]},proxy:!0}])}),r("div",{staticClass:"content"},[r("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{ref:"title",attrs:{label:"标题",prop:"title"}},[r("a-input",{attrs:{placeholder:"请输入标题最多30个字"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("a-form-model-item",{attrs:{label:"内容",prop:"content"}},[r("div",{attrs:{id:"editor"}})]),r("a-form-model-item",{attrs:{label:"添加附件"}},[r("a-upload",{attrs:{action:"https://test01.bysnt.com/welcome-report-api/oss/upload",multiple:!0,"file-list":e.fileList},on:{change:e.handleChange}},[r("a-button",{attrs:{type:"link",icon:"file"}},[e._v(" 选择文档 ")]),r("a-tooltip",{attrs:{placement:"bottom",title:"支持文档格式(不超过50M)doc、docx、xls、xlsx、pdf、txt"}},[r("a-icon",{attrs:{type:"info-circle"}})],1)],1)],1)],1)],1)],1)}),[],!1,null,"0224fcc8",null);t.default=c.exports},b775:function(e,t,r){"use strict";r("75b5"),r("9188"),r("6236"),r("9c7e");var n=r("cebe"),o=r.n(n),a=r("f3e4"),i=o.a.create({baseURL:"https://test01.bysnt.com/welcome-report-api",withCredentials:!0,timeout:3e4});o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",i.interceptors.request.use((function(e){e.method;var t=Object(a.a)();return t&&(e.headers.token=t,e.headers["Cache-Control"]="no-cache",e.headers.Pragma="no-cache"),sessionStorage.getItem("user_info")&&(e.headers.tenantId=JSON.parse(sessionStorage.getItem("user_info")).tenantId),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){var t=Number(e.data.code);if(0===t||200===t||500===t)return e.data;switch(t){case 401:localStorage.clear(),sessionStorage.clear(),Object(a.b)(),sessionStorage.setItem("backUrl",location.pathname+location.search),location.href="https://passportss2.hseduyun.net/passport/oauth/authorize?client_id=E0D55D80AAC660E8&response_type=code&redirect_uri=http://127.0.0.1:5500/management/index";break;default:return Promise.reject(e.message||"error")}}),(function(e){return Promise.reject(e)})),t.a=i},f3e4:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return a}));r("6236"),r("4e2c"),r("3ad4");function n(){return s("template_token")}function o(e){return i("template_token",e)}function a(){var e,t;(t=s(e="template_token"))&&i(e,t,-1)}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="";if(r){var a=new Date;a.setTime(a.getTime()+1e3*r),o="; expires="+a.toGMTString()}document.cookie=e+"="+t+o+(n?"; path="+n:"")}function s(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var o=r[n].trim();if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""}}}]);