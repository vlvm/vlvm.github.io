(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-44b52cb8"],{1:function(e,t){},"2cb2":function(e,t,r){"use strict";r("9448")},"4de5":function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return u}));r("aa88");var n=r("b775"),o=1,i="".concat(1,"/").concat(o);function a(e){return Object(n.a)({url:"entranceNews/entranceNewsList",method:"get",params:e})}function s(e){return Object(n.a)({url:"/entranceNews/entranceNewsInfo?id="+e,method:"get"})}function c(e){return Object(n.a)({url:"/entranceNews/insertEntranceNews/".concat(i),method:"post",data:e})}function l(e){return Object(n.a)({url:"/entranceNews/updateEntranceNews",method:"post",data:e})}function u(e){return Object(n.a)({url:"/entranceNews/deleteEntranceNews?id="+e,method:"delete"})}},9448:function(e,t,r){},"9c76":function(e,t,r){"use strict";r.r(t);var n=r("0344"),o=(r("4c4d"),r("e90a"),r("dfdd"),r("83a0"),r("31c9"),r("b8bb"),r("9135"),r("4de5")),i=r("a4f4"),a=r.n(i),s={name:"release",components:{TitleName:function(){return r.e("chunk-e7b52ff2").then(r.bind(null,"89dd"))}},props:{},data:function(){return{editor:null,labelCol:{span:4},wrapperCol:{span:17},form:{},rules:{title:[{required:!0,message:"请填写标题",trigger:"blur"},{min:1,max:30,message:"最多30个字",trigger:"blur"}]},fileList:[]}},methods:{initForm:function(){var e=this;null!=this.form.id&&Object(o.b)(this.form.id).then((function(t){if(null!=t.data){e.form={id:e.form.id,title:t.data.title},e.editor.txt.html(t.data.content),e.fileList=t.data.enclosureUrl.split(",");for(var r=t.data.fileListName.split("|"),n=0;n<e.fileList.length;n++)e.fileList[n]={uid:n,name:r[n],status:"done",url:e.fileList[n]}}else e.$router.go(-1)}))},onSubmit:function(){var e=this,t=this;this.$refs.form.validate((function(r){if(!r)return!1;e.form.content=e.editor.txt.html(),e.form.enclosureUrl="",e.form.fileListName="";for(var n=0;n<e.fileList.length;n++)e.form.enclosureUrl+=e.fileList[n].url,e.form.fileListName+=e.fileList[n].name,n+1<e.fileList.length&&(e.form.enclosureUrl+=",",e.form.fileListName+="|");null!=e.form.id?Object(o.e)(e.form).then((function(e){0===e.code?t.$message.success("修改成功"):t.$message.error("修改失败")})):Object(o.d)(e.form).then((function(e){0===e.code?t.$message.success("添加成功"):t.$message.error("添加失败")})),e.$router.go(-1)}))},resetForm:function(){this.form={},this.$router.go(-1)},handleChange:function(e){var t=Object(n.a)(e.fileList);t=t.map((function(e){return e.response&&(e.url=e.response.data),e})),this.fileList=t}},created:function(){null!=this.$route.query.id&&(this.form.id=this.$route.query.id),this.initForm()},mounted:function(){this.editor=new a.a("#editor"),this.editor.create()}},c=(r("2cb2"),r("cba8")),l=Object(c.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("TitleName",{attrs:{titleName:null!=e.form.id?"编辑信息":"发布信息"},scopedSlots:e._u([{key:"edit",fn:function(){return[r("a-button",{staticClass:"base",attrs:{shape:"round",size:"small"},on:{click:e.resetForm}},[e._v(" 取消 ")]),r("a-button",{staticClass:"add-button",attrs:{type:"primary",size:"small",shape:"round"},on:{click:e.onSubmit}},[e._v(" 保存 ")])]},proxy:!0}])}),r("div",{staticClass:"content"},[r("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{ref:"title",attrs:{label:"标题",prop:"title"}},[r("a-input",{attrs:{placeholder:"请输入标题最多30个字"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("a-form-model-item",{attrs:{label:"内容",prop:"content"}},[r("div",{attrs:{id:"editor"}})]),r("a-form-model-item",{attrs:{label:"添加附件"}},[r("a-upload",{attrs:{action:"https://test01.bysnt.com/welcome-report-api-local/oss/upload",multiple:!0,"file-list":e.fileList},on:{change:e.handleChange}},[r("a-button",{attrs:{type:"link",icon:"file"}},[e._v(" 选择文档 ")]),r("a-tooltip",{attrs:{placement:"bottom",title:"支持文档格式(不超过50M)doc、docx、xls、xlsx、pdf、txt"}},[r("a-icon",{attrs:{type:"info-circle"}})],1)],1)],1)],1)],1)],1)}),[],!1,null,"98e663ea",null);t.default=l.exports},b775:function(e,t,r){"use strict";r("4c4d"),r("0a53"),r("83a0"),r("29e3");var n=r("cebe"),o=r.n(n),i=(r("7c78"),r("f3e4")),a=o.a.create({baseURL:"https://test01.bysnt.com/welcome-report-api",withCredentials:!0,timeout:3e4});o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",a.interceptors.request.use((function(e){e.method;var t=Object(i.a)();return t&&(e.headers.token=t,e.headers["Cache-Control"]="no-cache",e.headers.Pragma="no-cache"),sessionStorage.getItem("user_info")&&(e.headers.tenantId=JSON.parse(sessionStorage.getItem("user_info")).tenantId),e}),(function(e){return Promise.reject(e)})),a.interceptors.response.use((function(e){var t=Number(e.data.code);if(0===t||200===t)return e.data;switch(t){case 401:localStorage.clear(),sessionStorage.clear(),Object(i.b)(),sessionStorage.setItem("backUrl",location.pathname+location.search),location.href="https://passportss2.hseduyun.net/passport/oauth/authorize?client_id=E0D55D80AAC660E8&response_type=code&redirect_uri=http://127.0.0.1:5500/management/index";break;default:return Promise.reject(e.message||"error")}}),(function(e){return Promise.reject(e)})),t.a=a},f3e4:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return i}));r("83a0"),r("31c9"),r("92bd");function n(){return s("template_token")}function o(e){return a("template_token",e)}function i(){var e,t;(t=s(e="template_token"))&&a(e,t,-1)}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="";if(r){var i=new Date;i.setTime(i.getTime()+1e3*r),o="; expires="+i.toGMTString()}document.cookie=e+"="+t+o+(n?"; path="+n:"")}function s(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var o=r[n].trim();if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""}}}]);