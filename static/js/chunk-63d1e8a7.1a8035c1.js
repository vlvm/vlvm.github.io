(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-63d1e8a7"],{"0344":function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,"a",(function(){return n}));r("ef16"),r("7a02"),r("75b5"),r("8483"),r("f132"),r("8133"),r("89a6");r("e904"),r("e54e");function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"06c4":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("59cd"),r("ef16"),r("4f4e"),r("1945"),r("2f07"),r("64de");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"0bb8":function(e,t,r){"use strict";r("dc59")},d962:function(e,t,r){"use strict";r.r(t);var a=r("0344"),n=(r("75b5"),r("f132"),r("8133"),r("3b32"),r("4f4e"),r("c30f"),r("dcb2"),r("0224"),r("caaf")),s=r.n(n),o=r("644f"),i={name:"onlineReports",components:{TitleName:function(){return r.e("chunk-e7b52ff2").then(r.bind(null,"89dd"))}},data:function(){return{isSaved:!1,isRelease:!1,releaseModal:!1,releaseForm:{date:[],processName:""},imgUrl:[r("e4f8"),r("3b98"),r("89db"),r("7c98"),r("75d6"),r("9fe5")],finallyData:[{id:1,elementName:"信息采集",elementType:1,createTime:"2021-09-07 11:26:21",updateTime:null},{id:2,elementName:"在线缴费",elementType:1,createTime:"2021-09-07 11:26:35",updateTime:null},{id:3,elementName:"入学通知",elementType:1,createTime:"2021-09-07 11:27:06",updateTime:null},{id:4,elementName:"打印登记单",elementType:1,createTime:"2021-09-07 11:27:05",updateTime:null},{id:5,elementName:"开学报到",elementType:2,createTime:"2021-09-07 11:27:21",updateTime:null},{id:6,elementName:"宿舍入住",elementType:2,createTime:"2021-09-07 11:27:39",updateTime:null}]}},mounted:function(){var e=this;Object(o.x)(this.$route.query.processType).then((function(t){t.data.length>0?(e.isSaved=!0,e.isRelease=!0,e.finallyData=t.data,e.releaseForm.processName=t.title,e.releaseForm.date=[t.startDate,t.endDate]):Object(o.b)().then((function(t){e.finallyData=[].concat(Object(a.a)(t.data.onlineProcess),Object(a.a)(t.data.offlineProcess.filter((function(e){return 7!==e.id}))))}))}))},methods:{moment:s.a,range:function(e,t){for(var r=[],a=e;a<t;a++)r.push(a);return r},disabledDate:function(e){return e<s()().subtract(1,"day")},disabledRangeTime:function(e,t){var r=this;return"start"===t?{disabledHours:function(){return r.range(0,60).splice(4,20)},disabledMinutes:function(){return r.range(30,60)},disabledSeconds:function(){return[55,56]}}:{disabledHours:function(){return r.range(0,60).splice(20,4)},disabledMinutes:function(){return r.range(0,31)},disabledSeconds:function(){return[55,56]}}},nextBtn:function(){var e=this,t=this.finallyData.map((function(e){return{elementId:e.id,elementName:e.elementName}}));Object(o.s)({process:t,processType:3}).then((function(t){200===t.code&&(e.isSaved=!0)}))},goEditPage:function(e){var t=this,r=e.elementId,a=e.id,n=e.isConfigure,s="/process/collectInfo",o="/process/onlinePay",i="/process/admissionNotice",l="/process/schoolReport",c="/process/dormitory",u=function(e){return t.$router.push("".concat(e,"?processId=").concat(a))};switch(r){case 1:u(1===n?"/process/collectInfoFinish":s);break;case 2:u(o);break;case 3:u(i);break;case 5:u(l);break;case 6:u(c)}},release:function(){var e=this;this.$refs.releaseForm.validate((function(t){if(!t)return!1;var r=e.finallyData.map((function(e){return e.id}));Object(o.t)({processIdList:r.length>0?"".concat(r.toString(),","):"",processName:e.releaseForm.processName,startTime:e.releaseForm.date[0],endTime:e.releaseForm.date[1]}).then((function(t){e.releaseModal=!1,e.isRelease=!0}))}))}}},l=(r("0bb8"),r("cba8")),c=Object(l.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("TitleName",{attrs:{titleName:"报道流程","show-back-btn":""}}),r("div",{staticClass:"customReports"},[e.isRelease?e._e():r("p",{staticClass:"tips"},[e._v(" 点击下一步，然后点击每个环节，完成配置 ")]),e.isRelease?r("div",{staticClass:"releaseTitle"},[r("p",{staticClass:"title"},[e._v(e._s(e.releaseForm.processName))]),r("p",[e._v("报道时间："+e._s(e.releaseForm.date.join("至")))])]):e._e(),r("div",{staticClass:"contentBox"},[r("div",{staticClass:"c_right"},[r("p",{staticClass:"tips"},[e._v("开始")]),e._l(e.finallyData,(function(t,a){return r("div",{key:t.elementId,staticClass:"box",on:{click:function(r){return e.goEditPage(t)}}},[r("a-badge",{attrs:{offset:[10,5]}},[r("a-icon",{style:{color:1===t.isConfigure?"#50cf8a":"#e14845"},attrs:{slot:"count",theme:"filled",type:1===t.isConfigure?"check-circle":"close-circle"},slot:"count"}),r("img",{attrs:{src:e.imgUrl[a],alt:t.elementName}})],1),r("p",[e._v(e._s(t.elementName))]),a!==e.finallyData.length-1?r("a-icon",{staticStyle:{color:"#33478A"},attrs:{type:"arrow-down"}}):e._e()],1)})),r("p",{staticClass:"tips"},[e._v("报道完成")])],2)]),e.isRelease?e._e():r("div",{staticClass:"btn_group"},[r("div",{staticClass:"group"},[r("a-button",{staticClass:"base",attrs:{shape:"round"},on:{click:function(t){return e.$router.go(-1)}}},[e._v(" 上一步 ")]),e.isSaved?r("a-button",{attrs:{type:"primary"},on:{click:function(t){e.releaseModal=!0}}},[e._v(" 发布 ")]):r("a-button",{attrs:{type:"primary"},on:{click:e.nextBtn}},[e._v(" 下一步 ")])],1)])]),r("a-modal",{attrs:{title:"发布",width:700},model:{value:e.releaseModal,callback:function(t){e.releaseModal=t},expression:"releaseModal"}},[r("a-form-model",{ref:"releaseForm",attrs:{"label-col":{span:6},"wrapper-col":{span:18},model:e.releaseForm}},[r("a-form-model-item",{attrs:{label:"设置报道时间",prop:"date",rules:{required:!0,message:"请选择时间",trigger:"blur"}}},[r("a-range-picker",{attrs:{"disabled-date":e.disabledDate,"disabled-time":e.disabledRangeTime,"show-time":{hideDisabledOptions:!0,defaultValue:[e.moment("00:00:00","HH:mm:ss"),e.moment("11:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss",valueFormat:"YYYY-MM-DD HH:mm:ss"},model:{value:e.releaseForm.date,callback:function(t){e.$set(e.releaseForm,"date",t)},expression:"releaseForm.date"}})],1),r("a-form-model-item",{attrs:{label:"名称",prop:"processName",rules:{required:!0,message:"请选填写名称",trigger:"blur"}}},[r("a-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请填写名称"},model:{value:e.releaseForm.processName,callback:function(t){e.$set(e.releaseForm,"processName",t)},expression:"releaseForm.processName"}})],1)],1),r("template",{slot:"footer"},[r("a-button",{key:"back",on:{click:function(t){e.releaseModal=!1}}},[e._v(" 取消 ")]),r("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.release}},[e._v(" 发布 ")])],1)],2)],1)}),[],!1,null,"185ecd1e",null);t.default=c.exports},dc59:function(e,t,r){}}]);