"use strict";(self["webpackChunkteacher_project"]=self["webpackChunkteacher_project"]||[]).push([[2147],{2147:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"quesContent",class:{active:t.selectId===t.data.id&&t.isNoChecking,important:1===t.data.important&&2!==t.data.type},on:{"!click":function(e){return t.questionClick.apply(null,arguments)}}},[a("ul",{directives:[{name:"show",rawName:"v-show",value:t.selectId===t.data.id&&t.isNoChecking,expression:"selectId === data.id && isNoChecking"}]},[2===t.data.type?[t.data.relation.length>0?a("li",{on:{click:function(e){return t.menuClick(-1)}}},[t._v("取消关联")]):t._e(),t.relationData.length>1&&0===t.data.relation.length?a("li",{on:{click:function(e){return e.stopPropagation(),t.menuClick("0")}}},[t._v(" 多题关联 ")]):t._e(),a("li",{on:{click:function(e){return t.menuClick("1")}}},[t._v("连续编号")]),a("li",{on:{click:function(e){return t.menuClick("2")}}},[t._v("连续设分")])]:t._e(),a("li",{on:{click:function(e){return t.menuClick("7")}}},[t._v("编辑")])],2),a("div",{staticClass:"item"},["0"===t.editorType&&t.relationData.includes(t.data.id)&&0===t.data.relation.length?a("a-checkbox",{attrs:{lable:"",value:t.data.id,checked:t.contentCheckedArr.includes(t.data.id)},on:{change:function(e){return t.relationChange(e,t.data.id)}}}):t._e(),2!==t.data.type||"1"!==t.editorType&&"2"!==t.editorType?t._e():a("a-checkbox",{attrs:{lable:"",value:t.data.id,checked:t.contentCheckedArr.includes(t.data.id)},on:{change:function(e){return t.numberChange()}}}),"3"===t.editorType?a("a-checkbox",{attrs:{lable:"",value:t.data.id,checked:t.contentCheckedArr.includes(t.data.id)},on:{change:function(e){return t.checkContent(e)}}}):t._e(),0===t.data.type?[a("div",{staticClass:"txt",domProps:{innerHTML:t._s(t.data.ques)}})]:t._e(),1===t.data.type?[a("div",{staticClass:"file"},[a("a-icon",{style:{fontSize:"32px",marginRight:"10px"},attrs:{type:"file-text"}}),t._v(" "+t._s(t.data.ques)+" ")],1)]:t._e(),2===t.data.type?[a("div",{staticClass:"itemContent"},[a("a-tag",[t._v("题号："+t._s(t.data.quesNum))]),a("a-tag",[t._v("分数："+t._s(t.data.point))]),1===t.data.important?a("a-tag",{attrs:{color:"#FF9933"}},[t._v("必做")]):t._e(),1===t.data.isReview?a("a-tag",{attrs:{color:"#FF9933"}},[t._v("自阅")]):t._e(),t.data.relation.length>0?a("a-tag",{attrs:{color:"#FF9933"}},[a("span",{staticClass:"iconfont lx-guanlian",staticStyle:{color:"#fff"}})]):t._e(),a("div",{staticClass:"txt",domProps:{innerHTML:t._s(t.data.ques)}}),a("a-collapse",{attrs:{bordered:!1},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[a("a-collapse-panel",{key:"1"},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(" 已提交6人，未提交4人"),a("a-progress",{attrs:{percent:30}})],1),a("a-card",{attrs:{title:"作答详情",size:"small",bordered:!1}},[0===t.data.questionType?t._l(6,(function(e){return a("div",{key:e,staticClass:"ask"},[a("div",{staticClass:"iconBox"},[t._v("A")]),a("div",[t._v("学生"+t._s(e))])])})):t._e(),1===t.data.questionType?t._l(t.answerData,(function(e){return a("div",{key:e.id,staticClass:"ask"},[a("div",{staticClass:"iconBox",class:{wrong:0===e.state,partially:1===e.state,right:2===e.state}},[0===e.state?a("i",{staticClass:"iconfont lx-wrong"}):t._e(),1===e.state?a("i",{staticClass:"iconfont lx-partially"}):t._e(),2===e.state?a("i",{staticClass:"iconfont lx-right"}):t._e()]),a("div",[t._v(t._s(e.name))])])})):t._e()],2),1===t.data.questionType?a("a-card",{attrs:{title:"作答分享",size:"small",bordered:!1}},t._l(t.shareAnswerData,(function(e){return a("div",{key:e.id,staticClass:"ask"},[a("div",{staticClass:"iconBox",class:{wrong:0===e.state,partially:1===e.state,right:2===e.state}},[0===e.state?a("i",{staticClass:"iconfont lx-wrong"}):t._e(),1===e.state?a("i",{staticClass:"iconfont lx-partially"}):t._e(),2===e.state?a("i",{staticClass:"iconfont lx-right"}):t._e()]),a("div",[t._v(t._s(e.name))])])})),0):t._e()],1)],1)],1)]:t._e()],2),t.data.askData.stuAsk.length>0?a("a-card",{staticStyle:{margin:"10px 0"},attrs:{title:"题问区",size:"small"}},t._l(t.data.askData.stuAsk,(function(e){return a("div",{key:e.id,staticClass:"ask"},[a("div",{staticClass:"iconBox",class:{wrong:0===e.isReply}},[a("a-icon",{attrs:{type:"question"}})],1),a("div",[t._v(t._s(e.name))])])})),0):t._e(),t.data.askData.shareAsk.length>0?a("a-card",{attrs:{title:"题问分享",size:"small"}},t._l(t.data.askData.shareAsk,(function(e){return a("div",{key:e.id,staticClass:"ask"},[a("div",{staticClass:"iconBox",class:{wrong:0===e.isReply}},[a("a-icon",{attrs:{type:"question"}})],1),a("div",[t._v(t._s(e.name))])])})),0):t._e(),1===t.data.discussionArea?a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",icon:"question-circle",size:"small"}},[t._v(" 讨论区 ")]):t._e()],1)},i=[],s=a(68932),r=a(4367),c=(a(26699),a(34553),a(47042),a(21249),a(41539),a(39714),a(57327),a(32023),a(54747),a(92222),a(40561),a(34665)),o={name:"ContentQuestion",props:{data:{type:Object,required:!0}},data:function(){return{activeKey:["2"],answerData:[{id:0,name:"学生a",state:0},{id:1,name:"学生b",state:1},{id:2,name:"学生c",state:2},{id:3,name:"学生d",state:0},{id:4,name:"学生e",state:1},{id:5,name:"学生f",state:2}],shareAnswerData:[{id:0,name:"学生a",state:0},{id:1,name:"学生b",state:1},{id:2,name:"学生c",state:2}]}},watch:{activeKey:function(t){console.log(t)}},computed:(0,r.Z)({isNoChecking:function(){return!["0","1","2","3"].includes(this.editorType)},index:function(){var t=this;return this.contentData.findIndex((function(e){return e.id===t.data.id}))}},(0,c.rn)({contentData:function(t){return t.p.contentData},editorType:function(t){return t.p.selectItem.editorType},selectId:function(t){return t.p.selectItem.selectId},selectItemData:function(t){return t.p.selectItem.selectItemData},relationData:function(t){return t.p.selectItem.relationData},contentCheckedArr:function(t){return t.p.contentCheckedArr}})),methods:(0,r.Z)((0,r.Z)({},(0,c.nv)("p",["changeEditorType","changeSelectId","getSelectItemData","replaceContent","changeContentCheckedArr","changeRelationData"])),{},{checkRelation:function(){var t=this.contentData.slice(this.index).findIndex((function(t){return 2!==t.type}));this.changeRelationData(this.contentData.slice(this.index).slice(0,t).map((function(t){return t.id})))},questionClick:function(){if(this.selectId===this.data.id||!this.isNoChecking)return this.changeSelectId(""),void this.getSelectItemData({});this.checkRelation(),this.changeSelectId(this.data.id),this.getSelectItemData(this.data)},menuClick:function(t){var e=this.contentData[this.index],a=e.id,n=e.relation,i=e.quesNum;switch(n&&n.length>0?this.contentData.map((function(t){if(n.includes(t.id))return t.quesNum})).filter((function(t){return t})).toString():i,t){case-1:this.changeEditorType(""),this.contentData.forEach((function(t){2===t.type&&t.relation.includes(a)&&(t.relation=[])}));break;case"0":this.changeEditorType(t);break;case"1":this.changeEditorType(t);break;case"2":this.changeEditorType(t);break;case"7":this.changeEditorType(t);break}},relationChange:function(t,e){var a=this.relationData.findIndex((function(t){return t===e}));this.changeContentCheckedArr(this.relationData.slice(0,a+1))},numberChange:function(){var t=this,e=this.contentData.map((function(e,a){if(2===e.type&&a<=t.index)return e.id})).filter((function(t){return t}));this.changeContentCheckedArr(e)},checkContent:function(t){var e=this;if(t.target.checked)this.changeContentCheckedArr([].concat((0,s.Z)(this.contentCheckedArr),[this.data.id]));else{var a=this.contentCheckedArr.findIndex((function(t){return t===e.data.id}));this.changeContentCheckedArr(this.contentCheckedArr.splice(a,1))}}})},l=o,d=a(43736),u=(0,d.Z)(l,n,i,!1,null,"a18f4760",null),h=u.exports},23748:function(t,e,a){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}a.d(e,{Z:function(){return n}})},68932:function(t,e,a){a.d(e,{Z:function(){return o}});var n=a(23748);function i(t){if(Array.isArray(t))return(0,n.Z)(t)}a(82526),a(41817),a(41539),a(32165),a(78783),a(33948),a(91038);function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=a(48936);a(21703);function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return i(t)||s(t)||(0,r.Z)(t)||c()}},48936:function(t,e,a){a.d(e,{Z:function(){return i}});a(47042),a(41539),a(68309),a(91038),a(78783),a(74916),a(77601);var n=a(23748);function i(t,e){if(t){if("string"===typeof t)return(0,n.Z)(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,n.Z)(t,e):void 0}}}}]);