"use strict";(self["webpackChunkteacher_project"]=self["webpackChunkteacher_project"]||[]).push([[8258],{42092:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quesContent",class:{active:e.selectId===e.data.id&&e.isNoChecking,important:1===e.data.important&&2!==e.data.type},on:{"!click":function(t){return e.questionClick.apply(null,arguments)}}},[a("ul",{directives:[{name:"show",rawName:"v-show",value:e.selectId===e.data.id&&e.isNoChecking&&!e.isOtherTeacher,expression:"selectId === data.id && isNoChecking && !isOtherTeacher"}]},[2===e.data.type?[e.data.relation.length>0?a("li",{on:{click:function(t){return e.menuClick(-1)}}},[e._v("取消关联")]):e._e(),e.relationData.length>1&&0===e.data.relation.length?a("li",{on:{click:function(t){return t.stopPropagation(),e.menuClick("0")}}},[e._v(" 多题关联 ")]):e._e(),a("li",{on:{click:function(t){return e.menuClick("1")}}},[e._v("连续编号")]),a("li",{on:{click:function(t){return e.menuClick("2")}}},[e._v("连续设分")])]:e._e(),a("li",{on:{click:function(t){return e.menuClick("3")}}},[e._v("多选")]),a("li",{on:{click:function(t){return e.menuClick("4")}}},[e._v("拷贝")]),a("li",{on:{click:function(t){return e.menuClick("5")}}},[e._v("粘贴")]),a("li",{on:{click:function(t){return e.menuClick("6")}}},[e._v("删除")]),a("li",{on:{click:function(t){return e.menuClick("7")}}},[e._v("编辑")])],2),a("div",{staticClass:"item"},["0"===e.editorType&&e.relationData.includes(e.data.id)&&0===e.data.relation.length?a("a-checkbox",{attrs:{lable:"",value:e.data.id,checked:e.contentCheckedArr.includes(e.data.id)},on:{change:function(t){return e.relationChange(t,e.data.id)}}}):e._e(),2!==e.data.type||"1"!==e.editorType&&"2"!==e.editorType?e._e():a("a-checkbox",{attrs:{lable:"",value:e.data.id,checked:e.contentCheckedArr.includes(e.data.id)},on:{change:function(t){return e.numberChange()}}}),"3"===e.editorType?a("a-checkbox",{attrs:{lable:"",value:e.data.id,checked:e.contentCheckedArr.includes(e.data.id)},on:{change:function(t){return e.checkContent(t)}}}):e._e(),0===e.data.type?[a("div",{staticClass:"txt",domProps:{innerHTML:e._s(e.data.ques)}})]:e._e(),1===e.data.type?[a("div",{staticClass:"file"},[a("a-icon",{style:{fontSize:"32px",marginRight:"10px"},attrs:{type:"file-text"}}),e._v(" "+e._s(e.data.ques)+" ")],1)]:e._e(),2===e.data.type?[a("div",{staticClass:"itemContent"},[a("a-tag",[e._v("题号："+e._s(e.data.quesNum))]),a("a-tag",[e._v("分数："+e._s(e.data.point))]),1===e.data.important?a("a-tag",{attrs:{color:"#FF9933"}},[e._v("必做")]):e._e(),1===e.data.isReview?a("a-tag",{attrs:{color:"#FF9933"}},[e._v("自阅")]):e._e(),e.data.relation.length>0?a("a-tag",{attrs:{color:"#FF9933"}},[a("span",{staticClass:"iconfont lx-guanlian",staticStyle:{color:"#fff"}})]):e._e(),2!==e.showAnswerArea?[a("div",{staticClass:"txt",domProps:{innerHTML:e._s(e.data.ques)}}),e.selectId===e.data.id?[a("div",{staticClass:"rightAnswer",domProps:{innerHTML:e._s(e.data.rightAnswer)}}),a("div",{staticClass:"analysis",domProps:{innerHTML:e._s(e.data.analysis)}})]:e._e()]:e._e(),0===e.data.questionType?a("div",[1===e.showAnswerArea||2===e.showAnswerArea?a("ol",{staticClass:"singleChoice"},[a("li",[e._v("A")]),a("li",[e._v("B")]),a("li",[e._v("C")]),a("li",[e._v("D")]),a("li",[e._v("E")])]):e._e()]):e._e(),1===e.data.questionType?a("div",[1===e.showAnswerArea||2===e.showAnswerArea?a("ol",{staticClass:"singleChoice"},e._l(e.answerMethods,(function(t){return a("li",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),0):e._e()]):e._e()],2)]:e._e()],2),1===e.data.discussionArea?a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"question-circle",size:"small"}},[e._v(" 讨论区 ")]):e._e()],1)},i=[],c=a(34665),s={name:"ContentQuestion",props:{data:{type:Object,required:!0}},data(){return{answerMethods:[{id:"0",name:"拍照"},{id:"1",name:"手写"},{id:"2",name:"音频"},{id:"3",name:"视频"}]}},computed:{isNoChecking(){return!["0","1","2","3"].includes(this.editorType)},index(){return this.contentData.findIndex((e=>e.id===this.data.id))},...(0,c.rn)({isOtherTeacher:e=>e.c.isOtherTeacher,showAnswerArea:e=>e.c.showAnswerArea,contentData:e=>e.c.contentData,editorType:e=>e.c.selectItem.editorType,selectId:e=>e.c.selectItem.selectId,selectItemData:e=>e.c.selectItem.selectItemData,relationData:e=>e.c.selectItem.relationData,contentCheckedArr:e=>e.c.contentCheckedArr})},methods:{...(0,c.nv)("c",["changeEditorType","changeSelectId","getSelectItemData","replaceContent","changeContentCheckedArr","changeRelationData"]),checkRelation(){let e=this.contentData.slice(this.index).findIndex((e=>2!==e.type));this.changeRelationData(this.contentData.slice(this.index).slice(0,e).map((e=>e.id)))},questionClick(){if(this.selectId===this.data.id||!this.isNoChecking)return this.changeSelectId(""),void this.getSelectItemData({});this.checkRelation(),this.changeSelectId(this.data.id),this.getSelectItemData(this.data)},menuClick(e){let t,{id:a,type:n,relation:i,quesNum:c}=this.contentData[this.index];switch(t=i&&i.length>0?this.contentData.map((e=>{if(i.includes(e.id))return e.quesNum})).filter((e=>e)).toString():c,e){case-1:this.changeEditorType(""),this.contentData.forEach((e=>{2===e.type&&e.relation.includes(a)&&(e.relation=[])}));break;case"0":this.changeEditorType(e);break;case"1":this.changeEditorType(e);break;case"2":this.changeEditorType(e);break;case"3":this.changeEditorType(e);break;case"4":this.changeEditorType(e);break;case"5":this.changeEditorType(e);break;case"6":this.changeEditorType(e),this.$confirm({title:"是否确定要删除?",content:2===n&&i&&i.length>0?`点击删除将会删除题号为 ${t} 的内容`:"点击删除将会删除所选内容",okText:"删除",maskClosable:!0,okType:"danger",cancelText:"取消",onOk:()=>{if(i&&i.length>0)return this.replaceContent(this.contentData.filter((e=>!i.includes(e.id)))),!1;this.contentData.splice(this.index,1)},onCancel:()=>{console.log("Cancel")}});break;case"7":this.changeEditorType(e);break}},relationChange(e,t){let a=this.relationData.findIndex((e=>e===t));this.changeContentCheckedArr(this.relationData.slice(0,a+1))},numberChange(){let e=this.contentData.map(((e,t)=>{if(2===e.type&&t<=this.index)return e.id})).filter((e=>e));this.changeContentCheckedArr(e)},checkContent(e){if(e.target.checked)this.changeContentCheckedArr([...this.contentCheckedArr,this.data.id]);else{let e=this.contentCheckedArr.filter((e=>e!==this.data.id));this.changeContentCheckedArr(e)}}}},r=s,o=a(43736),l=(0,o.Z)(r,n,i,!1,null,"25858671",null),d=l.exports}}]);